{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\wjx19\\\\Documents\\\\GitHub\\\\I-Prompt\\\\src\\\\pages\\\\PromptLibraryPage.jsx\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport React, { useState, useRef, useEffect } from 'react';\nimport { Plus, Search, Copy, Heart, X, Languages, ChevronDown, ChevronRight, Tag as TagIcon, Sparkles, Bookmark, Clock, TrendingUp, Edit3, Minus, Trash2, Star, Weight, Zap, ChevronLeft, ChevronRight as ChevronRightIcon, EyeOff, Eye } from 'lucide-react';\nimport { copyToClipboard } from '../utils/clipboard';\nimport { translateText, translateTag } from '../services/aliTranslationService';\nimport { TAG_DATABASE, searchTags, getPopularTags } from '../constants/tagDatabase';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst PromptLibraryPage = () => {\n  _s();\n  var _TAG_DATABASE$selecte, _TAG_DATABASE$selecte2, _TAG_DATABASE$selecte3, _TAG_DATABASE$selecte4;\n  // 提示词编辑状态\n  const [prompt, setPrompt] = useState('');\n  const [promptHistory, setPromptHistory] = useState([]);\n\n  // 提示词编辑器状态\n  const [selectedTags, setSelectedTags] = useState([]);\n  const [disabledTags, setDisabledTags] = useState(new Set());\n  const [translatedTags, setTranslatedTags] = useState({});\n  const [hoveredTag, setHoveredTag] = useState(null);\n\n  // 标签库状态\n  const [selectedCategory, setSelectedCategory] = useState('favorites');\n  const [selectedSubcategory, setSelectedSubcategory] = useState(null);\n  const [expandedCategories, setExpandedCategories] = useState({\n    favorites: true\n  });\n  const [searchQuery, setSearchQuery] = useState('');\n  const [searchResults, setSearchResults] = useState([]);\n\n  // UI状态\n  const [favorites, setFavorites] = useState([]);\n  const [copyStatus, setCopyStatus] = useState('');\n  const textareaRef = useRef(null);\n\n  // 实时搜索建议\n  useEffect(() => {\n    if (searchQuery.trim()) {\n      const results = searchTags(searchQuery).slice(0, 20);\n      setSearchResults(results);\n    } else {\n      setSearchResults([]);\n    }\n  }, [searchQuery]);\n\n  // 同步提示词和选中标签\n  useEffect(() => {\n    const tagsFromPrompt = prompt.split(',').map(tag => tag.trim()).filter(tag => tag);\n    setSelectedTags(tagsFromPrompt);\n  }, [prompt]);\n\n  // 更新英文提示词（排除禁用的标签）\n  const updatePrompt = tags => {\n    const enabledTags = tags.filter((_, index) => !disabledTags.has(index));\n    const newPrompt = enabledTags.join(', ');\n    setPrompt(newPrompt);\n\n    // 添加到历史记录\n    if (newPrompt.trim() && !promptHistory.includes(newPrompt.trim())) {\n      setPromptHistory(prev => [newPrompt.trim(), ...prev.slice(0, 9)]);\n    }\n  };\n\n  // 处理提示词变化\n  const handlePromptChange = value => {\n    setPrompt(value);\n\n    // 添加到历史记录\n    if (value.trim() && !promptHistory.includes(value.trim())) {\n      setPromptHistory(prev => [value.trim(), ...prev.slice(0, 9)]);\n    }\n  };\n\n  // 添加标签到提示词\n  const addTagToPrompt = tag => {\n    const newTags = [...selectedTags, tag.en];\n    setSelectedTags(newTags);\n    updatePrompt(newTags);\n\n    // 聚焦到文本框末尾\n    if (textareaRef.current) {\n      textareaRef.current.focus();\n      textareaRef.current.setSelectionRange(prompt.length, prompt.length);\n    }\n  };\n\n  // 删除标签\n  const deleteTag = index => {\n    const newTags = selectedTags.filter((_, i) => i !== index);\n    const newDisabled = new Set([...disabledTags].map(i => i > index ? i - 1 : i).filter(i => i !== index));\n    setSelectedTags(newTags);\n    setDisabledTags(newDisabled);\n    updatePrompt(newTags);\n  };\n\n  // 切换禁用状态\n  const toggleDisabled = index => {\n    const newDisabled = new Set(disabledTags);\n    if (newDisabled.has(index)) {\n      newDisabled.delete(index);\n    } else {\n      newDisabled.add(index);\n    }\n    setDisabledTags(newDisabled);\n    updatePrompt(selectedTags);\n  };\n\n  // 解析标签，提取权重和括号信息\n  const parseTag = tag => {\n    // 检测权重 (tag:1.2)\n    const weightMatch = tag.match(/^(.+?):([0-9.]+)$/);\n    if (weightMatch) {\n      return {\n        text: weightMatch[1],\n        weight: parseFloat(weightMatch[2]),\n        bracketType: 'none',\n        brackets: 0\n      };\n    }\n\n    // 检测括号类型和层级\n    let brackets = 0;\n    let text = tag;\n    let bracketType = 'none';\n\n    // 检测圆括号 ()\n    if (text.startsWith('(') && text.endsWith(')')) {\n      bracketType = 'round';\n      while (text.startsWith('(') && text.endsWith(')')) {\n        brackets++;\n        text = text.slice(1, -1);\n      }\n    }\n    // 检测花括号 {}\n    else if (text.startsWith('{') && text.endsWith('}')) {\n      bracketType = 'curly';\n      while (text.startsWith('{') && text.endsWith('}')) {\n        brackets++;\n        text = text.slice(1, -1);\n      }\n    }\n    // 检测方括号 []\n    else if (text.startsWith('[') && text.endsWith(']')) {\n      bracketType = 'square';\n      while (text.startsWith('[') && text.endsWith(']')) {\n        brackets++;\n        text = text.slice(1, -1);\n      }\n    }\n    return {\n      text,\n      weight: 1.0,\n      bracketType,\n      brackets\n    };\n  };\n\n  // 构建标签字符串\n  const buildTag = (text, weight, bracketType, brackets) => {\n    let result = text;\n\n    // 添加权重\n    if (weight !== 1.0) {\n      result = `${text}:${weight.toFixed(1)}`;\n    }\n\n    // 添加括号\n    if (bracketType === 'round') {\n      for (let i = 0; i < brackets; i++) {\n        result = `(${result})`;\n      }\n    } else if (bracketType === 'curly') {\n      for (let i = 0; i < brackets; i++) {\n        result = `{${result}}`;\n      }\n    } else if (bracketType === 'square') {\n      for (let i = 0; i < brackets; i++) {\n        result = `[${result}]`;\n      }\n    }\n    return result;\n  };\n\n  // 调整权重\n  const adjustWeight = (index, delta) => {\n    const tag = selectedTags[index];\n    const parsed = parseTag(tag);\n    const newWeight = Math.max(0.1, Math.min(2.0, parsed.weight + delta));\n    const newTag = buildTag(parsed.text, newWeight, parsed.bracketType, parsed.brackets);\n    const newTags = [...selectedTags];\n    newTags[index] = newTag;\n    setSelectedTags(newTags);\n    updatePrompt(newTags);\n  };\n\n  // 调整括号\n  const adjustBrackets = (index, bracketType, delta) => {\n    const tag = selectedTags[index];\n    const parsed = parseTag(tag);\n\n    // 如果要增加括号且当前没有括号，或者类型相同，才允许调整\n    if (delta > 0 && parsed.bracketType !== 'none' && parsed.bracketType !== bracketType) {\n      return; // 不允许混用不同类型的括号\n    }\n    const newBrackets = Math.max(0, Math.min(5, parsed.brackets + delta));\n    const newBracketType = newBrackets === 0 ? 'none' : bracketType;\n    const newTag = buildTag(parsed.text, parsed.weight, newBracketType, newBrackets);\n    const newTags = [...selectedTags];\n    newTags[index] = newTag;\n    setSelectedTags(newTags);\n    updatePrompt(newTags);\n  };\n\n  // 一键翻译所有未翻译的标签\n  const translateAllTags = async () => {\n    const untranslatedTags = selectedTags.filter(tag => {\n      const parsed = parseTag(tag);\n      return !translatedTags[parsed.text];\n    });\n    if (untranslatedTags.length === 0) {\n      setCopyStatus('no-untranslated');\n      setTimeout(() => setCopyStatus(''), 2000);\n      return;\n    }\n    setCopyStatus('translating');\n    try {\n      for (const tag of untranslatedTags) {\n        const parsed = parseTag(tag);\n        if (!translatedTags[parsed.text]) {\n          const translated = await translateTag(parsed.text);\n          setTranslatedTags(prev => ({\n            ...prev,\n            [parsed.text]: translated\n          }));\n          // 添加小延迟避免请求过快\n          await new Promise(resolve => setTimeout(resolve, 100));\n        }\n      }\n      setCopyStatus('translate-success');\n    } catch (error) {\n      console.error('批量翻译失败:', error);\n      setCopyStatus('translate-error');\n    }\n    setTimeout(() => setCopyStatus(''), 2000);\n  };\n\n  // 翻译单个标签\n  const translateSingleTag = async tag => {\n    // 提取纯文本进行翻译\n    const parsed = parseTag(tag);\n    const pureText = parsed.text;\n    if (translatedTags[pureText]) {\n      return translatedTags[pureText];\n    }\n    try {\n      const translated = await translateTag(pureText);\n      setTranslatedTags(prev => ({\n        ...prev,\n        [pureText]: translated\n      }));\n      return translated;\n    } catch (error) {\n      console.error('翻译失败:', error);\n      return pureText;\n    }\n  };\n\n  // 复制标签\n  const copyTag = async tag => {\n    const success = await copyToClipboard(tag);\n    setCopyStatus(success ? 'copied' : 'error');\n    setTimeout(() => setCopyStatus(''), 2000);\n  };\n\n  // 收藏标签\n  const favoriteTag = tag => {\n    const parsed = parseTag(tag);\n    const tagObj = {\n      en: parsed.text,\n      cn: translatedTags[parsed.text] || parsed.text,\n      frequency: 80\n    };\n    toggleFavorite(tagObj);\n  };\n\n  // 复制功能\n  const handleCopy = async text => {\n    const success = await copyToClipboard(text || prompt);\n    setCopyStatus(success ? 'copied' : 'error');\n    setTimeout(() => setCopyStatus(''), 2000);\n  };\n\n  // 收藏功能\n  const toggleFavorite = tag => {\n    setFavorites(prev => {\n      const isAlreadyFavorited = prev.some(fav => fav.en === tag.en);\n      if (isAlreadyFavorited) {\n        return prev.filter(fav => fav.en !== tag.en);\n      } else {\n        return [...prev, tag];\n      }\n    });\n  };\n\n  // 分类展开/收起\n  const toggleCategory = categoryKey => {\n    setExpandedCategories(prev => ({\n      ...prev,\n      [categoryKey]: !prev[categoryKey]\n    }));\n  };\n\n  // 选择分类\n  const selectCategory = (categoryKey, subcategoryKey = null) => {\n    setSelectedCategory(categoryKey);\n    setSelectedSubcategory(subcategoryKey);\n  };\n\n  // 获取当前显示的标签\n  const getCurrentTags = () => {\n    if (searchQuery.trim()) {\n      return searchResults;\n    }\n    if (selectedCategory === 'favorites') {\n      if (selectedSubcategory === 'personal') {\n        return favorites;\n      } else {\n        // 显示热门标签\n        return getPopularTags(20);\n      }\n    }\n    const category = TAG_DATABASE[selectedCategory];\n    if (!category) return [];\n    if (selectedSubcategory) {\n      const subcategory = category.subcategories[selectedSubcategory];\n      return subcategory ? subcategory.tags : [];\n    }\n\n    // 返回该分类下所有标签\n    const allTags = [];\n    Object.values(category.subcategories).forEach(subcategory => {\n      allTags.push(...subcategory.tags);\n    });\n    return allTags;\n  };\n\n  // 动态更新TAG_DATABASE中的收藏标签\n  useEffect(() => {\n    if (TAG_DATABASE.favorites && TAG_DATABASE.favorites.subcategories.personal) {\n      TAG_DATABASE.favorites.subcategories.personal.tags = favorites;\n    }\n  }, [favorites]);\n  const currentTags = getCurrentTags();\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"min-h-screen bg-gradient-to-br from-blue-50 via-white to-purple-50\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"bg-white/80 backdrop-blur-sm border-b border-gray-200 px-6 py-4\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"max-w-7xl mx-auto\",\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          className: \"text-2xl font-bold text-gray-900 mb-2 flex items-center\",\n          children: [/*#__PURE__*/_jsxDEV(Sparkles, {\n            className: \"text-blue-600 mr-3\",\n            size: 28\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 362,\n            columnNumber: 13\n          }, this), \"\\u667A\\u80FD\\u63D0\\u793A\\u8BCD\\u5E93 3.0\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 361,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-gray-600\",\n          children: \"\\u4E13\\u4E1A\\u7684\\u63D0\\u793A\\u8BCD\\u7F16\\u8F91\\u548C\\u7BA1\\u7406\\u5DE5\\u5177 \\u2022 \\u652F\\u6301\\u5B9E\\u65F6\\u7FFB\\u8BD1\\u548C\\u667A\\u80FD\\u5206\\u7C7B \\u2022 \\u8BA9AI\\u7ED8\\u753B\\u521B\\u4F5C\\u66F4\\u9AD8\\u6548\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 365,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 360,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 359,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"max-w-7xl mx-auto p-6\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-white rounded-xl shadow-lg border border-gray-200 mb-6\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"p-6\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center justify-between mb-4\",\n            children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n              className: \"text-lg font-semibold text-gray-900 flex items-center\",\n              children: [/*#__PURE__*/_jsxDEV(TagIcon, {\n                className: \"text-blue-600 mr-2\",\n                size: 20\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 377,\n                columnNumber: 17\n              }, this), \"\\u63D0\\u793A\\u8BCD\\u7F16\\u8F91\\u5668\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 376,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-center gap-2\",\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: translateAllTags,\n                className: \"flex items-center gap-2 px-3 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors text-sm\",\n                children: [/*#__PURE__*/_jsxDEV(Languages, {\n                  size: 14\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 385,\n                  columnNumber: 19\n                }, this), \"\\u4E00\\u952E\\u7FFB\\u8BD1\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 381,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: () => handleCopy(),\n                className: \"flex items-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors\",\n                children: [/*#__PURE__*/_jsxDEV(Copy, {\n                  size: 16\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 392,\n                  columnNumber: 19\n                }, this), \"\\u590D\\u5236\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 388,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: () => {\n                  setPrompt('');\n                  setSelectedTags([]);\n                  setDisabledTags(new Set());\n                },\n                className: \"p-2 text-gray-500 hover:bg-gray-100 rounded-lg transition-colors\",\n                children: /*#__PURE__*/_jsxDEV(X, {\n                  size: 16\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 403,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 395,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 380,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 375,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"grid grid-cols-1 lg:grid-cols-2 gap-8\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"space-y-3\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"text-sm font-medium text-gray-700\",\n                children: \"\\u82F1\\u6587\\u63D0\\u793A\\u8BCD\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 412,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n                ref: textareaRef,\n                value: prompt,\n                onChange: e => handlePromptChange(e.target.value),\n                placeholder: \"\\u8F93\\u5165\\u6216\\u70B9\\u51FB\\u53F3\\u4FA7\\u6807\\u7B7E\\u6DFB\\u52A0\\u63D0\\u793A\\u8BCD...\",\n                className: \"w-full h-40 p-4 border border-gray-300 rounded-lg resize-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all font-mono text-sm overflow-y-auto\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 413,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex items-center justify-between text-xs text-gray-500\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  children: [\"\\u5B57\\u7B26\\u6570: \", prompt.length]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 421,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  children: [\"\\u6807\\u7B7E\\u6570: \", selectedTags.filter((_, i) => !disabledTags.has(i)).length, \"/\", selectedTags.length]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 422,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 420,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 411,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"space-y-3\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"text-sm font-medium text-gray-700 flex items-center\",\n                children: [/*#__PURE__*/_jsxDEV(Edit3, {\n                  size: 16,\n                  className: \"mr-1\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 429,\n                  columnNumber: 19\n                }, this), \"\\u63D0\\u793A\\u8BCD\\u7F16\\u8F91\\u533A\", /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"text-xs bg-blue-100 text-blue-600 px-2 py-1 rounded-full ml-2\",\n                  children: \"\\u60AC\\u505C\\u7F16\\u8F91 \\u2022 \\u6743\\u91CD\\u8C03\\u8282 \\u2022 \\u62EC\\u53F7\\u63A7\\u5236\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 431,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 428,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"border border-gray-300 rounded-lg p-4 bg-blue-50/20 min-h-40 max-h-80 overflow-y-auto\",\n                children: selectedTags.length === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"flex items-center justify-center h-32 text-gray-500\",\n                  children: /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"text-center\",\n                    children: [/*#__PURE__*/_jsxDEV(TagIcon, {\n                      size: 32,\n                      className: \"mx-auto mb-2 opacity-50\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 439,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                      className: \"text-sm\",\n                      children: \"\\u70B9\\u51FB\\u4E0B\\u65B9\\u6807\\u7B7E\\u5E93\\u6DFB\\u52A0\\u6807\\u7B7E\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 440,\n                      columnNumber: 25\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 438,\n                    columnNumber: 23\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 437,\n                  columnNumber: 21\n                }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"flex flex-wrap gap-3\",\n                  children: selectedTags.map((tag, index) => /*#__PURE__*/_jsxDEV(TagPill, {\n                    tag: tag,\n                    index: index,\n                    isDisabled: disabledTags.has(index),\n                    onDelete: () => deleteTag(index),\n                    onToggleDisabled: () => toggleDisabled(index),\n                    onAdjustWeight: delta => adjustWeight(index, delta),\n                    onAdjustBrackets: (bracketType, delta) => adjustBrackets(index, bracketType, delta),\n                    onCopy: () => copyTag(tag),\n                    onFavorite: () => favoriteTag(tag),\n                    onTranslate: translateSingleTag,\n                    translatedTags: translatedTags,\n                    hoveredTag: hoveredTag,\n                    setHoveredTag: setHoveredTag\n                  }, index, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 446,\n                    columnNumber: 25\n                  }, this))\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 444,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 435,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 427,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 409,\n            columnNumber: 13\n          }, this), promptHistory.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mt-6 p-4 bg-gray-50 rounded-lg\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-center gap-2 mb-2\",\n              children: [/*#__PURE__*/_jsxDEV(Clock, {\n                size: 16,\n                className: \"text-gray-600\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 473,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"text-sm font-medium text-gray-700\",\n                children: \"\\u6700\\u8FD1\\u4F7F\\u7528\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 474,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 472,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex flex-wrap gap-2\",\n              children: promptHistory.slice(0, 5).map((historyPrompt, index) => /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: () => setPrompt(historyPrompt),\n                className: \"px-3 py-1 text-xs bg-white border border-gray-200 rounded-full hover:bg-blue-50 hover:border-blue-300 transition-colors truncate max-w-xs\",\n                children: historyPrompt\n              }, index, false, {\n                fileName: _jsxFileName,\n                lineNumber: 478,\n                columnNumber: 21\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 476,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 471,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 374,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 373,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"grid grid-cols-1 lg:grid-cols-4 gap-6\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"lg:col-span-1\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"bg-white rounded-xl shadow-lg border border-gray-200 p-4 sticky top-6\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"mb-4\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"relative\",\n                children: [/*#__PURE__*/_jsxDEV(Search, {\n                  className: \"absolute left-3 top-3 text-gray-400\",\n                  size: 16\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 499,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"text\",\n                  value: searchQuery,\n                  onChange: e => setSearchQuery(e.target.value),\n                  placeholder: \"\\u641C\\u7D22\\u6807\\u7B7E...\",\n                  className: \"w-full pl-9 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 500,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 498,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 497,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"space-y-1\",\n              children: Object.entries(TAG_DATABASE).map(([categoryKey, category]) => /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: () => toggleCategory(categoryKey),\n                  className: `w-full flex items-center justify-between p-3 rounded-lg transition-colors ${selectedCategory === categoryKey && !selectedSubcategory ? 'bg-blue-50 text-blue-700 border border-blue-200' : 'hover:bg-gray-50'}`,\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"flex items-center gap-2\",\n                    children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                      className: \"text-lg\",\n                      children: category.icon\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 522,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                      className: \"font-medium\",\n                      children: category.name\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 523,\n                      columnNumber: 25\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 521,\n                    columnNumber: 23\n                  }, this), expandedCategories[categoryKey] ? /*#__PURE__*/_jsxDEV(ChevronDown, {\n                    size: 16\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 526,\n                    columnNumber: 25\n                  }, this) : /*#__PURE__*/_jsxDEV(ChevronRight, {\n                    size: 16\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 528,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 513,\n                  columnNumber: 21\n                }, this), expandedCategories[categoryKey] && /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"ml-4 mt-1 space-y-1\",\n                  children: Object.entries(category.subcategories).map(([subcategoryKey, subcategory]) => /*#__PURE__*/_jsxDEV(\"button\", {\n                    onClick: () => selectCategory(categoryKey, subcategoryKey),\n                    className: `w-full text-left p-2 rounded-lg text-sm transition-colors ${selectedCategory === categoryKey && selectedSubcategory === subcategoryKey ? 'bg-blue-50 text-blue-700' : 'hover:bg-gray-50 text-gray-600'}`,\n                    children: subcategory.name\n                  }, subcategoryKey, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 535,\n                    columnNumber: 27\n                  }, this))\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 533,\n                  columnNumber: 23\n                }, this)]\n              }, categoryKey, true, {\n                fileName: _jsxFileName,\n                lineNumber: 512,\n                columnNumber: 19\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 510,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 496,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 495,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"lg:col-span-3\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"bg-white rounded-xl shadow-lg border border-gray-200\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"p-6 border-b border-gray-200\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex items-center justify-between\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                    className: \"text-lg font-semibold text-gray-900\",\n                    children: searchQuery ? '搜索结果' : selectedSubcategory ? `${(_TAG_DATABASE$selecte = TAG_DATABASE[selectedCategory]) === null || _TAG_DATABASE$selecte === void 0 ? void 0 : _TAG_DATABASE$selecte.name} - ${(_TAG_DATABASE$selecte2 = TAG_DATABASE[selectedCategory]) === null || _TAG_DATABASE$selecte2 === void 0 ? void 0 : (_TAG_DATABASE$selecte3 = _TAG_DATABASE$selecte2.subcategories[selectedSubcategory]) === null || _TAG_DATABASE$selecte3 === void 0 ? void 0 : _TAG_DATABASE$selecte3.name}` : ((_TAG_DATABASE$selecte4 = TAG_DATABASE[selectedCategory]) === null || _TAG_DATABASE$selecte4 === void 0 ? void 0 : _TAG_DATABASE$selecte4.name) || '标签库'\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 561,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"text-sm text-gray-600 mt-1\",\n                    children: searchQuery ? `找到 ${currentTags.length} 个相关标签` : `共 ${currentTags.length} 个标签`\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 567,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 560,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"flex items-center gap-2\",\n                  children: /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"text-xs bg-blue-100 text-blue-600 px-2 py-1 rounded-full\",\n                    children: \"\\u70B9\\u51FB\\u6807\\u7B7E\\u6DFB\\u52A0\\u5230\\u63D0\\u793A\\u8BCD\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 573,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 572,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 559,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 558,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"p-6\",\n              children: currentTags.length === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"text-center py-12\",\n                children: [/*#__PURE__*/_jsxDEV(TagIcon, {\n                  className: \"mx-auto text-gray-400 mb-4\",\n                  size: 48\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 583,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"text-gray-500 mb-4\",\n                  children: searchQuery ? '未找到匹配的标签' : '该分类暂无标签'\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 584,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 582,\n                columnNumber: 19\n              }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"grid grid-cols-1 sm:grid-cols-2 xl:grid-cols-3 gap-3\",\n                children: currentTags.map((tag, index) => /*#__PURE__*/_jsxDEV(TagCard, {\n                  tag: tag,\n                  onAdd: () => addTagToPrompt(tag),\n                  onToggleFavorite: () => toggleFavorite(tag),\n                  isFavorited: favorites.some(fav => fav.en === tag.en)\n                }, `${tag.en}-${index}`, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 591,\n                  columnNumber: 23\n                }, this))\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 589,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 580,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 557,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 556,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 493,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 371,\n      columnNumber: 7\n    }, this), copyStatus && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: `fixed bottom-4 right-4 px-4 py-2 rounded-lg text-white text-sm transition-all duration-300 shadow-lg z-50 ${copyStatus === 'copied' ? 'bg-green-600' : copyStatus === 'translating' ? 'bg-blue-600' : copyStatus === 'translate-success' ? 'bg-green-600' : copyStatus === 'translate-error' ? 'bg-red-600' : copyStatus === 'no-untranslated' ? 'bg-yellow-600' : 'bg-red-600'}`,\n      children: copyStatus === 'copied' ? '✅ 已复制到剪贴板' : copyStatus === 'translating' ? '🔄 正在翻译中...' : copyStatus === 'translate-success' ? '✅ 翻译完成' : copyStatus === 'translate-error' ? '❌ 翻译失败' : copyStatus === 'no-untranslated' ? '💡 所有标签已翻译' : '❌ 复制失败'\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 609,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 357,\n    columnNumber: 5\n  }, this);\n};\n\n/**\r\n * 标签胶囊组件\r\n */\n_s(PromptLibraryPage, \"lOctKhaSShTsGaEbDw3pjWPr4/E=\");\n_c = PromptLibraryPage;\nconst TagPill = ({\n  tag,\n  index,\n  isDisabled,\n  onDelete,\n  onToggleDisabled,\n  onAdjustWeight,\n  onAdjustBrackets,\n  onCopy,\n  onFavorite,\n  onTranslate,\n  translatedTags,\n  hoveredTag,\n  setHoveredTag\n}) => {\n  _s2();\n  const [translation, setTranslation] = useState('');\n  const [isTranslating, setIsTranslating] = useState(false);\n\n  // 解析标签\n  const parseTag = tag => {\n    // 检测权重 (tag:1.2)\n    const weightMatch = tag.match(/^(.+?):([0-9.]+)$/);\n    if (weightMatch) {\n      return {\n        text: weightMatch[1],\n        weight: parseFloat(weightMatch[2]),\n        bracketType: 'none',\n        brackets: 0\n      };\n    }\n\n    // 检测括号类型和层级\n    let brackets = 0;\n    let text = tag;\n    let bracketType = 'none';\n\n    // 检测圆括号 ()\n    if (text.startsWith('(') && text.endsWith(')')) {\n      bracketType = 'round';\n      while (text.startsWith('(') && text.endsWith(')')) {\n        brackets++;\n        text = text.slice(1, -1);\n      }\n    }\n    // 检测花括号 {}\n    else if (text.startsWith('{') && text.endsWith('}')) {\n      bracketType = 'curly';\n      while (text.startsWith('{') && text.endsWith('}')) {\n        brackets++;\n        text = text.slice(1, -1);\n      }\n    }\n    // 检测方括号 []\n    else if (text.startsWith('[') && text.endsWith(']')) {\n      bracketType = 'square';\n      while (text.startsWith('[') && text.endsWith(']')) {\n        brackets++;\n        text = text.slice(1, -1);\n      }\n    }\n    return {\n      text,\n      weight: 1.0,\n      bracketType,\n      brackets\n    };\n  };\n  const parsed = parseTag(tag);\n  const isHovered = hoveredTag === index;\n\n  // 加载翻译\n  useEffect(() => {\n    if (parsed.text && !translatedTags[parsed.text]) {\n      setIsTranslating(true);\n      onTranslate(tag).then(result => {\n        setTranslation(result);\n        setIsTranslating(false);\n      });\n    } else if (translatedTags[parsed.text]) {\n      setTranslation(translatedTags[parsed.text]);\n    }\n  }, [tag, translatedTags, onTranslate, parsed.text]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"relative group\",\n    onMouseEnter: () => setHoveredTag(index),\n    onMouseLeave: e => {\n      // 扩大判定范围：检查鼠标是否真的离开了整个区域\n      const rect = e.currentTarget.getBoundingClientRect();\n      const x = e.clientX;\n      const y = e.clientY;\n\n      // 扩大检测范围20像素\n      const margin = 20;\n      if (x < rect.left - margin || x > rect.right + margin || y < rect.top - margin || y > rect.bottom + 120) {\n        // 底部多留120px给编辑栏\n        setHoveredTag(null);\n      }\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: `inline-flex items-center gap-2 px-3 py-2 rounded-full text-sm font-medium transition-all duration-200 cursor-pointer ${isDisabled ? 'bg-gray-200 text-gray-500 line-through opacity-60' : 'bg-blue-100 text-blue-800 hover:bg-blue-200'}`,\n      children: [/*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"break-all\",\n        children: tag\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 738,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: onDelete,\n        className: \"flex-shrink-0 w-4 h-4 rounded-full bg-blue-600 text-white flex items-center justify-center hover:bg-red-500 transition-colors\",\n        children: /*#__PURE__*/_jsxDEV(X, {\n          size: 10\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 743,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 739,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 731,\n      columnNumber: 7\n    }, this), translation && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"text-xs text-gray-500 mt-1 px-2\",\n      children: isTranslating ? '翻译中...' : translation\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 749,\n      columnNumber: 9\n    }, this), isHovered && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"absolute top-full left-0 mt-2 bg-white border border-gray-300 rounded-lg shadow-lg p-3 z-20 min-w-max\",\n      onMouseEnter: () => setHoveredTag(index),\n      onMouseLeave: () => setHoveredTag(null),\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex flex-col gap-3\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center gap-1\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"text-xs text-gray-600 min-w-8\",\n            children: \"\\u6743\\u91CD:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 764,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => onAdjustWeight(-0.1),\n            className: \"w-6 h-6 rounded bg-gray-100 hover:bg-gray-200 flex items-center justify-center\",\n            children: /*#__PURE__*/_jsxDEV(ChevronLeft, {\n              size: 12\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 769,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 765,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"text-sm font-mono min-w-8 text-center\",\n            children: parsed.weight.toFixed(1)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 771,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => onAdjustWeight(0.1),\n            className: \"w-6 h-6 rounded bg-gray-100 hover:bg-gray-200 flex items-center justify-center\",\n            children: /*#__PURE__*/_jsxDEV(ChevronRightIcon, {\n              size: 12\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 778,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 774,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 763,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center gap-2\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"text-xs text-gray-600 min-w-8\",\n            children: \"\\u62EC\\u53F7:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 784,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center gap-1\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => onAdjustBrackets('round', -1),\n              className: `w-5 h-5 rounded text-xs flex items-center justify-center ${parsed.bracketType === 'round' ? 'bg-orange-100 hover:bg-orange-200 text-orange-600' : 'bg-gray-100 hover:bg-gray-200 text-gray-400'}`,\n              disabled: parsed.bracketType !== 'none' && parsed.bracketType !== 'round',\n              children: /*#__PURE__*/_jsxDEV(Minus, {\n                size: 8\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 797,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 788,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: `px-2 py-1 rounded text-xs ${parsed.bracketType === 'round' ? 'bg-orange-100 text-orange-700' : 'bg-gray-100 text-gray-500'}`,\n              children: [\"() \", parsed.bracketType === 'round' ? parsed.brackets : 0]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 799,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => onAdjustBrackets('round', 1),\n              className: `w-5 h-5 rounded text-xs flex items-center justify-center ${(parsed.bracketType === 'none' || parsed.bracketType === 'round') && parsed.brackets < 5 ? 'bg-orange-100 hover:bg-orange-200 text-orange-600' : 'bg-gray-100 text-gray-400'}`,\n              disabled: parsed.bracketType !== 'none' && parsed.bracketType !== 'round',\n              children: /*#__PURE__*/_jsxDEV(Plus, {\n                size: 8\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 813,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 804,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 787,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center gap-1\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => onAdjustBrackets('curly', -1),\n              className: `w-5 h-5 rounded text-xs flex items-center justify-center ${parsed.bracketType === 'curly' ? 'bg-yellow-100 hover:bg-yellow-200 text-yellow-600' : 'bg-gray-100 hover:bg-gray-200 text-gray-400'}`,\n              disabled: parsed.bracketType !== 'none' && parsed.bracketType !== 'curly',\n              children: /*#__PURE__*/_jsxDEV(Minus, {\n                size: 8\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 828,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 819,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: `px-2 py-1 rounded text-xs ${parsed.bracketType === 'curly' ? 'bg-yellow-100 text-yellow-700' : 'bg-gray-100 text-gray-500'}`,\n              children: [`{}`, \" \", parsed.bracketType === 'curly' ? parsed.brackets : 0]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 830,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => onAdjustBrackets('curly', 1),\n              className: `w-5 h-5 rounded text-xs flex items-center justify-center ${(parsed.bracketType === 'none' || parsed.bracketType === 'curly') && parsed.brackets < 5 ? 'bg-yellow-100 hover:bg-yellow-200 text-yellow-600' : 'bg-gray-100 text-gray-400'}`,\n              disabled: parsed.bracketType !== 'none' && parsed.bracketType !== 'curly',\n              children: /*#__PURE__*/_jsxDEV(Plus, {\n                size: 8\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 844,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 835,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 818,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center gap-1\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => onAdjustBrackets('square', -1),\n              className: `w-5 h-5 rounded text-xs flex items-center justify-center ${parsed.bracketType === 'square' ? 'bg-blue-100 hover:bg-blue-200 text-blue-600' : 'bg-gray-100 hover:bg-gray-200 text-gray-400'}`,\n              disabled: parsed.bracketType !== 'none' && parsed.bracketType !== 'square',\n              children: /*#__PURE__*/_jsxDEV(Minus, {\n                size: 8\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 859,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 850,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: `px-2 py-1 rounded text-xs ${parsed.bracketType === 'square' ? 'bg-blue-100 text-blue-700' : 'bg-gray-100 text-gray-500'}`,\n              children: [\"[] \", parsed.bracketType === 'square' ? parsed.brackets : 0]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 861,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => onAdjustBrackets('square', 1),\n              className: `w-5 h-5 rounded text-xs flex items-center justify-center ${(parsed.bracketType === 'none' || parsed.bracketType === 'square') && parsed.brackets < 5 ? 'bg-blue-100 hover:bg-blue-200 text-blue-600' : 'bg-gray-100 text-gray-400'}`,\n              disabled: parsed.bracketType !== 'none' && parsed.bracketType !== 'square',\n              children: /*#__PURE__*/_jsxDEV(Plus, {\n                size: 8\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 875,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 866,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 849,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 783,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center gap-1\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: onCopy,\n            className: \"w-6 h-6 rounded bg-green-100 hover:bg-green-200 text-green-600 flex items-center justify-center\",\n            title: \"\\u590D\\u5236\",\n            children: /*#__PURE__*/_jsxDEV(Copy, {\n              size: 12\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 887,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 882,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: onFavorite,\n            className: \"w-6 h-6 rounded bg-red-100 hover:bg-red-200 text-red-600 flex items-center justify-center\",\n            title: \"\\u6536\\u85CF\",\n            children: /*#__PURE__*/_jsxDEV(Heart, {\n              size: 12\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 894,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 889,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: onToggleDisabled,\n            className: `w-6 h-6 rounded flex items-center justify-center ${isDisabled ? 'bg-blue-100 hover:bg-blue-200 text-blue-600' : 'bg-gray-100 hover:bg-gray-200 text-gray-600'}`,\n            title: isDisabled ? \"启用\" : \"禁用\",\n            children: isDisabled ? /*#__PURE__*/_jsxDEV(Eye, {\n              size: 12\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 905,\n              columnNumber: 31\n            }, this) : /*#__PURE__*/_jsxDEV(EyeOff, {\n              size: 12\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 905,\n              columnNumber: 51\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 896,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 881,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 761,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 756,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 713,\n    columnNumber: 5\n  }, this);\n};\n\n/**\r\n * 标签卡片组件\r\n */\n_s2(TagPill, \"fgX1dRwEzZm8/VG2ryQUcBNj6bo=\");\n_c2 = TagPill;\nconst TagCard = ({\n  tag,\n  onAdd,\n  onToggleFavorite,\n  isFavorited\n}) => /*#__PURE__*/_jsxDEV(\"div\", {\n  className: \"group bg-gradient-to-r from-gray-50 to-white border border-gray-200 rounded-lg p-4 hover:shadow-md hover:border-blue-300 transition-all duration-200 cursor-pointer\",\n  children: /*#__PURE__*/_jsxDEV(\"div\", {\n    onClick: onAdd,\n    className: \"flex-1\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex items-start justify-between mb-2\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex-1\",\n        children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n          className: \"font-medium text-gray-900 text-sm mb-1 group-hover:text-blue-700 transition-colors\",\n          children: tag.en\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 923,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-xs text-blue-600 mb-2\",\n          children: tag.cn\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 926,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 922,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: e => {\n          e.stopPropagation();\n          onToggleFavorite();\n        },\n        className: `p-1 rounded-full transition-colors ${isFavorited ? 'text-red-500 hover:bg-red-50' : 'text-gray-400 hover:bg-gray-100 hover:text-red-500'}`,\n        children: /*#__PURE__*/_jsxDEV(Heart, {\n          size: 14,\n          fill: isFavorited ? 'currentColor' : 'none'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 941,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 930,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 921,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex items-center justify-between\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center gap-2\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center gap-1\",\n          children: [/*#__PURE__*/_jsxDEV(TrendingUp, {\n            size: 12,\n            className: \"text-green-600\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 948,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"text-xs text-green-600 font-medium\",\n            children: [tag.frequency, \"%\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 949,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 947,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"w-12 bg-gray-200 rounded-full h-1\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"bg-green-500 h-1 rounded-full transition-all\",\n            style: {\n              width: `${tag.frequency}%`\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 952,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 951,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 946,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: onAdd,\n        className: \"opacity-0 group-hover:opacity-100 transition-opacity text-xs bg-blue-600 text-white px-2 py-1 rounded-full hover:bg-blue-700\",\n        children: [/*#__PURE__*/_jsxDEV(Plus, {\n          size: 10,\n          className: \"inline mr-1\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 963,\n          columnNumber: 11\n        }, this), \"\\u6DFB\\u52A0\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 959,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 945,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 920,\n    columnNumber: 5\n  }, this)\n}, void 0, false, {\n  fileName: _jsxFileName,\n  lineNumber: 919,\n  columnNumber: 3\n}, this);\n_c3 = TagCard;\nexport default PromptLibraryPage;\nvar _c, _c2, _c3;\n$RefreshReg$(_c, \"PromptLibraryPage\");\n$RefreshReg$(_c2, \"TagPill\");\n$RefreshReg$(_c3, \"TagCard\");","map":{"version":3,"names":["React","useState","useRef","useEffect","Plus","Search","Copy","Heart","X","Languages","ChevronDown","ChevronRight","Tag","TagIcon","Sparkles","Bookmark","Clock","TrendingUp","Edit3","Minus","Trash2","Star","Weight","Zap","ChevronLeft","ChevronRightIcon","EyeOff","Eye","copyToClipboard","translateText","translateTag","TAG_DATABASE","searchTags","getPopularTags","jsxDEV","_jsxDEV","PromptLibraryPage","_s","_TAG_DATABASE$selecte","_TAG_DATABASE$selecte2","_TAG_DATABASE$selecte3","_TAG_DATABASE$selecte4","prompt","setPrompt","promptHistory","setPromptHistory","selectedTags","setSelectedTags","disabledTags","setDisabledTags","Set","translatedTags","setTranslatedTags","hoveredTag","setHoveredTag","selectedCategory","setSelectedCategory","selectedSubcategory","setSelectedSubcategory","expandedCategories","setExpandedCategories","favorites","searchQuery","setSearchQuery","searchResults","setSearchResults","setFavorites","copyStatus","setCopyStatus","textareaRef","trim","results","slice","tagsFromPrompt","split","map","tag","filter","updatePrompt","tags","enabledTags","_","index","has","newPrompt","join","includes","prev","handlePromptChange","value","addTagToPrompt","newTags","en","current","focus","setSelectionRange","length","deleteTag","i","newDisabled","toggleDisabled","delete","add","parseTag","weightMatch","match","text","weight","parseFloat","bracketType","brackets","startsWith","endsWith","buildTag","result","toFixed","adjustWeight","delta","parsed","newWeight","Math","max","min","newTag","adjustBrackets","newBrackets","newBracketType","translateAllTags","untranslatedTags","setTimeout","translated","Promise","resolve","error","console","translateSingleTag","pureText","copyTag","success","favoriteTag","tagObj","cn","frequency","toggleFavorite","handleCopy","isAlreadyFavorited","some","fav","toggleCategory","categoryKey","selectCategory","subcategoryKey","getCurrentTags","category","subcategory","subcategories","allTags","Object","values","forEach","push","personal","currentTags","className","children","size","fileName","_jsxFileName","lineNumber","columnNumber","onClick","ref","onChange","e","target","placeholder","TagPill","isDisabled","onDelete","onToggleDisabled","onAdjustWeight","onAdjustBrackets","onCopy","onFavorite","onTranslate","historyPrompt","type","entries","icon","name","TagCard","onAdd","onToggleFavorite","isFavorited","_c","_s2","translation","setTranslation","isTranslating","setIsTranslating","isHovered","then","onMouseEnter","onMouseLeave","rect","currentTarget","getBoundingClientRect","x","clientX","y","clientY","margin","left","right","top","bottom","disabled","title","_c2","stopPropagation","fill","style","width","_c3","$RefreshReg$"],"sources":["C:/Users/wjx19/Documents/GitHub/I-Prompt/src/pages/PromptLibraryPage.jsx"],"sourcesContent":["import React, { useState, useRef, useEffect } from 'react';\r\nimport { \r\n  Plus, Search, Copy, Heart, X, Languages, \r\n  ChevronDown, ChevronRight, Tag as TagIcon,\r\n  Sparkles, Bookmark, Clock, TrendingUp, Edit3,\r\n  Minus, Trash2, Star, Weight, Zap, ChevronLeft, ChevronRight as ChevronRightIcon,\r\n  EyeOff, Eye\r\n} from 'lucide-react';\r\nimport { copyToClipboard } from '../utils/clipboard';\r\nimport { translateText, translateTag } from '../services/aliTranslationService';\r\nimport { TAG_DATABASE, searchTags, getPopularTags } from '../constants/tagDatabase';\r\n\r\nconst PromptLibraryPage = () => {\r\n  // 提示词编辑状态\r\n  const [prompt, setPrompt] = useState('');\r\n  const [promptHistory, setPromptHistory] = useState([]);\r\n  \r\n  // 提示词编辑器状态\r\n  const [selectedTags, setSelectedTags] = useState([]);\r\n  const [disabledTags, setDisabledTags] = useState(new Set());\r\n  const [translatedTags, setTranslatedTags] = useState({});\r\n  const [hoveredTag, setHoveredTag] = useState(null);\r\n  \r\n  // 标签库状态\r\n  const [selectedCategory, setSelectedCategory] = useState('favorites');\r\n  const [selectedSubcategory, setSelectedSubcategory] = useState(null);\r\n  const [expandedCategories, setExpandedCategories] = useState({ favorites: true });\r\n  const [searchQuery, setSearchQuery] = useState('');\r\n  const [searchResults, setSearchResults] = useState([]);\r\n  \r\n  // UI状态\r\n  const [favorites, setFavorites] = useState([]);\r\n  const [copyStatus, setCopyStatus] = useState('');\r\n  \r\n  const textareaRef = useRef(null);\r\n\r\n  // 实时搜索建议\r\n  useEffect(() => {\r\n    if (searchQuery.trim()) {\r\n      const results = searchTags(searchQuery).slice(0, 20);\r\n      setSearchResults(results);\r\n    } else {\r\n      setSearchResults([]);\r\n    }\r\n  }, [searchQuery]);\r\n\r\n  // 同步提示词和选中标签\r\n  useEffect(() => {\r\n    const tagsFromPrompt = prompt.split(',').map(tag => tag.trim()).filter(tag => tag);\r\n    setSelectedTags(tagsFromPrompt);\r\n  }, [prompt]);\r\n\r\n  // 更新英文提示词（排除禁用的标签）\r\n  const updatePrompt = (tags) => {\r\n    const enabledTags = tags.filter((_, index) => !disabledTags.has(index));\r\n    const newPrompt = enabledTags.join(', ');\r\n    setPrompt(newPrompt);\r\n    \r\n    // 添加到历史记录\r\n    if (newPrompt.trim() && !promptHistory.includes(newPrompt.trim())) {\r\n      setPromptHistory(prev => [newPrompt.trim(), ...prev.slice(0, 9)]);\r\n    }\r\n  };\r\n\r\n  // 处理提示词变化\r\n  const handlePromptChange = (value) => {\r\n    setPrompt(value);\r\n    \r\n    // 添加到历史记录\r\n    if (value.trim() && !promptHistory.includes(value.trim())) {\r\n      setPromptHistory(prev => [value.trim(), ...prev.slice(0, 9)]);\r\n    }\r\n  };\r\n\r\n  // 添加标签到提示词\r\n  const addTagToPrompt = (tag) => {\r\n    const newTags = [...selectedTags, tag.en];\r\n    setSelectedTags(newTags);\r\n    updatePrompt(newTags);\r\n    \r\n    // 聚焦到文本框末尾\r\n    if (textareaRef.current) {\r\n      textareaRef.current.focus();\r\n      textareaRef.current.setSelectionRange(prompt.length, prompt.length);\r\n    }\r\n  };\r\n\r\n  // 删除标签\r\n  const deleteTag = (index) => {\r\n    const newTags = selectedTags.filter((_, i) => i !== index);\r\n    const newDisabled = new Set([...disabledTags].map(i => i > index ? i - 1 : i).filter(i => i !== index));\r\n    setSelectedTags(newTags);\r\n    setDisabledTags(newDisabled);\r\n    updatePrompt(newTags);\r\n  };\r\n\r\n  // 切换禁用状态\r\n  const toggleDisabled = (index) => {\r\n    const newDisabled = new Set(disabledTags);\r\n    if (newDisabled.has(index)) {\r\n      newDisabled.delete(index);\r\n    } else {\r\n      newDisabled.add(index);\r\n    }\r\n    setDisabledTags(newDisabled);\r\n    updatePrompt(selectedTags);\r\n  };\r\n\r\n  // 解析标签，提取权重和括号信息\r\n  const parseTag = (tag) => {\r\n    // 检测权重 (tag:1.2)\r\n    const weightMatch = tag.match(/^(.+?):([0-9.]+)$/);\r\n    if (weightMatch) {\r\n      return {\r\n        text: weightMatch[1],\r\n        weight: parseFloat(weightMatch[2]),\r\n        bracketType: 'none',\r\n        brackets: 0\r\n      };\r\n    }\r\n    \r\n    // 检测括号类型和层级\r\n    let brackets = 0;\r\n    let text = tag;\r\n    let bracketType = 'none';\r\n    \r\n    // 检测圆括号 ()\r\n    if (text.startsWith('(') && text.endsWith(')')) {\r\n      bracketType = 'round';\r\n      while (text.startsWith('(') && text.endsWith(')')) {\r\n        brackets++;\r\n        text = text.slice(1, -1);\r\n      }\r\n    }\r\n    // 检测花括号 {}\r\n    else if (text.startsWith('{') && text.endsWith('}')) {\r\n      bracketType = 'curly';\r\n      while (text.startsWith('{') && text.endsWith('}')) {\r\n        brackets++;\r\n        text = text.slice(1, -1);\r\n      }\r\n    }\r\n    // 检测方括号 []\r\n    else if (text.startsWith('[') && text.endsWith(']')) {\r\n      bracketType = 'square';\r\n      while (text.startsWith('[') && text.endsWith(']')) {\r\n        brackets++;\r\n        text = text.slice(1, -1);\r\n      }\r\n    }\r\n    \r\n    return { text, weight: 1.0, bracketType, brackets };\r\n  };\r\n\r\n  // 构建标签字符串\r\n  const buildTag = (text, weight, bracketType, brackets) => {\r\n    let result = text;\r\n    \r\n    // 添加权重\r\n    if (weight !== 1.0) {\r\n      result = `${text}:${weight.toFixed(1)}`;\r\n    }\r\n    \r\n    // 添加括号\r\n    if (bracketType === 'round') {\r\n      for (let i = 0; i < brackets; i++) {\r\n        result = `(${result})`;\r\n      }\r\n    } else if (bracketType === 'curly') {\r\n      for (let i = 0; i < brackets; i++) {\r\n        result = `{${result}}`;\r\n      }\r\n    } else if (bracketType === 'square') {\r\n      for (let i = 0; i < brackets; i++) {\r\n        result = `[${result}]`;\r\n      }\r\n    }\r\n    \r\n    return result;\r\n  };\r\n\r\n  // 调整权重\r\n  const adjustWeight = (index, delta) => {\r\n    const tag = selectedTags[index];\r\n    const parsed = parseTag(tag);\r\n    const newWeight = Math.max(0.1, Math.min(2.0, parsed.weight + delta));\r\n    const newTag = buildTag(parsed.text, newWeight, parsed.bracketType, parsed.brackets);\r\n    \r\n    const newTags = [...selectedTags];\r\n    newTags[index] = newTag;\r\n    setSelectedTags(newTags);\r\n    updatePrompt(newTags);\r\n  };\r\n\r\n  // 调整括号\r\n  const adjustBrackets = (index, bracketType, delta) => {\r\n    const tag = selectedTags[index];\r\n    const parsed = parseTag(tag);\r\n    \r\n    // 如果要增加括号且当前没有括号，或者类型相同，才允许调整\r\n    if (delta > 0 && parsed.bracketType !== 'none' && parsed.bracketType !== bracketType) {\r\n      return; // 不允许混用不同类型的括号\r\n    }\r\n    \r\n    const newBrackets = Math.max(0, Math.min(5, parsed.brackets + delta));\r\n    const newBracketType = newBrackets === 0 ? 'none' : bracketType;\r\n    const newTag = buildTag(parsed.text, parsed.weight, newBracketType, newBrackets);\r\n    \r\n    const newTags = [...selectedTags];\r\n    newTags[index] = newTag;\r\n    setSelectedTags(newTags);\r\n    updatePrompt(newTags);\r\n  };\r\n\r\n  // 一键翻译所有未翻译的标签\r\n  const translateAllTags = async () => {\r\n    const untranslatedTags = selectedTags.filter(tag => {\r\n      const parsed = parseTag(tag);\r\n      return !translatedTags[parsed.text];\r\n    });\r\n\r\n    if (untranslatedTags.length === 0) {\r\n      setCopyStatus('no-untranslated');\r\n      setTimeout(() => setCopyStatus(''), 2000);\r\n      return;\r\n    }\r\n\r\n    setCopyStatus('translating');\r\n    \r\n    try {\r\n      for (const tag of untranslatedTags) {\r\n        const parsed = parseTag(tag);\r\n        if (!translatedTags[parsed.text]) {\r\n          const translated = await translateTag(parsed.text);\r\n          setTranslatedTags(prev => ({ ...prev, [parsed.text]: translated }));\r\n          // 添加小延迟避免请求过快\r\n          await new Promise(resolve => setTimeout(resolve, 100));\r\n        }\r\n      }\r\n      setCopyStatus('translate-success');\r\n    } catch (error) {\r\n      console.error('批量翻译失败:', error);\r\n      setCopyStatus('translate-error');\r\n    }\r\n    \r\n    setTimeout(() => setCopyStatus(''), 2000);\r\n  };\r\n\r\n  // 翻译单个标签\r\n  const translateSingleTag = async (tag) => {\r\n    // 提取纯文本进行翻译\r\n    const parsed = parseTag(tag);\r\n    const pureText = parsed.text;\r\n    \r\n    if (translatedTags[pureText]) {\r\n      return translatedTags[pureText];\r\n    }\r\n    \r\n    try {\r\n      const translated = await translateTag(pureText);\r\n      setTranslatedTags(prev => ({ ...prev, [pureText]: translated }));\r\n      return translated;\r\n    } catch (error) {\r\n      console.error('翻译失败:', error);\r\n      return pureText;\r\n    }\r\n  };\r\n\r\n  // 复制标签\r\n  const copyTag = async (tag) => {\r\n    const success = await copyToClipboard(tag);\r\n    setCopyStatus(success ? 'copied' : 'error');\r\n    setTimeout(() => setCopyStatus(''), 2000);\r\n  };\r\n\r\n  // 收藏标签\r\n  const favoriteTag = (tag) => {\r\n    const parsed = parseTag(tag);\r\n    const tagObj = { en: parsed.text, cn: translatedTags[parsed.text] || parsed.text, frequency: 80 };\r\n    toggleFavorite(tagObj);\r\n  };\r\n\r\n  // 复制功能\r\n  const handleCopy = async (text) => {\r\n    const success = await copyToClipboard(text || prompt);\r\n    setCopyStatus(success ? 'copied' : 'error');\r\n    setTimeout(() => setCopyStatus(''), 2000);\r\n  };\r\n\r\n  // 收藏功能\r\n  const toggleFavorite = (tag) => {\r\n    setFavorites(prev => {\r\n      const isAlreadyFavorited = prev.some(fav => fav.en === tag.en);\r\n      if (isAlreadyFavorited) {\r\n        return prev.filter(fav => fav.en !== tag.en);\r\n      } else {\r\n        return [...prev, tag];\r\n      }\r\n    });\r\n  };\r\n\r\n  // 分类展开/收起\r\n  const toggleCategory = (categoryKey) => {\r\n    setExpandedCategories(prev => ({\r\n      ...prev,\r\n      [categoryKey]: !prev[categoryKey]\r\n    }));\r\n  };\r\n\r\n  // 选择分类\r\n  const selectCategory = (categoryKey, subcategoryKey = null) => {\r\n    setSelectedCategory(categoryKey);\r\n    setSelectedSubcategory(subcategoryKey);\r\n  };\r\n\r\n  // 获取当前显示的标签\r\n  const getCurrentTags = () => {\r\n    if (searchQuery.trim()) {\r\n      return searchResults;\r\n    }\r\n    \r\n    if (selectedCategory === 'favorites') {\r\n      if (selectedSubcategory === 'personal') {\r\n        return favorites;\r\n      } else {\r\n        // 显示热门标签\r\n        return getPopularTags(20);\r\n      }\r\n    }\r\n    \r\n    const category = TAG_DATABASE[selectedCategory];\r\n    if (!category) return [];\r\n    \r\n    if (selectedSubcategory) {\r\n      const subcategory = category.subcategories[selectedSubcategory];\r\n      return subcategory ? subcategory.tags : [];\r\n    }\r\n    \r\n    // 返回该分类下所有标签\r\n    const allTags = [];\r\n    Object.values(category.subcategories).forEach(subcategory => {\r\n      allTags.push(...subcategory.tags);\r\n    });\r\n    return allTags;\r\n  };\r\n\r\n  // 动态更新TAG_DATABASE中的收藏标签\r\n  useEffect(() => {\r\n    if (TAG_DATABASE.favorites && TAG_DATABASE.favorites.subcategories.personal) {\r\n      TAG_DATABASE.favorites.subcategories.personal.tags = favorites;\r\n    }\r\n  }, [favorites]);\r\n\r\n  const currentTags = getCurrentTags();\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gradient-to-br from-blue-50 via-white to-purple-50\">\r\n      {/* 页面标题 */}\r\n      <div className=\"bg-white/80 backdrop-blur-sm border-b border-gray-200 px-6 py-4\">\r\n        <div className=\"max-w-7xl mx-auto\">\r\n          <h1 className=\"text-2xl font-bold text-gray-900 mb-2 flex items-center\">\r\n            <Sparkles className=\"text-blue-600 mr-3\" size={28} />\r\n            智能提示词库 3.0\r\n          </h1>\r\n          <p className=\"text-gray-600\">\r\n            专业的提示词编辑和管理工具 • 支持实时翻译和智能分类 • 让AI绘画创作更高效\r\n          </p>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"max-w-7xl mx-auto p-6\">\r\n        {/* 提示词编辑区域 */}\r\n        <div className=\"bg-white rounded-xl shadow-lg border border-gray-200 mb-6\">\r\n          <div className=\"p-6\">\r\n            <div className=\"flex items-center justify-between mb-4\">\r\n              <h2 className=\"text-lg font-semibold text-gray-900 flex items-center\">\r\n                <TagIcon className=\"text-blue-600 mr-2\" size={20} />\r\n                提示词编辑器\r\n              </h2>\r\n              <div className=\"flex items-center gap-2\">\r\n                <button\r\n                  onClick={translateAllTags}\r\n                  className=\"flex items-center gap-2 px-3 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors text-sm\"\r\n                >\r\n                  <Languages size={14} />\r\n                  一键翻译\r\n                </button>\r\n                <button\r\n                  onClick={() => handleCopy()}\r\n                  className=\"flex items-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors\"\r\n                >\r\n                  <Copy size={16} />\r\n                  复制\r\n                </button>\r\n                <button\r\n                  onClick={() => {\r\n                    setPrompt('');\r\n                    setSelectedTags([]);\r\n                    setDisabledTags(new Set());\r\n                  }}\r\n                  className=\"p-2 text-gray-500 hover:bg-gray-100 rounded-lg transition-colors\"\r\n                >\r\n                  <X size={16} />\r\n                </button>\r\n              </div>\r\n            </div>\r\n\r\n            {/* 双栏布局 */}\r\n            <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-8\">\r\n              {/* 左侧：英文提示词输入区 */}\r\n              <div className=\"space-y-3\">\r\n                <label className=\"text-sm font-medium text-gray-700\">英文提示词</label>\r\n                <textarea\r\n                  ref={textareaRef}\r\n                  value={prompt}\r\n                  onChange={(e) => handlePromptChange(e.target.value)}\r\n                  placeholder=\"输入或点击右侧标签添加提示词...\"\r\n                  className=\"w-full h-40 p-4 border border-gray-300 rounded-lg resize-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all font-mono text-sm overflow-y-auto\"\r\n                />\r\n                <div className=\"flex items-center justify-between text-xs text-gray-500\">\r\n                  <span>字符数: {prompt.length}</span>\r\n                  <span>标签数: {selectedTags.filter((_, i) => !disabledTags.has(i)).length}/{selectedTags.length}</span>\r\n                </div>\r\n              </div>\r\n\r\n              {/* 右侧：提示词编辑区 */}\r\n              <div className=\"space-y-3\">\r\n                <label className=\"text-sm font-medium text-gray-700 flex items-center\">\r\n                  <Edit3 size={16} className=\"mr-1\" />\r\n                  提示词编辑区\r\n                  <span className=\"text-xs bg-blue-100 text-blue-600 px-2 py-1 rounded-full ml-2\">\r\n                    悬停编辑 • 权重调节 • 括号控制\r\n                  </span>\r\n                </label>\r\n                <div className=\"border border-gray-300 rounded-lg p-4 bg-blue-50/20 min-h-40 max-h-80 overflow-y-auto\">\r\n                  {selectedTags.length === 0 ? (\r\n                    <div className=\"flex items-center justify-center h-32 text-gray-500\">\r\n                      <div className=\"text-center\">\r\n                        <TagIcon size={32} className=\"mx-auto mb-2 opacity-50\" />\r\n                        <p className=\"text-sm\">点击下方标签库添加标签</p>\r\n                      </div>\r\n                    </div>\r\n                  ) : (\r\n                    <div className=\"flex flex-wrap gap-3\">\r\n                      {selectedTags.map((tag, index) => (\r\n                        <TagPill\r\n                          key={index}\r\n                          tag={tag}\r\n                          index={index}\r\n                          isDisabled={disabledTags.has(index)}\r\n                          onDelete={() => deleteTag(index)}\r\n                          onToggleDisabled={() => toggleDisabled(index)}\r\n                          onAdjustWeight={(delta) => adjustWeight(index, delta)}\r\n                          onAdjustBrackets={(bracketType, delta) => adjustBrackets(index, bracketType, delta)}\r\n                          onCopy={() => copyTag(tag)}\r\n                          onFavorite={() => favoriteTag(tag)}\r\n                          onTranslate={translateSingleTag}\r\n                          translatedTags={translatedTags}\r\n                          hoveredTag={hoveredTag}\r\n                          setHoveredTag={setHoveredTag}\r\n                        />\r\n                      ))}\r\n                    </div>\r\n                  )}\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            {/* 快速历史记录 */}\r\n            {promptHistory.length > 0 && (\r\n              <div className=\"mt-6 p-4 bg-gray-50 rounded-lg\">\r\n                <div className=\"flex items-center gap-2 mb-2\">\r\n                  <Clock size={16} className=\"text-gray-600\" />\r\n                  <span className=\"text-sm font-medium text-gray-700\">最近使用</span>\r\n                </div>\r\n                <div className=\"flex flex-wrap gap-2\">\r\n                  {promptHistory.slice(0, 5).map((historyPrompt, index) => (\r\n                    <button\r\n                      key={index}\r\n                      onClick={() => setPrompt(historyPrompt)}\r\n                      className=\"px-3 py-1 text-xs bg-white border border-gray-200 rounded-full hover:bg-blue-50 hover:border-blue-300 transition-colors truncate max-w-xs\"\r\n                    >\r\n                      {historyPrompt}\r\n                    </button>\r\n                  ))}\r\n                </div>\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n\r\n        {/* 主要内容区域 */}\r\n        <div className=\"grid grid-cols-1 lg:grid-cols-4 gap-6\">\r\n          {/* 左侧分类导航 */}\r\n          <div className=\"lg:col-span-1\">\r\n            <div className=\"bg-white rounded-xl shadow-lg border border-gray-200 p-4 sticky top-6\">\r\n              <div className=\"mb-4\">\r\n                <div className=\"relative\">\r\n                  <Search className=\"absolute left-3 top-3 text-gray-400\" size={16} />\r\n                  <input\r\n                    type=\"text\"\r\n                    value={searchQuery}\r\n                    onChange={(e) => setSearchQuery(e.target.value)}\r\n                    placeholder=\"搜索标签...\"\r\n                    className=\"w-full pl-9 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm\"\r\n                  />\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"space-y-1\">\r\n                {Object.entries(TAG_DATABASE).map(([categoryKey, category]) => (\r\n                  <div key={categoryKey}>\r\n                    <button\r\n                      onClick={() => toggleCategory(categoryKey)}\r\n                      className={`w-full flex items-center justify-between p-3 rounded-lg transition-colors ${\r\n                        selectedCategory === categoryKey && !selectedSubcategory\r\n                          ? 'bg-blue-50 text-blue-700 border border-blue-200'\r\n                          : 'hover:bg-gray-50'\r\n                      }`}\r\n                    >\r\n                      <div className=\"flex items-center gap-2\">\r\n                        <span className=\"text-lg\">{category.icon}</span>\r\n                        <span className=\"font-medium\">{category.name}</span>\r\n                      </div>\r\n                      {expandedCategories[categoryKey] ? (\r\n                        <ChevronDown size={16} />\r\n                      ) : (\r\n                        <ChevronRight size={16} />\r\n                      )}\r\n                    </button>\r\n\r\n                    {expandedCategories[categoryKey] && (\r\n                      <div className=\"ml-4 mt-1 space-y-1\">\r\n                        {Object.entries(category.subcategories).map(([subcategoryKey, subcategory]) => (\r\n                          <button\r\n                            key={subcategoryKey}\r\n                            onClick={() => selectCategory(categoryKey, subcategoryKey)}\r\n                            className={`w-full text-left p-2 rounded-lg text-sm transition-colors ${\r\n                              selectedCategory === categoryKey && selectedSubcategory === subcategoryKey\r\n                                ? 'bg-blue-50 text-blue-700'\r\n                                : 'hover:bg-gray-50 text-gray-600'\r\n                            }`}\r\n                          >\r\n                            {subcategory.name}\r\n                          </button>\r\n                        ))}\r\n                      </div>\r\n                    )}\r\n                  </div>\r\n                ))}\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          {/* 右侧标签展示区 */}\r\n          <div className=\"lg:col-span-3\">\r\n            <div className=\"bg-white rounded-xl shadow-lg border border-gray-200\">\r\n              <div className=\"p-6 border-b border-gray-200\">\r\n                <div className=\"flex items-center justify-between\">\r\n                  <div>\r\n                    <h3 className=\"text-lg font-semibold text-gray-900\">\r\n                      {searchQuery ? '搜索结果' : \r\n                       selectedSubcategory ? \r\n                       `${TAG_DATABASE[selectedCategory]?.name} - ${TAG_DATABASE[selectedCategory]?.subcategories[selectedSubcategory]?.name}` :\r\n                       TAG_DATABASE[selectedCategory]?.name || '标签库'}\r\n                    </h3>\r\n                    <p className=\"text-sm text-gray-600 mt-1\">\r\n                      {searchQuery ? `找到 ${currentTags.length} 个相关标签` : \r\n                       `共 ${currentTags.length} 个标签`}\r\n                    </p>\r\n                  </div>\r\n                  <div className=\"flex items-center gap-2\">\r\n                    <span className=\"text-xs bg-blue-100 text-blue-600 px-2 py-1 rounded-full\">\r\n                      点击标签添加到提示词\r\n                    </span>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"p-6\">\r\n                {currentTags.length === 0 ? (\r\n                  <div className=\"text-center py-12\">\r\n                    <TagIcon className=\"mx-auto text-gray-400 mb-4\" size={48} />\r\n                    <p className=\"text-gray-500 mb-4\">\r\n                      {searchQuery ? '未找到匹配的标签' : '该分类暂无标签'}\r\n                    </p>\r\n                  </div>\r\n                ) : (\r\n                  <div className=\"grid grid-cols-1 sm:grid-cols-2 xl:grid-cols-3 gap-3\">\r\n                    {currentTags.map((tag, index) => (\r\n                      <TagCard\r\n                        key={`${tag.en}-${index}`}\r\n                        tag={tag}\r\n                        onAdd={() => addTagToPrompt(tag)}\r\n                        onToggleFavorite={() => toggleFavorite(tag)}\r\n                        isFavorited={favorites.some(fav => fav.en === tag.en)}\r\n                      />\r\n                    ))}\r\n                  </div>\r\n                )}\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* 复制状态提示 */}\r\n      {copyStatus && (\r\n        <div className={`fixed bottom-4 right-4 px-4 py-2 rounded-lg text-white text-sm transition-all duration-300 shadow-lg z-50 ${\r\n          copyStatus === 'copied' ? 'bg-green-600' : \r\n          copyStatus === 'translating' ? 'bg-blue-600' :\r\n          copyStatus === 'translate-success' ? 'bg-green-600' :\r\n          copyStatus === 'translate-error' ? 'bg-red-600' :\r\n          copyStatus === 'no-untranslated' ? 'bg-yellow-600' :\r\n          'bg-red-600'\r\n        }`}>\r\n          {copyStatus === 'copied' ? '✅ 已复制到剪贴板' : \r\n           copyStatus === 'translating' ? '🔄 正在翻译中...' :\r\n           copyStatus === 'translate-success' ? '✅ 翻译完成' :\r\n           copyStatus === 'translate-error' ? '❌ 翻译失败' :\r\n           copyStatus === 'no-untranslated' ? '💡 所有标签已翻译' :\r\n           '❌ 复制失败'}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\n/**\r\n * 标签胶囊组件\r\n */\r\nconst TagPill = ({ \r\n  tag, \r\n  index,\r\n  isDisabled,\r\n  onDelete, \r\n  onToggleDisabled,\r\n  onAdjustWeight,\r\n  onAdjustBrackets,\r\n  onCopy,\r\n  onFavorite,\r\n  onTranslate,\r\n  translatedTags,\r\n  hoveredTag,\r\n  setHoveredTag\r\n}) => {\r\n  const [translation, setTranslation] = useState('');\r\n  const [isTranslating, setIsTranslating] = useState(false);\r\n\r\n  // 解析标签\r\n  const parseTag = (tag) => {\r\n    // 检测权重 (tag:1.2)\r\n    const weightMatch = tag.match(/^(.+?):([0-9.]+)$/);\r\n    if (weightMatch) {\r\n      return {\r\n        text: weightMatch[1],\r\n        weight: parseFloat(weightMatch[2]),\r\n        bracketType: 'none',\r\n        brackets: 0\r\n      };\r\n    }\r\n    \r\n    // 检测括号类型和层级\r\n    let brackets = 0;\r\n    let text = tag;\r\n    let bracketType = 'none';\r\n    \r\n    // 检测圆括号 ()\r\n    if (text.startsWith('(') && text.endsWith(')')) {\r\n      bracketType = 'round';\r\n      while (text.startsWith('(') && text.endsWith(')')) {\r\n        brackets++;\r\n        text = text.slice(1, -1);\r\n      }\r\n    }\r\n    // 检测花括号 {}\r\n    else if (text.startsWith('{') && text.endsWith('}')) {\r\n      bracketType = 'curly';\r\n      while (text.startsWith('{') && text.endsWith('}')) {\r\n        brackets++;\r\n        text = text.slice(1, -1);\r\n      }\r\n    }\r\n    // 检测方括号 []\r\n    else if (text.startsWith('[') && text.endsWith(']')) {\r\n      bracketType = 'square';\r\n      while (text.startsWith('[') && text.endsWith(']')) {\r\n        brackets++;\r\n        text = text.slice(1, -1);\r\n      }\r\n    }\r\n    \r\n    return { text, weight: 1.0, bracketType, brackets };\r\n  };\r\n\r\n  const parsed = parseTag(tag);\r\n  const isHovered = hoveredTag === index;\r\n\r\n  // 加载翻译\r\n  useEffect(() => {\r\n    if (parsed.text && !translatedTags[parsed.text]) {\r\n      setIsTranslating(true);\r\n      onTranslate(tag).then(result => {\r\n        setTranslation(result);\r\n        setIsTranslating(false);\r\n      });\r\n    } else if (translatedTags[parsed.text]) {\r\n      setTranslation(translatedTags[parsed.text]);\r\n    }\r\n  }, [tag, translatedTags, onTranslate, parsed.text]);\r\n\r\n  return (\r\n    <div \r\n      className=\"relative group\"\r\n      onMouseEnter={() => setHoveredTag(index)}\r\n      onMouseLeave={(e) => {\r\n        // 扩大判定范围：检查鼠标是否真的离开了整个区域\r\n        const rect = e.currentTarget.getBoundingClientRect();\r\n        const x = e.clientX;\r\n        const y = e.clientY;\r\n        \r\n        // 扩大检测范围20像素\r\n        const margin = 20;\r\n        if (x < rect.left - margin || x > rect.right + margin || \r\n            y < rect.top - margin || y > rect.bottom + 120) { // 底部多留120px给编辑栏\r\n          setHoveredTag(null);\r\n        }\r\n      }}\r\n    >\r\n      {/* 主标签胶囊 */}\r\n      <div\r\n        className={`inline-flex items-center gap-2 px-3 py-2 rounded-full text-sm font-medium transition-all duration-200 cursor-pointer ${\r\n          isDisabled \r\n            ? 'bg-gray-200 text-gray-500 line-through opacity-60' \r\n            : 'bg-blue-100 text-blue-800 hover:bg-blue-200'\r\n        }`}\r\n      >\r\n        <span className=\"break-all\">{tag}</span>\r\n        <button\r\n          onClick={onDelete}\r\n          className=\"flex-shrink-0 w-4 h-4 rounded-full bg-blue-600 text-white flex items-center justify-center hover:bg-red-500 transition-colors\"\r\n        >\r\n          <X size={10} />\r\n        </button>\r\n      </div>\r\n      \r\n      {/* 中文翻译 */}\r\n      {translation && (\r\n        <div className=\"text-xs text-gray-500 mt-1 px-2\">\r\n          {isTranslating ? '翻译中...' : translation}\r\n        </div>\r\n      )}\r\n\r\n      {/* 悬停编辑栏 */}\r\n      {isHovered && (\r\n        <div \r\n          className=\"absolute top-full left-0 mt-2 bg-white border border-gray-300 rounded-lg shadow-lg p-3 z-20 min-w-max\"\r\n          onMouseEnter={() => setHoveredTag(index)}\r\n          onMouseLeave={() => setHoveredTag(null)}\r\n        >\r\n          <div className=\"flex flex-col gap-3\">\r\n            {/* 第一行：权重调整 */}\r\n            <div className=\"flex items-center gap-1\">\r\n              <span className=\"text-xs text-gray-600 min-w-8\">权重:</span>\r\n              <button\r\n                onClick={() => onAdjustWeight(-0.1)}\r\n                className=\"w-6 h-6 rounded bg-gray-100 hover:bg-gray-200 flex items-center justify-center\"\r\n              >\r\n                <ChevronLeft size={12} />\r\n              </button>\r\n              <span className=\"text-sm font-mono min-w-8 text-center\">\r\n                {parsed.weight.toFixed(1)}\r\n              </span>\r\n              <button\r\n                onClick={() => onAdjustWeight(0.1)}\r\n                className=\"w-6 h-6 rounded bg-gray-100 hover:bg-gray-200 flex items-center justify-center\"\r\n              >\r\n                <ChevronRightIcon size={12} />\r\n              </button>\r\n            </div>\r\n\r\n            {/* 第二行：括号类型控制 */}\r\n            <div className=\"flex items-center gap-2\">\r\n              <span className=\"text-xs text-gray-600 min-w-8\">括号:</span>\r\n              \r\n              {/* 圆括号 () - 1.1倍权重 */}\r\n              <div className=\"flex items-center gap-1\">\r\n                <button\r\n                  onClick={() => onAdjustBrackets('round', -1)}\r\n                  className={`w-5 h-5 rounded text-xs flex items-center justify-center ${\r\n                    parsed.bracketType === 'round' \r\n                      ? 'bg-orange-100 hover:bg-orange-200 text-orange-600' \r\n                      : 'bg-gray-100 hover:bg-gray-200 text-gray-400'\r\n                  }`}\r\n                  disabled={parsed.bracketType !== 'none' && parsed.bracketType !== 'round'}\r\n                >\r\n                  <Minus size={8} />\r\n                </button>\r\n                <div className={`px-2 py-1 rounded text-xs ${\r\n                  parsed.bracketType === 'round' ? 'bg-orange-100 text-orange-700' : 'bg-gray-100 text-gray-500'\r\n                }`}>\r\n                  () {parsed.bracketType === 'round' ? parsed.brackets : 0}\r\n                </div>\r\n                <button\r\n                  onClick={() => onAdjustBrackets('round', 1)}\r\n                  className={`w-5 h-5 rounded text-xs flex items-center justify-center ${\r\n                    (parsed.bracketType === 'none' || parsed.bracketType === 'round') && parsed.brackets < 5\r\n                      ? 'bg-orange-100 hover:bg-orange-200 text-orange-600' \r\n                      : 'bg-gray-100 text-gray-400'\r\n                  }`}\r\n                  disabled={parsed.bracketType !== 'none' && parsed.bracketType !== 'round'}\r\n                >\r\n                  <Plus size={8} />\r\n                </button>\r\n              </div>\r\n\r\n              {/* 花括号 {} - 1.05倍权重 */}\r\n              <div className=\"flex items-center gap-1\">\r\n                <button\r\n                  onClick={() => onAdjustBrackets('curly', -1)}\r\n                  className={`w-5 h-5 rounded text-xs flex items-center justify-center ${\r\n                    parsed.bracketType === 'curly' \r\n                      ? 'bg-yellow-100 hover:bg-yellow-200 text-yellow-600' \r\n                      : 'bg-gray-100 hover:bg-gray-200 text-gray-400'\r\n                  }`}\r\n                  disabled={parsed.bracketType !== 'none' && parsed.bracketType !== 'curly'}\r\n                >\r\n                  <Minus size={8} />\r\n                </button>\r\n                <div className={`px-2 py-1 rounded text-xs ${\r\n                  parsed.bracketType === 'curly' ? 'bg-yellow-100 text-yellow-700' : 'bg-gray-100 text-gray-500'\r\n                }`}>\r\n                  {`{}`} {parsed.bracketType === 'curly' ? parsed.brackets : 0}\r\n                </div>\r\n                <button\r\n                  onClick={() => onAdjustBrackets('curly', 1)}\r\n                  className={`w-5 h-5 rounded text-xs flex items-center justify-center ${\r\n                    (parsed.bracketType === 'none' || parsed.bracketType === 'curly') && parsed.brackets < 5\r\n                      ? 'bg-yellow-100 hover:bg-yellow-200 text-yellow-600' \r\n                      : 'bg-gray-100 text-gray-400'\r\n                  }`}\r\n                  disabled={parsed.bracketType !== 'none' && parsed.bracketType !== 'curly'}\r\n                >\r\n                  <Plus size={8} />\r\n                </button>\r\n              </div>\r\n\r\n              {/* 方括号 [] - 0.9倍权重 */}\r\n              <div className=\"flex items-center gap-1\">\r\n                <button\r\n                  onClick={() => onAdjustBrackets('square', -1)}\r\n                  className={`w-5 h-5 rounded text-xs flex items-center justify-center ${\r\n                    parsed.bracketType === 'square' \r\n                      ? 'bg-blue-100 hover:bg-blue-200 text-blue-600' \r\n                      : 'bg-gray-100 hover:bg-gray-200 text-gray-400'\r\n                  }`}\r\n                  disabled={parsed.bracketType !== 'none' && parsed.bracketType !== 'square'}\r\n                >\r\n                  <Minus size={8} />\r\n                </button>\r\n                <div className={`px-2 py-1 rounded text-xs ${\r\n                  parsed.bracketType === 'square' ? 'bg-blue-100 text-blue-700' : 'bg-gray-100 text-gray-500'\r\n                }`}>\r\n                  [] {parsed.bracketType === 'square' ? parsed.brackets : 0}\r\n                </div>\r\n                <button\r\n                  onClick={() => onAdjustBrackets('square', 1)}\r\n                  className={`w-5 h-5 rounded text-xs flex items-center justify-center ${\r\n                    (parsed.bracketType === 'none' || parsed.bracketType === 'square') && parsed.brackets < 5\r\n                      ? 'bg-blue-100 hover:bg-blue-200 text-blue-600' \r\n                      : 'bg-gray-100 text-gray-400'\r\n                  }`}\r\n                  disabled={parsed.bracketType !== 'none' && parsed.bracketType !== 'square'}\r\n                >\r\n                  <Plus size={8} />\r\n                </button>\r\n              </div>\r\n            </div>\r\n\r\n            {/* 第三行：功能按钮 */}\r\n            <div className=\"flex items-center gap-1\">\r\n              <button\r\n                onClick={onCopy}\r\n                className=\"w-6 h-6 rounded bg-green-100 hover:bg-green-200 text-green-600 flex items-center justify-center\"\r\n                title=\"复制\"\r\n              >\r\n                <Copy size={12} />\r\n              </button>\r\n              <button\r\n                onClick={onFavorite}\r\n                className=\"w-6 h-6 rounded bg-red-100 hover:bg-red-200 text-red-600 flex items-center justify-center\"\r\n                title=\"收藏\"\r\n              >\r\n                <Heart size={12} />\r\n              </button>\r\n              <button\r\n                onClick={onToggleDisabled}\r\n                className={`w-6 h-6 rounded flex items-center justify-center ${\r\n                  isDisabled \r\n                    ? 'bg-blue-100 hover:bg-blue-200 text-blue-600' \r\n                    : 'bg-gray-100 hover:bg-gray-200 text-gray-600'\r\n                }`}\r\n                title={isDisabled ? \"启用\" : \"禁用\"}\r\n              >\r\n                {isDisabled ? <Eye size={12} /> : <EyeOff size={12} />}\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\n/**\r\n * 标签卡片组件\r\n */\r\nconst TagCard = ({ tag, onAdd, onToggleFavorite, isFavorited }) => (\r\n  <div className=\"group bg-gradient-to-r from-gray-50 to-white border border-gray-200 rounded-lg p-4 hover:shadow-md hover:border-blue-300 transition-all duration-200 cursor-pointer\">\r\n    <div onClick={onAdd} className=\"flex-1\">\r\n      <div className=\"flex items-start justify-between mb-2\">\r\n        <div className=\"flex-1\">\r\n          <h4 className=\"font-medium text-gray-900 text-sm mb-1 group-hover:text-blue-700 transition-colors\">\r\n            {tag.en}\r\n          </h4>\r\n          <p className=\"text-xs text-blue-600 mb-2\">\r\n            {tag.cn}\r\n          </p>\r\n        </div>\r\n        <button\r\n          onClick={(e) => {\r\n            e.stopPropagation();\r\n            onToggleFavorite();\r\n          }}\r\n          className={`p-1 rounded-full transition-colors ${\r\n            isFavorited \r\n              ? 'text-red-500 hover:bg-red-50' \r\n              : 'text-gray-400 hover:bg-gray-100 hover:text-red-500'\r\n          }`}\r\n        >\r\n          <Heart size={14} fill={isFavorited ? 'currentColor' : 'none'} />\r\n        </button>\r\n      </div>\r\n      \r\n      <div className=\"flex items-center justify-between\">\r\n        <div className=\"flex items-center gap-2\">\r\n          <div className=\"flex items-center gap-1\">\r\n            <TrendingUp size={12} className=\"text-green-600\" />\r\n            <span className=\"text-xs text-green-600 font-medium\">{tag.frequency}%</span>\r\n          </div>\r\n          <div className=\"w-12 bg-gray-200 rounded-full h-1\">\r\n            <div \r\n              className=\"bg-green-500 h-1 rounded-full transition-all\" \r\n              style={{ width: `${tag.frequency}%` }}\r\n            />\r\n          </div>\r\n        </div>\r\n        \r\n        <button\r\n          onClick={onAdd}\r\n          className=\"opacity-0 group-hover:opacity-100 transition-opacity text-xs bg-blue-600 text-white px-2 py-1 rounded-full hover:bg-blue-700\"\r\n        >\r\n          <Plus size={10} className=\"inline mr-1\" />\r\n          添加\r\n        </button>\r\n      </div>\r\n    </div>\r\n  </div>\r\n);\r\n\r\nexport default PromptLibraryPage; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}