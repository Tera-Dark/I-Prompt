{"ast":null,"code":"import React,{useState,useCallback}from'react';import{Upload,Image,Copy,CheckCircle,AlertCircle,FileImage,Download,Info}from'lucide-react';import{validateImageFile}from'../utils/validation';import{copyToClipboard}from'../utils/clipboard';import{imageMetadataExtractor}from'../utils/imageMetadataExtractor';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const ImageExtractorPage=()=>{const[uploadedImage,setUploadedImage]=useState(null);const[extractedData,setExtractedData]=useState(null);const[isExtracting,setIsExtracting]=useState(false);const[dragActive,setDragActive]=useState(false);const[copyStatus,setCopyStatus]=useState('');const[errorMessage,setErrorMessage]=useState('');// 处理文件上传\nconst handleFileUpload=useCallback(async file=>{setErrorMessage('');// 验证文件\nconst validation=validateImageFile(file);if(!validation.isValid){setErrorMessage(validation.errors.join(', '));return;}// 创建预览URL\nconst imageUrl=URL.createObjectURL(file);setUploadedImage({file,url:imageUrl,name:file.name,size:file.size});// 开始提取\nawait extractImageInfo(file);},[]);// 真正的图像信息提取\nconst extractImageInfo=async file=>{setIsExtracting(true);setExtractedData(null);setErrorMessage('');try{// 使用真正的元数据提取器\nconst result=await imageMetadataExtractor.extractMetadata(file);// 检查是否成功提取到数据\nif(result.success&&result.standardizedData){const{positive,negative,parameters}=result.standardizedData;// 转换为旧格式以兼容现有UI\nconst extractedMetadata={positivePrompts:positive||'',negativePrompts:negative||'',parameters:parameters||{},generationTool:result.standardizedData.generationTool||'Unknown',extractionMethods:result.extractionMethods||[],rawData:result.extractedData||{}};setExtractedData(extractedMetadata);}else{// 如果没有提取到任何有用信息，显示提示\nsetErrorMessage('未能从图像中提取到AI生成信息。这可能是因为：\\n1. 图像不是AI生成的\\n2. 图像元数据已被清除\\n3. 使用了不支持的AI工具格式');}}catch(error){console.error('图像信息提取失败:',error);setErrorMessage(error.message||'图像信息提取失败，请确保上传的是包含元数据的AI生成图像');}finally{setIsExtracting(false);}};// 拖拽处理\nconst handleDrag=useCallback(e=>{e.preventDefault();e.stopPropagation();if(e.type===\"dragenter\"||e.type===\"dragover\"){setDragActive(true);}else if(e.type===\"dragleave\"){setDragActive(false);}},[]);const handleDrop=useCallback(e=>{e.preventDefault();e.stopPropagation();setDragActive(false);if(e.dataTransfer.files&&e.dataTransfer.files[0]){handleFileUpload(e.dataTransfer.files[0]);}},[handleFileUpload]);const handleCopy=async text=>{const success=await copyToClipboard(text);setCopyStatus(success?'copied':'error');setTimeout(()=>setCopyStatus(''),2000);};const handleFileInput=e=>{if(e.target.files&&e.target.files[0]){handleFileUpload(e.target.files[0]);}};const resetExtractor=()=>{setUploadedImage(null);setExtractedData(null);setErrorMessage('');setCopyStatus('');};return/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-center mb-8\",children:[/*#__PURE__*/_jsxs(\"h1\",{className:\"text-3xl font-bold text-gray-900 mb-2 flex items-center justify-center\",children:[/*#__PURE__*/_jsx(Image,{className:\"mr-3 text-green-600\",size:32}),\"\\u56FE\\u50CF\\u4FE1\\u606F\\u63D0\\u53D6\\u5668\"]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 max-w-2xl mx-auto\",children:\"\\u4E0A\\u4F20AI\\u751F\\u6210\\u7684\\u56FE\\u7247\\uFF0C\\u81EA\\u52A8\\u63D0\\u53D6\\u5176\\u4E2D\\u7684\\u63D0\\u793A\\u8BCD\\u3001\\u53C2\\u6570\\u548C\\u5143\\u6570\\u636E\\u4FE1\\u606F\\uFF0C\\u652F\\u6301\\u4E3B\\u6D41AI\\u7ED8\\u753B\\u5DE5\\u5177\\u683C\\u5F0F\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white/80 backdrop-blur-sm rounded-xl shadow-lg border border-green-100/50 p-6\",children:[!uploadedImage?/*#__PURE__*/_jsxs(\"div\",{className:\"border-2 border-dashed rounded-xl p-12 text-center transition-all \".concat(dragActive?'border-green-500 bg-green-50':'border-gray-300 hover:border-green-400 hover:bg-green-50/50'),onDragEnter:handleDrag,onDragLeave:handleDrag,onDragOver:handleDrag,onDrop:handleDrop,children:[/*#__PURE__*/_jsx(Upload,{className:\"mx-auto text-gray-400 mb-4\",size:48}),/*#__PURE__*/_jsx(\"p\",{className:\"text-lg font-medium text-gray-700 mb-2\",children:\"\\u62D6\\u62FD\\u56FE\\u7247\\u5230\\u6B64\\u5904\\uFF0C\\u6216\\u70B9\\u51FB\\u9009\\u62E9\\u6587\\u4EF6\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-500 mb-6\",children:\"\\u652F\\u6301 JPG\\u3001PNG\\u3001WEBP \\u683C\\u5F0F\\uFF0C\\u6700\\u5927 10MB\"}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",accept:\"image/*\",onChange:handleFileInput,className:\"hidden\",id:\"file-upload\"}),/*#__PURE__*/_jsxs(\"label\",{htmlFor:\"file-upload\",className:\"inline-flex items-center px-6 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors cursor-pointer\",children:[/*#__PURE__*/_jsx(FileImage,{className:\"mr-2\",size:20}),\"\\u9009\\u62E9\\u56FE\\u7247\\u6587\\u4EF6\"]})]}):/*#__PURE__*/_jsx(ImagePreview,{image:uploadedImage,onReset:resetExtractor,onReExtract:()=>extractImageInfo(uploadedImage.file)}),errorMessage&&/*#__PURE__*/_jsx(\"div\",{className:\"mt-4 p-3 bg-red-50 border border-red-200 rounded-lg\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-start\",children:[/*#__PURE__*/_jsx(AlertCircle,{className:\"mr-2 text-red-600 flex-shrink-0 mt-0.5\",size:16}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-red-800\",children:errorMessage})]})})]}),isExtracting&&/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white/80 backdrop-blur-sm rounded-xl p-6 border border-blue-200\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-center space-x-3 mb-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-lg font-medium text-gray-700\",children:\"\\u6B63\\u5728\\u5206\\u6790\\u56FE\\u50CF\\u5143\\u6570\\u636E...\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-center space-y-2\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600\",children:\"\\u6B63\\u5728\\u8BFB\\u53D6EXIF\\u4FE1\\u606F\\u548CPNG\\u6587\\u672C\\u5757\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-gray-500\",children:\"\\u652F\\u6301ComfyUI\\u3001AUTOMATIC1111\\u3001NovelAI\\u7B49\\u683C\\u5F0F\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-4 w-full bg-gray-200 rounded-full h-2\",children:/*#__PURE__*/_jsx(\"div\",{className:\"bg-blue-600 h-2 rounded-full animate-pulse\",style:{width:'85%'}})})]}),extractedData&&/*#__PURE__*/_jsx(ExtractedDataDisplay,{data:extractedData,onCopy:handleCopy,copyStatus:copyStatus}),copyStatus&&/*#__PURE__*/_jsx(\"div\",{className:\"fixed bottom-4 right-4 px-4 py-2 rounded-lg text-white text-sm transition-all duration-300 shadow-lg \".concat(copyStatus==='copied'?'bg-green-600':'bg-red-600'),children:copyStatus==='copied'?'✅ 已复制到剪贴板':'❌ 复制失败'})]});};/**\r\n * 图片预览组件\r\n */const ImagePreview=_ref=>{let{image,onReset,onReExtract}=_ref;return/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-medium text-gray-900\",children:\"\\u4E0A\\u4F20\\u7684\\u56FE\\u7247\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-2\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:onReExtract,className:\"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors\",children:\"\\u91CD\\u65B0\\u63D0\\u53D6\"}),/*#__PURE__*/_jsx(\"button\",{onClick:onReset,className:\"px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors\",children:\"\\u91CD\\u65B0\\u4E0A\\u4F20\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-6\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"space-y-3\",children:/*#__PURE__*/_jsx(\"img\",{src:image.url,alt:\"\\u4E0A\\u4F20\\u7684\\u56FE\\u7247\",className:\"w-full h-64 object-cover rounded-lg border border-gray-200\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"space-y-3\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gray-50 p-4 rounded-lg\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"font-medium text-gray-900 mb-2\",children:\"\\u6587\\u4EF6\\u4FE1\\u606F\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-1 text-sm text-gray-600\",children:[/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:\"\\u6587\\u4EF6\\u540D\\uFF1A\"}),image.name]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:\"\\u6587\\u4EF6\\u5927\\u5C0F\\uFF1A\"}),(image.size/1024/1024).toFixed(2),\" MB\"]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:\"\\u6587\\u4EF6\\u7C7B\\u578B\\uFF1A\"}),image.file.type]})]})]})})]})]});};/**\r\n * 提取数据显示组件\r\n */const ExtractedDataDisplay=_ref2=>{let{data,onCopy,copyStatus}=_ref2;// 获取提取来源的友好显示名称\nconst getSourceDisplayName=source=>{const sourceMap={'comfyui':'ComfyUI','automatic1111':'AUTOMATIC1111','novelai':'NovelAI','sd-webui':'Stable Diffusion WebUI','exif_usercomment':'EXIF UserComment','unknown':'未知格式'};return sourceMap[source]||source||'未知格式';};// 安全获取元数据，如果不存在则创建默认值\nconst metadata=data.rawData||{};const extractionSource=data.generationTool||'unknown';return/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"h2\",{className:\"text-xl font-bold text-gray-900 flex items-center\",children:[/*#__PURE__*/_jsx(CheckCircle,{className:\"mr-2 text-green-600\",size:24}),\"\\u63D0\\u53D6\\u5B8C\\u6210\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2\",children:[/*#__PURE__*/_jsx(Info,{className:\"text-blue-600\",size:16}),/*#__PURE__*/_jsxs(\"span\",{className:\"text-sm text-gray-600\",children:[\"\\u6765\\u6E90: \",/*#__PURE__*/_jsx(\"span\",{className:\"font-medium text-blue-600\",children:getSourceDisplayName(extractionSource)})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 lg:grid-cols-2 gap-6\",children:[/*#__PURE__*/_jsx(DataCard,{title:\"\\u6B63\\u5411\\u63D0\\u793A\\u8BCD (Positive Prompts)\",content:data.positivePrompts||'',onCopy:onCopy,copyStatus:copyStatus,bgColor:\"bg-green-50\",borderColor:\"border-green-200\"}),/*#__PURE__*/_jsx(DataCard,{title:\"\\u8D1F\\u5411\\u63D0\\u793A\\u8BCD (Negative Prompts)\",content:data.negativePrompts||'',onCopy:onCopy,copyStatus:copyStatus,bgColor:\"bg-red-50\",borderColor:\"border-red-200\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white/80 backdrop-blur-sm rounded-xl p-6 border border-gray-200\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center mb-4\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-medium text-gray-900\",children:\"\\u751F\\u6210\\u53C2\\u6570\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>onCopy(JSON.stringify(data.parameters||{},null,2)),className:\"p-2 bg-blue-100 text-blue-600 rounded-lg hover:bg-blue-200 transition-colors\",title:\"\\u590D\\u5236\\u53C2\\u6570\",children:/*#__PURE__*/_jsx(Copy,{size:16})})]}),data.parameters&&Object.keys(data.parameters).length>0?/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-2 md:grid-cols-4 gap-4\",children:Object.entries(data.parameters).map(_ref3=>{let[key,value]=_ref3;// 安全地渲染值，如果是对象则转换为字符串\nconst displayValue=typeof value==='object'&&value!==null?'[复杂对象]':String(value);return/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gray-50 p-3 rounded-lg\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-gray-500 uppercase tracking-wide\",children:key}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm font-medium text-gray-900 break-words\",children:displayValue})]},key);})}):/*#__PURE__*/_jsx(\"div\",{className:\"text-center py-8 text-gray-500\",children:/*#__PURE__*/_jsx(\"p\",{children:\"\\u672A\\u627E\\u5230\\u751F\\u6210\\u53C2\\u6570\"})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white/80 backdrop-blur-sm rounded-xl p-6 border border-gray-200\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-medium text-gray-900 mb-4\",children:\"\\u5143\\u6570\\u636E\\u4FE1\\u606F\"}),metadata&&Object.keys(metadata).length>0?/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-4\",children:Object.entries(metadata).map(_ref4=>{let[key,value]=_ref4;// 安全地渲染值\nconst displayValue=typeof value==='object'&&value!==null?JSON.stringify(value):String(value||'');return/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center py-2 border-b border-gray-100\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"text-sm text-gray-600\",children:[key,\":\"]}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sm font-medium text-gray-900 break-words max-w-xs\",children:displayValue})]},key);})}):/*#__PURE__*/_jsx(\"div\",{className:\"text-center py-8 text-gray-500\",children:/*#__PURE__*/_jsx(\"p\",{children:\"\\u672A\\u627E\\u5230\\u5143\\u6570\\u636E\\u4FE1\\u606F\"})})]}),data.extractionMethods&&data.extractionMethods.length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white/80 backdrop-blur-sm rounded-xl p-6 border border-gray-200\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-medium text-gray-900 mb-4\",children:\"\\u63D0\\u53D6\\u65B9\\u6CD5\"}),/*#__PURE__*/_jsx(\"div\",{className:\"flex flex-wrap gap-2\",children:data.extractionMethods.map((method,index)=>/*#__PURE__*/_jsxs(\"span\",{className:\"px-3 py-1 bg-blue-100 text-blue-800 rounded-full text-sm\",children:[method.method,\" (\",method.confidence,\")\"]},index))})]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-center\",children:/*#__PURE__*/_jsxs(\"button\",{onClick:()=>onCopy(\"\\u6B63\\u5411\\u63D0\\u793A\\u8BCD:\\n\".concat(data.positivePrompts||'',\"\\n\\n\\u8D1F\\u5411\\u63D0\\u793A\\u8BCD:\\n\").concat(data.negativePrompts||'',\"\\n\\n\\u53C2\\u6570:\\n\").concat(JSON.stringify(data.parameters||{},null,2))),className:\"px-6 py-3 bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-lg hover:shadow-lg transition-all\",children:[/*#__PURE__*/_jsx(Download,{className:\"inline mr-2\",size:20}),\"\\u4E00\\u952E\\u590D\\u5236\\u6240\\u6709\\u4FE1\\u606F\"]})})]});};/**\r\n * 数据卡片组件\r\n */const DataCard=_ref5=>{let{title,content,onCopy,copyStatus,bgColor,borderColor}=_ref5;return/*#__PURE__*/_jsxs(\"div\",{className:\"\".concat(bgColor,\" \").concat(borderColor,\" border rounded-xl p-6\"),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center mb-3\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"font-medium text-gray-900\",children:title}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>onCopy(content),className:\"p-2 bg-white/80 rounded-lg hover:bg-white transition-colors\",title:\"\\u590D\\u5236\\u5185\\u5BB9\",children:copyStatus==='copied'?/*#__PURE__*/_jsx(CheckCircle,{size:16,className:\"text-green-600\"}):/*#__PURE__*/_jsx(Copy,{size:16,className:\"text-gray-600\"})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-white/80 p-4 rounded-lg\",children:/*#__PURE__*/_jsx(\"p\",{className:\"text-sm font-mono text-gray-700 leading-relaxed\",children:content||'暂无内容'})})]});};export default ImageExtractorPage;","map":{"version":3,"names":["React","useState","useCallback","Upload","Image","Copy","CheckCircle","AlertCircle","FileImage","Download","Info","validateImageFile","copyToClipboard","imageMetadataExtractor","jsx","_jsx","jsxs","_jsxs","ImageExtractorPage","uploadedImage","setUploadedImage","extractedData","setExtractedData","isExtracting","setIsExtracting","dragActive","setDragActive","copyStatus","setCopyStatus","errorMessage","setErrorMessage","handleFileUpload","file","validation","isValid","errors","join","imageUrl","URL","createObjectURL","url","name","size","extractImageInfo","result","extractMetadata","success","standardizedData","positive","negative","parameters","extractedMetadata","positivePrompts","negativePrompts","generationTool","extractionMethods","rawData","error","console","message","handleDrag","e","preventDefault","stopPropagation","type","handleDrop","dataTransfer","files","handleCopy","text","setTimeout","handleFileInput","target","resetExtractor","className","children","concat","onDragEnter","onDragLeave","onDragOver","onDrop","accept","onChange","id","htmlFor","ImagePreview","image","onReset","onReExtract","style","width","ExtractedDataDisplay","data","onCopy","_ref","onClick","src","alt","toFixed","_ref2","getSourceDisplayName","source","sourceMap","metadata","extractionSource","DataCard","title","content","bgColor","borderColor","JSON","stringify","Object","keys","length","entries","map","_ref3","key","value","displayValue","String","_ref4","method","index","confidence","_ref5"],"sources":["C:/Users/wjx19/Documents/GitHub/I-Prompt/src/pages/ImageExtractorPage.jsx"],"sourcesContent":["import React, { useState, useCallback } from 'react';\r\nimport { Upload, Image, Copy, CheckCircle, AlertCircle, FileImage, Download, Info } from 'lucide-react';\r\nimport { validateImageFile } from '../utils/validation';\r\nimport { copyToClipboard } from '../utils/clipboard';\r\nimport { imageMetadataExtractor } from '../utils/imageMetadataExtractor';\r\n\r\nconst ImageExtractorPage = () => {\r\n  const [uploadedImage, setUploadedImage] = useState(null);\r\n  const [extractedData, setExtractedData] = useState(null);\r\n  const [isExtracting, setIsExtracting] = useState(false);\r\n  const [dragActive, setDragActive] = useState(false);\r\n  const [copyStatus, setCopyStatus] = useState('');\r\n  const [errorMessage, setErrorMessage] = useState('');\r\n\r\n  // 处理文件上传\r\n  const handleFileUpload = useCallback(async (file) => {\r\n    setErrorMessage('');\r\n    \r\n    // 验证文件\r\n    const validation = validateImageFile(file);\r\n    if (!validation.isValid) {\r\n      setErrorMessage(validation.errors.join(', '));\r\n      return;\r\n    }\r\n\r\n    // 创建预览URL\r\n    const imageUrl = URL.createObjectURL(file);\r\n    setUploadedImage({\r\n      file,\r\n      url: imageUrl,\r\n      name: file.name,\r\n      size: file.size\r\n    });\r\n\r\n    // 开始提取\r\n    await extractImageInfo(file);\r\n  }, []);\r\n\r\n  // 真正的图像信息提取\r\n  const extractImageInfo = async (file) => {\r\n    setIsExtracting(true);\r\n    setExtractedData(null);\r\n    setErrorMessage('');\r\n\r\n    try {\r\n      // 使用真正的元数据提取器\r\n      const result = await imageMetadataExtractor.extractMetadata(file);\r\n      \r\n      // 检查是否成功提取到数据\r\n      if (result.success && result.standardizedData) {\r\n        const { positive, negative, parameters } = result.standardizedData;\r\n        \r\n        // 转换为旧格式以兼容现有UI\r\n        const extractedMetadata = {\r\n          positivePrompts: positive || '',\r\n          negativePrompts: negative || '',\r\n          parameters: parameters || {},\r\n          generationTool: result.standardizedData.generationTool || 'Unknown',\r\n          extractionMethods: result.extractionMethods || [],\r\n          rawData: result.extractedData || {}\r\n        };\r\n        \r\n        setExtractedData(extractedMetadata);\r\n      } else {\r\n        // 如果没有提取到任何有用信息，显示提示\r\n        setErrorMessage('未能从图像中提取到AI生成信息。这可能是因为：\\n1. 图像不是AI生成的\\n2. 图像元数据已被清除\\n3. 使用了不支持的AI工具格式');\r\n      }\r\n    } catch (error) {\r\n      console.error('图像信息提取失败:', error);\r\n      setErrorMessage(error.message || '图像信息提取失败，请确保上传的是包含元数据的AI生成图像');\r\n    } finally {\r\n      setIsExtracting(false);\r\n    }\r\n  };\r\n\r\n  // 拖拽处理\r\n  const handleDrag = useCallback((e) => {\r\n    e.preventDefault();\r\n    e.stopPropagation();\r\n    if (e.type === \"dragenter\" || e.type === \"dragover\") {\r\n      setDragActive(true);\r\n    } else if (e.type === \"dragleave\") {\r\n      setDragActive(false);\r\n    }\r\n  }, []);\r\n\r\n  const handleDrop = useCallback((e) => {\r\n    e.preventDefault();\r\n    e.stopPropagation();\r\n    setDragActive(false);\r\n    \r\n    if (e.dataTransfer.files && e.dataTransfer.files[0]) {\r\n      handleFileUpload(e.dataTransfer.files[0]);\r\n    }\r\n  }, [handleFileUpload]);\r\n\r\n  const handleCopy = async (text) => {\r\n    const success = await copyToClipboard(text);\r\n    setCopyStatus(success ? 'copied' : 'error');\r\n    setTimeout(() => setCopyStatus(''), 2000);\r\n  };\r\n\r\n  const handleFileInput = (e) => {\r\n    if (e.target.files && e.target.files[0]) {\r\n      handleFileUpload(e.target.files[0]);\r\n    }\r\n  };\r\n\r\n  const resetExtractor = () => {\r\n    setUploadedImage(null);\r\n    setExtractedData(null);\r\n    setErrorMessage('');\r\n    setCopyStatus('');\r\n  };\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      {/* 页面标题 */}\r\n      <div className=\"text-center mb-8\">\r\n        <h1 className=\"text-3xl font-bold text-gray-900 mb-2 flex items-center justify-center\">\r\n          <Image className=\"mr-3 text-green-600\" size={32} />\r\n          图像信息提取器\r\n        </h1>\r\n        <p className=\"text-gray-600 max-w-2xl mx-auto\">\r\n          上传AI生成的图片，自动提取其中的提示词、参数和元数据信息，支持主流AI绘画工具格式\r\n        </p>\r\n      </div>\r\n\r\n      {/* 上传区域 */}\r\n      <div className=\"bg-white/80 backdrop-blur-sm rounded-xl shadow-lg border border-green-100/50 p-6\">\r\n        {!uploadedImage ? (\r\n          <div\r\n            className={`border-2 border-dashed rounded-xl p-12 text-center transition-all ${\r\n              dragActive \r\n                ? 'border-green-500 bg-green-50' \r\n                : 'border-gray-300 hover:border-green-400 hover:bg-green-50/50'\r\n            }`}\r\n            onDragEnter={handleDrag}\r\n            onDragLeave={handleDrag}\r\n            onDragOver={handleDrag}\r\n            onDrop={handleDrop}\r\n          >\r\n            <Upload className=\"mx-auto text-gray-400 mb-4\" size={48} />\r\n            <p className=\"text-lg font-medium text-gray-700 mb-2\">\r\n              拖拽图片到此处，或点击选择文件\r\n            </p>\r\n            <p className=\"text-sm text-gray-500 mb-6\">\r\n              支持 JPG、PNG、WEBP 格式，最大 10MB\r\n            </p>\r\n            <input\r\n              type=\"file\"\r\n              accept=\"image/*\"\r\n              onChange={handleFileInput}\r\n              className=\"hidden\"\r\n              id=\"file-upload\"\r\n            />\r\n            <label\r\n              htmlFor=\"file-upload\"\r\n              className=\"inline-flex items-center px-6 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors cursor-pointer\"\r\n            >\r\n              <FileImage className=\"mr-2\" size={20} />\r\n              选择图片文件\r\n            </label>\r\n          </div>\r\n        ) : (\r\n          <ImagePreview\r\n            image={uploadedImage}\r\n            onReset={resetExtractor}\r\n            onReExtract={() => extractImageInfo(uploadedImage.file)}\r\n          />\r\n        )}\r\n\r\n        {/* 错误信息 */}\r\n        {errorMessage && (\r\n          <div className=\"mt-4 p-3 bg-red-50 border border-red-200 rounded-lg\">\r\n            <div className=\"flex items-start\">\r\n              <AlertCircle className=\"mr-2 text-red-600 flex-shrink-0 mt-0.5\" size={16} />\r\n              <p className=\"text-sm text-red-800\">{errorMessage}</p>\r\n            </div>\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      {/* 提取进度 */}\r\n      {isExtracting && (\r\n        <div className=\"bg-white/80 backdrop-blur-sm rounded-xl p-6 border border-blue-200\">\r\n          <div className=\"flex items-center justify-center space-x-3 mb-4\">\r\n            <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600\"></div>\r\n            <span className=\"text-lg font-medium text-gray-700\">正在分析图像元数据...</span>\r\n          </div>\r\n          <div className=\"text-center space-y-2\">\r\n            <p className=\"text-sm text-gray-600\">正在读取EXIF信息和PNG文本块</p>\r\n            <p className=\"text-xs text-gray-500\">支持ComfyUI、AUTOMATIC1111、NovelAI等格式</p>\r\n          </div>\r\n          <div className=\"mt-4 w-full bg-gray-200 rounded-full h-2\">\r\n            <div className=\"bg-blue-600 h-2 rounded-full animate-pulse\" style={{ width: '85%' }}></div>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* 提取结果 */}\r\n      {extractedData && (\r\n        <ExtractedDataDisplay\r\n          data={extractedData}\r\n          onCopy={handleCopy}\r\n          copyStatus={copyStatus}\r\n        />\r\n      )}\r\n\r\n      {/* 复制状态提示 */}\r\n      {copyStatus && (\r\n        <div className={`fixed bottom-4 right-4 px-4 py-2 rounded-lg text-white text-sm transition-all duration-300 shadow-lg ${\r\n          copyStatus === 'copied' ? 'bg-green-600' : 'bg-red-600'\r\n        }`}>\r\n          {copyStatus === 'copied' ? '✅ 已复制到剪贴板' : '❌ 复制失败'}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\n/**\r\n * 图片预览组件\r\n */\r\nconst ImagePreview = ({ image, onReset, onReExtract }) => (\r\n  <div className=\"space-y-4\">\r\n    <div className=\"flex justify-between items-center\">\r\n      <h3 className=\"text-lg font-medium text-gray-900\">上传的图片</h3>\r\n      <div className=\"flex gap-2\">\r\n        <button\r\n          onClick={onReExtract}\r\n          className=\"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors\"\r\n        >\r\n          重新提取\r\n        </button>\r\n        <button\r\n          onClick={onReset}\r\n          className=\"px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors\"\r\n        >\r\n          重新上传\r\n        </button>\r\n      </div>\r\n    </div>\r\n    \r\n    <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n      <div className=\"space-y-3\">\r\n        <img\r\n          src={image.url}\r\n          alt=\"上传的图片\"\r\n          className=\"w-full h-64 object-cover rounded-lg border border-gray-200\"\r\n        />\r\n      </div>\r\n      \r\n      <div className=\"space-y-3\">\r\n        <div className=\"bg-gray-50 p-4 rounded-lg\">\r\n          <h4 className=\"font-medium text-gray-900 mb-2\">文件信息</h4>\r\n          <div className=\"space-y-1 text-sm text-gray-600\">\r\n            <p><span className=\"font-medium\">文件名：</span>{image.name}</p>\r\n            <p><span className=\"font-medium\">文件大小：</span>{(image.size / 1024 / 1024).toFixed(2)} MB</p>\r\n            <p><span className=\"font-medium\">文件类型：</span>{image.file.type}</p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n);\r\n\r\n/**\r\n * 提取数据显示组件\r\n */\r\nconst ExtractedDataDisplay = ({ data, onCopy, copyStatus }) => {\r\n  // 获取提取来源的友好显示名称\r\n  const getSourceDisplayName = (source) => {\r\n    const sourceMap = {\r\n      'comfyui': 'ComfyUI',\r\n      'automatic1111': 'AUTOMATIC1111',\r\n      'novelai': 'NovelAI',\r\n      'sd-webui': 'Stable Diffusion WebUI',\r\n      'exif_usercomment': 'EXIF UserComment',\r\n      'unknown': '未知格式'\r\n    };\r\n    return sourceMap[source] || source || '未知格式';\r\n  };\r\n\r\n  // 安全获取元数据，如果不存在则创建默认值\r\n  const metadata = data.rawData || {};\r\n  const extractionSource = data.generationTool || 'unknown';\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      <div className=\"flex items-center justify-between\">\r\n        <h2 className=\"text-xl font-bold text-gray-900 flex items-center\">\r\n          <CheckCircle className=\"mr-2 text-green-600\" size={24} />\r\n          提取完成\r\n        </h2>\r\n        <div className=\"flex items-center space-x-2\">\r\n          <Info className=\"text-blue-600\" size={16} />\r\n          <span className=\"text-sm text-gray-600\">\r\n            来源: <span className=\"font-medium text-blue-600\">{getSourceDisplayName(extractionSource)}</span>\r\n          </span>\r\n        </div>\r\n      </div>\r\n\r\n    {/* 提示词信息 */}\r\n    <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\r\n      <DataCard\r\n        title=\"正向提示词 (Positive Prompts)\"\r\n        content={data.positivePrompts || ''}\r\n        onCopy={onCopy}\r\n        copyStatus={copyStatus}\r\n        bgColor=\"bg-green-50\"\r\n        borderColor=\"border-green-200\"\r\n      />\r\n      \r\n      <DataCard\r\n        title=\"负向提示词 (Negative Prompts)\"\r\n        content={data.negativePrompts || ''}\r\n        onCopy={onCopy}\r\n        copyStatus={copyStatus}\r\n        bgColor=\"bg-red-50\"\r\n        borderColor=\"border-red-200\"\r\n      />\r\n    </div>\r\n\r\n    {/* 生成参数 */}\r\n    <div className=\"bg-white/80 backdrop-blur-sm rounded-xl p-6 border border-gray-200\">\r\n      <div className=\"flex justify-between items-center mb-4\">\r\n        <h3 className=\"text-lg font-medium text-gray-900\">生成参数</h3>\r\n        <button\r\n          onClick={() => onCopy(JSON.stringify(data.parameters || {}, null, 2))}\r\n          className=\"p-2 bg-blue-100 text-blue-600 rounded-lg hover:bg-blue-200 transition-colors\"\r\n          title=\"复制参数\"\r\n        >\r\n          <Copy size={16} />\r\n        </button>\r\n      </div>\r\n      \r\n      {data.parameters && Object.keys(data.parameters).length > 0 ? (\r\n        <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4\">\r\n          {Object.entries(data.parameters).map(([key, value]) => {\r\n            // 安全地渲染值，如果是对象则转换为字符串\r\n            const displayValue = typeof value === 'object' && value !== null \r\n              ? '[复杂对象]' \r\n              : String(value);\r\n            \r\n            return (\r\n              <div key={key} className=\"bg-gray-50 p-3 rounded-lg\">\r\n                <p className=\"text-xs text-gray-500 uppercase tracking-wide\">{key}</p>\r\n                <p className=\"text-sm font-medium text-gray-900 break-words\">{displayValue}</p>\r\n              </div>\r\n            );\r\n          })}\r\n        </div>\r\n      ) : (\r\n        <div className=\"text-center py-8 text-gray-500\">\r\n          <p>未找到生成参数</p>\r\n        </div>\r\n      )}\r\n    </div>\r\n\r\n    {/* 元数据信息 */}\r\n    <div className=\"bg-white/80 backdrop-blur-sm rounded-xl p-6 border border-gray-200\">\r\n      <h3 className=\"text-lg font-medium text-gray-900 mb-4\">元数据信息</h3>\r\n      {metadata && Object.keys(metadata).length > 0 ? (\r\n        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n          {Object.entries(metadata).map(([key, value]) => {\r\n            // 安全地渲染值\r\n            const displayValue = typeof value === 'object' && value !== null \r\n              ? JSON.stringify(value) \r\n              : String(value || '');\r\n            \r\n            return (\r\n              <div key={key} className=\"flex justify-between items-center py-2 border-b border-gray-100\">\r\n                <span className=\"text-sm text-gray-600\">{key}:</span>\r\n                <span className=\"text-sm font-medium text-gray-900 break-words max-w-xs\">{displayValue}</span>\r\n              </div>\r\n            );\r\n          })}\r\n        </div>\r\n      ) : (\r\n        <div className=\"text-center py-8 text-gray-500\">\r\n          <p>未找到元数据信息</p>\r\n        </div>\r\n      )}\r\n    </div>\r\n\r\n    {/* 提取方法信息 */}\r\n    {data.extractionMethods && data.extractionMethods.length > 0 && (\r\n      <div className=\"bg-white/80 backdrop-blur-sm rounded-xl p-6 border border-gray-200\">\r\n        <h3 className=\"text-lg font-medium text-gray-900 mb-4\">提取方法</h3>\r\n        <div className=\"flex flex-wrap gap-2\">\r\n          {data.extractionMethods.map((method, index) => (\r\n            <span key={index} className=\"px-3 py-1 bg-blue-100 text-blue-800 rounded-full text-sm\">\r\n              {method.method} ({method.confidence})\r\n            </span>\r\n          ))}\r\n        </div>\r\n      </div>\r\n    )}\r\n\r\n    {/* 一键复制所有信息 */}\r\n    <div className=\"text-center\">\r\n      <button\r\n        onClick={() => onCopy(`正向提示词:\\n${data.positivePrompts || ''}\\n\\n负向提示词:\\n${data.negativePrompts || ''}\\n\\n参数:\\n${JSON.stringify(data.parameters || {}, null, 2)}`)}\r\n        className=\"px-6 py-3 bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-lg hover:shadow-lg transition-all\"\r\n      >\r\n        <Download className=\"inline mr-2\" size={20} />\r\n        一键复制所有信息\r\n      </button>\r\n    </div>\r\n  </div>\r\n  );\r\n};\r\n\r\n/**\r\n * 数据卡片组件\r\n */\r\nconst DataCard = ({ title, content, onCopy, copyStatus, bgColor, borderColor }) => (\r\n  <div className={`${bgColor} ${borderColor} border rounded-xl p-6`}>\r\n    <div className=\"flex justify-between items-center mb-3\">\r\n      <h3 className=\"font-medium text-gray-900\">{title}</h3>\r\n      <button\r\n        onClick={() => onCopy(content)}\r\n        className=\"p-2 bg-white/80 rounded-lg hover:bg-white transition-colors\"\r\n        title=\"复制内容\"\r\n      >\r\n        {copyStatus === 'copied' ? (\r\n          <CheckCircle size={16} className=\"text-green-600\" />\r\n        ) : (\r\n          <Copy size={16} className=\"text-gray-600\" />\r\n        )}\r\n      </button>\r\n    </div>\r\n    <div className=\"bg-white/80 p-4 rounded-lg\">\r\n      <p className=\"text-sm font-mono text-gray-700 leading-relaxed\">\r\n        {content || '暂无内容'}\r\n      </p>\r\n    </div>\r\n  </div>\r\n);\r\n\r\nexport default ImageExtractorPage; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}