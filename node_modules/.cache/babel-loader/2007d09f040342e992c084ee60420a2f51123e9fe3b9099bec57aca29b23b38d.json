{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\wjx19\\\\Documents\\\\GitHub\\\\I-Prompt\\\\src\\\\components\\\\AdvancedPromptEditor.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useRef, useEffect, useCallback } from 'react';\nimport { Edit3, Languages, Plus, Minus, Heart, Trash2, Copy, CheckCircle, Lightbulb, Tag, Zap, Search, X, ChevronDown, ChevronUp, Settings, Save, Undo } from 'lucide-react';\nimport { copyToClipboard } from '../utils/clipboard';\nimport { translateText } from '../services/translationService';\n\n/**\r\n * 高级提示词编辑器组件\r\n * 功能：直接编辑、一键翻译、智能补全、权重调节、删除收藏\r\n */\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst AdvancedPromptEditor = ({\n  initialPrompt = '',\n  onSave,\n  onClose,\n  className = ''\n}) => {\n  _s();\n  const [prompt, setPrompt] = useState(initialPrompt);\n  const [translatedPrompt, setTranslatedPrompt] = useState('');\n  const [isTranslating, setIsTranslating] = useState(false);\n  const [suggestions, setSuggestions] = useState([]);\n  const [showSuggestions, setShowSuggestions] = useState(false);\n  const [cursorPosition, setCursorPosition] = useState(0);\n  const [currentWord, setCurrentWord] = useState('');\n  const [favorites, setFavorites] = useState([]);\n  const [history, setHistory] = useState([initialPrompt]);\n  const [historyIndex, setHistoryIndex] = useState(0);\n  const [copyStatus, setCopyStatus] = useState('');\n  const [isExpanded, setIsExpanded] = useState(true);\n  const textareaRef = useRef(null);\n  const suggestionsRef = useRef(null);\n\n  // 模拟标签数据库（按使用频率排序）\n  const tagDatabase = [\n  // 质量标签\n  {\n    tag: 'masterpiece',\n    cn: '杰作',\n    frequency: 95,\n    category: 'quality'\n  }, {\n    tag: 'best quality',\n    cn: '最佳质量',\n    frequency: 92,\n    category: 'quality'\n  }, {\n    tag: 'ultra detailed',\n    cn: '超详细',\n    frequency: 88,\n    category: 'quality'\n  }, {\n    tag: 'high resolution',\n    cn: '高分辨率',\n    frequency: 85,\n    category: 'quality'\n  }, {\n    tag: 'professional',\n    cn: '专业级',\n    frequency: 82,\n    category: 'quality'\n  }, {\n    tag: '8k wallpaper',\n    cn: '8K壁纸',\n    frequency: 78,\n    category: 'quality'\n  },\n  // 人物标签\n  {\n    tag: 'beautiful girl',\n    cn: '美丽女孩',\n    frequency: 90,\n    category: 'character'\n  }, {\n    tag: 'cute',\n    cn: '可爱',\n    frequency: 87,\n    category: 'character'\n  }, {\n    tag: 'kawaii',\n    cn: '萌',\n    frequency: 84,\n    category: 'character'\n  }, {\n    tag: 'portrait',\n    cn: '肖像',\n    frequency: 81,\n    category: 'character'\n  }, {\n    tag: 'detailed face',\n    cn: '精细面部',\n    frequency: 79,\n    category: 'character'\n  }, {\n    tag: 'expressive eyes',\n    cn: '有表现力的眼睛',\n    frequency: 76,\n    category: 'character'\n  },\n  // 风格标签\n  {\n    tag: 'anime style',\n    cn: '动漫风格',\n    frequency: 89,\n    category: 'style'\n  }, {\n    tag: 'realistic',\n    cn: '写实',\n    frequency: 86,\n    category: 'style'\n  }, {\n    tag: 'photorealistic',\n    cn: '照片级写实',\n    frequency: 83,\n    category: 'style'\n  }, {\n    tag: 'oil painting',\n    cn: '油画',\n    frequency: 75,\n    category: 'style'\n  }, {\n    tag: 'watercolor',\n    cn: '水彩',\n    frequency: 72,\n    category: 'style'\n  }, {\n    tag: 'digital art',\n    cn: '数字艺术',\n    frequency: 80,\n    category: 'style'\n  },\n  // 光照标签\n  {\n    tag: 'cinematic lighting',\n    cn: '电影级光照',\n    frequency: 88,\n    category: 'lighting'\n  }, {\n    tag: 'soft lighting',\n    cn: '柔和光照',\n    frequency: 85,\n    category: 'lighting'\n  }, {\n    tag: 'dramatic lighting',\n    cn: '戏剧性光照',\n    frequency: 82,\n    category: 'lighting'\n  }, {\n    tag: 'golden hour',\n    cn: '黄金时刻',\n    frequency: 79,\n    category: 'lighting'\n  }, {\n    tag: 'natural lighting',\n    cn: '自然光照',\n    frequency: 76,\n    category: 'lighting'\n  }, {\n    tag: 'studio lighting',\n    cn: '摄影棚光照',\n    frequency: 73,\n    category: 'lighting'\n  },\n  // 构图标签\n  {\n    tag: 'perfect composition',\n    cn: '完美构图',\n    frequency: 84,\n    category: 'composition'\n  }, {\n    tag: 'dynamic pose',\n    cn: '动态姿势',\n    frequency: 81,\n    category: 'composition'\n  }, {\n    tag: 'close-up',\n    cn: '特写',\n    frequency: 78,\n    category: 'composition'\n  }, {\n    tag: 'wide shot',\n    cn: '远景',\n    frequency: 75,\n    category: 'composition'\n  }, {\n    tag: 'rule of thirds',\n    cn: '三分法则',\n    frequency: 72,\n    category: 'composition'\n  }, {\n    tag: 'bird eye view',\n    cn: '鸟瞰视角',\n    frequency: 69,\n    category: 'composition'\n  },\n  // 效果标签\n  {\n    tag: 'depth of field',\n    cn: '景深',\n    frequency: 86,\n    category: 'effects'\n  }, {\n    tag: 'bokeh',\n    cn: '虚化',\n    frequency: 83,\n    category: 'effects'\n  }, {\n    tag: 'sharp focus',\n    cn: '锐利对焦',\n    frequency: 80,\n    category: 'effects'\n  }, {\n    tag: 'motion blur',\n    cn: '运动模糊',\n    frequency: 77,\n    category: 'effects'\n  }, {\n    tag: 'lens flare',\n    cn: '镜头光晕',\n    frequency: 74,\n    category: 'effects'\n  }, {\n    tag: 'chromatic aberration',\n    cn: '色差',\n    frequency: 71,\n    category: 'effects'\n  }];\n\n  // 监听文本变化，触发智能补全\n  useEffect(() => {\n    if (textareaRef.current) {\n      const textarea = textareaRef.current;\n      const text = textarea.value;\n      const position = textarea.selectionStart;\n\n      // 获取当前光标位置的单词\n      const beforeCursor = text.substring(0, position);\n      const words = beforeCursor.split(/[,\\s]+/);\n      const currentWord = words[words.length - 1] || '';\n      setCurrentWord(currentWord);\n      setCursorPosition(position);\n\n      // 如果当前单词长度大于1，显示建议\n      if (currentWord.length > 1) {\n        const filteredSuggestions = tagDatabase.filter(item => item.tag.toLowerCase().includes(currentWord.toLowerCase()) || item.cn.includes(currentWord)).sort((a, b) => b.frequency - a.frequency).slice(0, 8); // 显示8个建议\n\n        setSuggestions(filteredSuggestions);\n        setShowSuggestions(filteredSuggestions.length > 0);\n      } else {\n        setShowSuggestions(false);\n      }\n    }\n  }, [prompt]);\n\n  // 处理文本变化\n  const handlePromptChange = useCallback(value => {\n    setPrompt(value);\n\n    // 添加到历史记录\n    if (value !== history[historyIndex]) {\n      const newHistory = history.slice(0, historyIndex + 1);\n      newHistory.push(value);\n      setHistory(newHistory);\n      setHistoryIndex(newHistory.length - 1);\n    }\n  }, [history, historyIndex]);\n\n  // 一键翻译功能\n  const handleTranslate = async () => {\n    if (!prompt.trim()) return;\n    setIsTranslating(true);\n    try {\n      const translated = await translateText(prompt);\n      setTranslatedPrompt(translated);\n    } catch (error) {\n      console.error('翻译失败:', error);\n    } finally {\n      setIsTranslating(false);\n    }\n  };\n\n  // 应用建议\n  const applySuggestion = suggestion => {\n    const textarea = textareaRef.current;\n    const text = textarea.value;\n    const position = textarea.selectionStart;\n\n    // 找到当前单词的开始位置\n    const beforeCursor = text.substring(0, position);\n    const words = beforeCursor.split(/[,\\s]+/);\n    const currentWordStart = beforeCursor.lastIndexOf(words[words.length - 1]);\n\n    // 替换当前单词\n    const newText = text.substring(0, currentWordStart) + suggestion.tag + text.substring(position);\n    handlePromptChange(newText);\n    setShowSuggestions(false);\n\n    // 设置光标位置\n    setTimeout(() => {\n      const newPosition = currentWordStart + suggestion.tag.length;\n      textarea.setSelectionRange(newPosition, newPosition);\n      textarea.focus();\n    }, 0);\n  };\n\n  // 添加权重\n  const addWeight = (weight = 1.2) => {\n    const textarea = textareaRef.current;\n    const start = textarea.selectionStart;\n    const end = textarea.selectionEnd;\n    const selectedText = textarea.value.substring(start, end);\n    if (selectedText) {\n      const weightedText = `(${selectedText}:${weight})`;\n      const newText = textarea.value.substring(0, start) + weightedText + textarea.value.substring(end);\n      handlePromptChange(newText);\n\n      // 重新选中加权后的文本\n      setTimeout(() => {\n        textarea.setSelectionRange(start, start + weightedText.length);\n        textarea.focus();\n      }, 0);\n    }\n  };\n\n  // 移除权重\n  const removeWeight = () => {\n    const textarea = textareaRef.current;\n    const start = textarea.selectionStart;\n    const end = textarea.selectionEnd;\n    const selectedText = textarea.value.substring(start, end);\n\n    // 移除权重标记 (text:weight) 或 ((text))\n    const cleanText = selectedText.replace(/\\(([^:)]+):[0-9.]+\\)/g, '$1').replace(/\\(\\(([^)]+)\\)\\)/g, '$1').replace(/\\(([^)]+)\\)/g, '$1');\n    if (cleanText !== selectedText) {\n      const newText = textarea.value.substring(0, start) + cleanText + textarea.value.substring(end);\n      handlePromptChange(newText);\n    }\n  };\n\n  // 删除选中的标签\n  const deleteSelected = () => {\n    const textarea = textareaRef.current;\n    const start = textarea.selectionStart;\n    const end = textarea.selectionEnd;\n    if (start !== end) {\n      const newText = textarea.value.substring(0, start) + textarea.value.substring(end);\n      handlePromptChange(newText);\n      setTimeout(() => {\n        textarea.setSelectionRange(start, start);\n        textarea.focus();\n      }, 0);\n    }\n  };\n\n  // 收藏当前提示词\n  const toggleFavorite = () => {\n    const trimmedPrompt = prompt.trim();\n    if (trimmedPrompt) {\n      setFavorites(prev => prev.includes(trimmedPrompt) ? prev.filter(fav => fav !== trimmedPrompt) : [...prev, trimmedPrompt]);\n    }\n  };\n\n  // 撤销操作\n  const undo = () => {\n    if (historyIndex > 0) {\n      const newIndex = historyIndex - 1;\n      setHistoryIndex(newIndex);\n      setPrompt(history[newIndex]);\n    }\n  };\n\n  // 重做操作\n  const redo = () => {\n    if (historyIndex < history.length - 1) {\n      const newIndex = historyIndex + 1;\n      setHistoryIndex(newIndex);\n      setPrompt(history[newIndex]);\n    }\n  };\n\n  // 复制功能\n  const handleCopy = async text => {\n    const success = await copyToClipboard(text || prompt);\n    setCopyStatus(success ? 'copied' : 'error');\n    setTimeout(() => setCopyStatus(''), 2000);\n  };\n\n  // 保存功能\n  const handleSave = () => {\n    if (onSave) {\n      onSave(prompt);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: `bg-white rounded-xl shadow-lg border border-gray-200 ${className}`,\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex items-center justify-between p-4 border-b border-gray-200\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center gap-2\",\n        children: [/*#__PURE__*/_jsxDEV(Edit3, {\n          className: \"text-blue-600\",\n          size: 20\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 285,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n          className: \"font-semibold text-gray-900\",\n          children: \"\\u9AD8\\u7EA7\\u63D0\\u793A\\u8BCD\\u7F16\\u8F91\\u5668\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 286,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"text-xs bg-blue-100 text-blue-600 px-2 py-1 rounded-full\",\n          children: \"\\u667A\\u80FD\\u8865\\u5168 | \\u6743\\u91CD\\u8C03\\u8282 | \\u4E00\\u952E\\u7FFB\\u8BD1\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 287,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 284,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center gap-2\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => setIsExpanded(!isExpanded),\n          className: \"p-2 text-gray-600 hover:bg-gray-100 rounded-lg transition-colors\",\n          title: isExpanded ? '收起' : '展开',\n          children: isExpanded ? /*#__PURE__*/_jsxDEV(ChevronUp, {\n            size: 16\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 297,\n            columnNumber: 27\n          }, this) : /*#__PURE__*/_jsxDEV(ChevronDown, {\n            size: 16\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 297,\n            columnNumber: 53\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 292,\n          columnNumber: 11\n        }, this), onClose && /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: onClose,\n          className: \"p-2 text-gray-600 hover:bg-gray-100 rounded-lg transition-colors\",\n          title: \"\\u5173\\u95ED\",\n          children: /*#__PURE__*/_jsxDEV(X, {\n            size: 16\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 305,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 300,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 291,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 283,\n      columnNumber: 7\n    }, this), isExpanded && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"p-4 space-y-4\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"relative\",\n        children: [/*#__PURE__*/_jsxDEV(\"textarea\", {\n          ref: textareaRef,\n          value: prompt,\n          onChange: e => handlePromptChange(e.target.value),\n          placeholder: \"\\u8F93\\u5165\\u60A8\\u7684\\u63D0\\u793A\\u8BCD\\uFF0C\\u652F\\u6301\\u4E2D\\u82F1\\u6587\\u6DF7\\u5408\\u8F93\\u5165\\uFF0C\\u8F93\\u5165\\u65F6\\u4F1A\\u81EA\\u52A8\\u663E\\u793A\\u667A\\u80FD\\u5EFA\\u8BAE...\",\n          className: \"w-full h-32 p-4 border border-gray-300 rounded-lg resize-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all font-mono text-sm leading-relaxed\",\n          style: {\n            fontFamily: 'Monaco, Consolas, \"Courier New\", monospace'\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 315,\n          columnNumber: 13\n        }, this), showSuggestions && suggestions.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n          ref: suggestionsRef,\n          className: \"absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg max-h-64 overflow-y-auto\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"p-2 bg-gray-50 border-b border-gray-200\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-center gap-2 text-xs text-gray-600\",\n              children: [/*#__PURE__*/_jsxDEV(Lightbulb, {\n                size: 12\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 332,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                children: \"\\u667A\\u80FD\\u5EFA\\u8BAE (\\u6309\\u4F7F\\u7528\\u9891\\u7387\\u6392\\u5E8F)\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 333,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 331,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 330,\n            columnNumber: 17\n          }, this), suggestions.map((suggestion, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n            onClick: () => applySuggestion(suggestion),\n            className: \"flex items-center justify-between p-3 hover:bg-blue-50 cursor-pointer border-b border-gray-100 last:border-b-0\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex-1\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex items-center gap-2\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"font-mono text-sm text-gray-900\",\n                  children: suggestion.tag\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 344,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: `px-2 py-1 text-xs rounded-full ${suggestion.category === 'quality' ? 'bg-purple-100 text-purple-600' : suggestion.category === 'character' ? 'bg-blue-100 text-blue-600' : suggestion.category === 'style' ? 'bg-green-100 text-green-600' : suggestion.category === 'lighting' ? 'bg-yellow-100 text-yellow-600' : suggestion.category === 'composition' ? 'bg-pink-100 text-pink-600' : 'bg-gray-100 text-gray-600'}`,\n                  children: suggestion.category\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 347,\n                  columnNumber: 25\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 343,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"text-xs text-gray-500 mt-1\",\n                children: [suggestion.cn, \" \\u2022 \\u4F7F\\u7528\\u7387 \", suggestion.frequency, \"%\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 358,\n                columnNumber: 23\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 342,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-center gap-1\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"w-12 bg-gray-200 rounded-full h-1\",\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"bg-blue-500 h-1 rounded-full\",\n                  style: {\n                    width: `${suggestion.frequency}%`\n                  }\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 364,\n                  columnNumber: 25\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 363,\n                columnNumber: 23\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 362,\n              columnNumber: 21\n            }, this)]\n          }, index, true, {\n            fileName: _jsxFileName,\n            lineNumber: 337,\n            columnNumber: 19\n          }, this))]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 326,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 314,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex flex-wrap gap-2 p-3 bg-gray-50 rounded-lg\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center gap-1 bg-white rounded-lg p-1\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"text-xs text-gray-600 px-2\",\n            children: \"\\u6743\\u91CD:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 380,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => addWeight(1.1),\n            className: \"px-2 py-1 text-xs bg-orange-100 text-orange-600 rounded hover:bg-orange-200 transition-colors\",\n            title: \"\\u6DFB\\u52A0\\u8F7B\\u5FAE\\u6743\\u91CD (1.1)\",\n            children: \"+1.1\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 381,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => addWeight(1.2),\n            className: \"px-2 py-1 text-xs bg-orange-100 text-orange-600 rounded hover:bg-orange-200 transition-colors\",\n            title: \"\\u6DFB\\u52A0\\u6807\\u51C6\\u6743\\u91CD (1.2)\",\n            children: \"+1.2\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 388,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => addWeight(1.5),\n            className: \"px-2 py-1 text-xs bg-orange-100 text-orange-600 rounded hover:bg-orange-200 transition-colors\",\n            title: \"\\u6DFB\\u52A0\\u5F3A\\u6743\\u91CD (1.5)\",\n            children: \"+1.5\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 395,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: removeWeight,\n            className: \"px-2 py-1 text-xs bg-gray-100 text-gray-600 rounded hover:bg-gray-200 transition-colors\",\n            title: \"\\u79FB\\u9664\\u6743\\u91CD\",\n            children: /*#__PURE__*/_jsxDEV(Minus, {\n              size: 12\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 407,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 402,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 379,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center gap-1 bg-white rounded-lg p-1\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: undo,\n            disabled: historyIndex <= 0,\n            className: \"p-1 text-gray-600 hover:bg-gray-100 rounded disabled:opacity-50 disabled:cursor-not-allowed transition-colors\",\n            title: \"\\u64A4\\u9500\",\n            children: /*#__PURE__*/_jsxDEV(Undo, {\n              size: 14\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 419,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 413,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: deleteSelected,\n            className: \"p-1 text-red-600 hover:bg-red-100 rounded transition-colors\",\n            title: \"\\u5220\\u9664\\u9009\\u4E2D\",\n            children: /*#__PURE__*/_jsxDEV(Trash2, {\n              size: 14\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 426,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 421,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: toggleFavorite,\n            className: `p-1 rounded transition-colors ${favorites.includes(prompt.trim()) ? 'text-red-600 bg-red-100 hover:bg-red-200' : 'text-gray-600 hover:bg-gray-100'}`,\n            title: favorites.includes(prompt.trim()) ? '取消收藏' : '收藏',\n            children: /*#__PURE__*/_jsxDEV(Heart, {\n              size: 14,\n              fill: favorites.includes(prompt.trim()) ? 'currentColor' : 'none'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 437,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 428,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 412,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center gap-1 bg-white rounded-lg p-1\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: handleTranslate,\n            disabled: isTranslating || !prompt.trim(),\n            className: \"flex items-center gap-1 px-2 py-1 text-xs bg-blue-100 text-blue-600 rounded hover:bg-blue-200 disabled:opacity-50 transition-colors\",\n            title: \"\\u4E00\\u952E\\u7FFB\\u8BD1\",\n            children: [/*#__PURE__*/_jsxDEV(Languages, {\n              size: 12\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 449,\n              columnNumber: 17\n            }, this), isTranslating ? '翻译中...' : '翻译']\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 443,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => handleCopy(),\n            className: \"flex items-center gap-1 px-2 py-1 text-xs bg-green-100 text-green-600 rounded hover:bg-green-200 transition-colors\",\n            title: \"\\u590D\\u5236\\u63D0\\u793A\\u8BCD\",\n            children: [copyStatus === 'copied' ? /*#__PURE__*/_jsxDEV(CheckCircle, {\n              size: 12\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 457,\n              columnNumber: 44\n            }, this) : /*#__PURE__*/_jsxDEV(Copy, {\n              size: 12\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 457,\n              columnNumber: 72\n            }, this), \"\\u590D\\u5236\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 452,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: handleSave,\n            className: \"flex items-center gap-1 px-2 py-1 text-xs bg-purple-100 text-purple-600 rounded hover:bg-purple-200 transition-colors\",\n            title: \"\\u4FDD\\u5B58\\u63D0\\u793A\\u8BCD\",\n            children: [/*#__PURE__*/_jsxDEV(Save, {\n              size: 12\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 465,\n              columnNumber: 17\n            }, this), \"\\u4FDD\\u5B58\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 460,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 442,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 377,\n        columnNumber: 11\n      }, this), translatedPrompt && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"p-4 bg-blue-50 rounded-lg border border-blue-200\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center justify-between mb-2\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center gap-2\",\n            children: [/*#__PURE__*/_jsxDEV(Languages, {\n              className: \"text-blue-600\",\n              size: 16\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 476,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"text-sm font-medium text-blue-800\",\n              children: \"\\u7FFB\\u8BD1\\u7ED3\\u679C\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 477,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 475,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => handleCopy(translatedPrompt),\n            className: \"p-1 text-blue-600 hover:bg-blue-200 rounded transition-colors\",\n            title: \"\\u590D\\u5236\\u7FFB\\u8BD1\\u7ED3\\u679C\",\n            children: /*#__PURE__*/_jsxDEV(Copy, {\n              size: 14\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 484,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 479,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 474,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-sm font-mono text-blue-900 leading-relaxed\",\n          children: translatedPrompt\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 487,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 473,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center justify-between text-xs text-gray-500 pt-2 border-t border-gray-200\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center gap-4\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            children: [\"\\u5B57\\u7B26\\u6570: \", prompt.length]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 496,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            children: [\"\\u6807\\u7B7E\\u6570: \", prompt.split(',').filter(tag => tag.trim()).length]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 497,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            children: [\"\\u5386\\u53F2\\u8BB0\\u5F55: \", historyIndex + 1, \"/\", history.length]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 498,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 495,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center gap-2\",\n          children: favorites.includes(prompt.trim()) && /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"flex items-center gap-1 text-red-600\",\n            children: [/*#__PURE__*/_jsxDEV(Heart, {\n              size: 12,\n              fill: \"currentColor\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 503,\n              columnNumber: 19\n            }, this), \"\\u5DF2\\u6536\\u85CF\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 502,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 500,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 494,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 312,\n      columnNumber: 9\n    }, this), copyStatus && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: `fixed bottom-4 right-4 px-4 py-2 rounded-lg text-white text-sm transition-all duration-300 shadow-lg z-50 ${copyStatus === 'copied' ? 'bg-green-600' : 'bg-red-600'}`,\n      children: copyStatus === 'copied' ? '✅ 已复制到剪贴板' : '❌ 复制失败'\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 514,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 281,\n    columnNumber: 5\n  }, this);\n};\n_s(AdvancedPromptEditor, \"sF+QjDckceBVbP/8Q6/WC+WHG7w=\");\n_c = AdvancedPromptEditor;\nexport default AdvancedPromptEditor;\nvar _c;\n$RefreshReg$(_c, \"AdvancedPromptEditor\");","map":{"version":3,"names":["React","useState","useRef","useEffect","useCallback","Edit3","Languages","Plus","Minus","Heart","Trash2","Copy","CheckCircle","Lightbulb","Tag","Zap","Search","X","ChevronDown","ChevronUp","Settings","Save","Undo","copyToClipboard","translateText","jsxDEV","_jsxDEV","AdvancedPromptEditor","initialPrompt","onSave","onClose","className","_s","prompt","setPrompt","translatedPrompt","setTranslatedPrompt","isTranslating","setIsTranslating","suggestions","setSuggestions","showSuggestions","setShowSuggestions","cursorPosition","setCursorPosition","currentWord","setCurrentWord","favorites","setFavorites","history","setHistory","historyIndex","setHistoryIndex","copyStatus","setCopyStatus","isExpanded","setIsExpanded","textareaRef","suggestionsRef","tagDatabase","tag","cn","frequency","category","current","textarea","text","value","position","selectionStart","beforeCursor","substring","words","split","length","filteredSuggestions","filter","item","toLowerCase","includes","sort","a","b","slice","handlePromptChange","newHistory","push","handleTranslate","trim","translated","error","console","applySuggestion","suggestion","currentWordStart","lastIndexOf","newText","setTimeout","newPosition","setSelectionRange","focus","addWeight","weight","start","end","selectionEnd","selectedText","weightedText","removeWeight","cleanText","replace","deleteSelected","toggleFavorite","trimmedPrompt","prev","fav","undo","newIndex","redo","handleCopy","success","handleSave","children","size","fileName","_jsxFileName","lineNumber","columnNumber","onClick","title","ref","onChange","e","target","placeholder","style","fontFamily","map","index","width","disabled","fill","_c","$RefreshReg$"],"sources":["C:/Users/wjx19/Documents/GitHub/I-Prompt/src/components/AdvancedPromptEditor.jsx"],"sourcesContent":["import React, { useState, useRef, useEffect, useCallback } from 'react';\r\nimport { \r\n  Edit3, Languages, Plus, Minus, Heart, Trash2, Copy, \r\n  CheckCircle, Lightbulb, Tag, Zap, Search, X, \r\n  ChevronDown, ChevronUp, Settings, Save, Undo\r\n} from 'lucide-react';\r\nimport { copyToClipboard } from '../utils/clipboard';\r\nimport { translateText } from '../services/translationService';\r\n\r\n/**\r\n * 高级提示词编辑器组件\r\n * 功能：直接编辑、一键翻译、智能补全、权重调节、删除收藏\r\n */\r\nconst AdvancedPromptEditor = ({ \r\n  initialPrompt = '', \r\n  onSave, \r\n  onClose,\r\n  className = '' \r\n}) => {\r\n  const [prompt, setPrompt] = useState(initialPrompt);\r\n  const [translatedPrompt, setTranslatedPrompt] = useState('');\r\n  const [isTranslating, setIsTranslating] = useState(false);\r\n  const [suggestions, setSuggestions] = useState([]);\r\n  const [showSuggestions, setShowSuggestions] = useState(false);\r\n  const [cursorPosition, setCursorPosition] = useState(0);\r\n  const [currentWord, setCurrentWord] = useState('');\r\n  const [favorites, setFavorites] = useState([]);\r\n  const [history, setHistory] = useState([initialPrompt]);\r\n  const [historyIndex, setHistoryIndex] = useState(0);\r\n  const [copyStatus, setCopyStatus] = useState('');\r\n  const [isExpanded, setIsExpanded] = useState(true);\r\n  \r\n  const textareaRef = useRef(null);\r\n  const suggestionsRef = useRef(null);\r\n\r\n  // 模拟标签数据库（按使用频率排序）\r\n  const tagDatabase = [\r\n    // 质量标签\r\n    { tag: 'masterpiece', cn: '杰作', frequency: 95, category: 'quality' },\r\n    { tag: 'best quality', cn: '最佳质量', frequency: 92, category: 'quality' },\r\n    { tag: 'ultra detailed', cn: '超详细', frequency: 88, category: 'quality' },\r\n    { tag: 'high resolution', cn: '高分辨率', frequency: 85, category: 'quality' },\r\n    { tag: 'professional', cn: '专业级', frequency: 82, category: 'quality' },\r\n    { tag: '8k wallpaper', cn: '8K壁纸', frequency: 78, category: 'quality' },\r\n    \r\n    // 人物标签\r\n    { tag: 'beautiful girl', cn: '美丽女孩', frequency: 90, category: 'character' },\r\n    { tag: 'cute', cn: '可爱', frequency: 87, category: 'character' },\r\n    { tag: 'kawaii', cn: '萌', frequency: 84, category: 'character' },\r\n    { tag: 'portrait', cn: '肖像', frequency: 81, category: 'character' },\r\n    { tag: 'detailed face', cn: '精细面部', frequency: 79, category: 'character' },\r\n    { tag: 'expressive eyes', cn: '有表现力的眼睛', frequency: 76, category: 'character' },\r\n    \r\n    // 风格标签\r\n    { tag: 'anime style', cn: '动漫风格', frequency: 89, category: 'style' },\r\n    { tag: 'realistic', cn: '写实', frequency: 86, category: 'style' },\r\n    { tag: 'photorealistic', cn: '照片级写实', frequency: 83, category: 'style' },\r\n    { tag: 'oil painting', cn: '油画', frequency: 75, category: 'style' },\r\n    { tag: 'watercolor', cn: '水彩', frequency: 72, category: 'style' },\r\n    { tag: 'digital art', cn: '数字艺术', frequency: 80, category: 'style' },\r\n    \r\n    // 光照标签\r\n    { tag: 'cinematic lighting', cn: '电影级光照', frequency: 88, category: 'lighting' },\r\n    { tag: 'soft lighting', cn: '柔和光照', frequency: 85, category: 'lighting' },\r\n    { tag: 'dramatic lighting', cn: '戏剧性光照', frequency: 82, category: 'lighting' },\r\n    { tag: 'golden hour', cn: '黄金时刻', frequency: 79, category: 'lighting' },\r\n    { tag: 'natural lighting', cn: '自然光照', frequency: 76, category: 'lighting' },\r\n    { tag: 'studio lighting', cn: '摄影棚光照', frequency: 73, category: 'lighting' },\r\n    \r\n    // 构图标签\r\n    { tag: 'perfect composition', cn: '完美构图', frequency: 84, category: 'composition' },\r\n    { tag: 'dynamic pose', cn: '动态姿势', frequency: 81, category: 'composition' },\r\n    { tag: 'close-up', cn: '特写', frequency: 78, category: 'composition' },\r\n    { tag: 'wide shot', cn: '远景', frequency: 75, category: 'composition' },\r\n    { tag: 'rule of thirds', cn: '三分法则', frequency: 72, category: 'composition' },\r\n    { tag: 'bird eye view', cn: '鸟瞰视角', frequency: 69, category: 'composition' },\r\n    \r\n    // 效果标签\r\n    { tag: 'depth of field', cn: '景深', frequency: 86, category: 'effects' },\r\n    { tag: 'bokeh', cn: '虚化', frequency: 83, category: 'effects' },\r\n    { tag: 'sharp focus', cn: '锐利对焦', frequency: 80, category: 'effects' },\r\n    { tag: 'motion blur', cn: '运动模糊', frequency: 77, category: 'effects' },\r\n    { tag: 'lens flare', cn: '镜头光晕', frequency: 74, category: 'effects' },\r\n    { tag: 'chromatic aberration', cn: '色差', frequency: 71, category: 'effects' }\r\n  ];\r\n\r\n  // 监听文本变化，触发智能补全\r\n  useEffect(() => {\r\n    if (textareaRef.current) {\r\n      const textarea = textareaRef.current;\r\n      const text = textarea.value;\r\n      const position = textarea.selectionStart;\r\n      \r\n      // 获取当前光标位置的单词\r\n      const beforeCursor = text.substring(0, position);\r\n      const words = beforeCursor.split(/[,\\s]+/);\r\n      const currentWord = words[words.length - 1] || '';\r\n      \r\n      setCurrentWord(currentWord);\r\n      setCursorPosition(position);\r\n      \r\n      // 如果当前单词长度大于1，显示建议\r\n      if (currentWord.length > 1) {\r\n        const filteredSuggestions = tagDatabase\r\n          .filter(item => \r\n            item.tag.toLowerCase().includes(currentWord.toLowerCase()) ||\r\n            item.cn.includes(currentWord)\r\n          )\r\n          .sort((a, b) => b.frequency - a.frequency)\r\n          .slice(0, 8); // 显示8个建议\r\n        \r\n        setSuggestions(filteredSuggestions);\r\n        setShowSuggestions(filteredSuggestions.length > 0);\r\n      } else {\r\n        setShowSuggestions(false);\r\n      }\r\n    }\r\n  }, [prompt]);\r\n\r\n  // 处理文本变化\r\n  const handlePromptChange = useCallback((value) => {\r\n    setPrompt(value);\r\n    \r\n    // 添加到历史记录\r\n    if (value !== history[historyIndex]) {\r\n      const newHistory = history.slice(0, historyIndex + 1);\r\n      newHistory.push(value);\r\n      setHistory(newHistory);\r\n      setHistoryIndex(newHistory.length - 1);\r\n    }\r\n  }, [history, historyIndex]);\r\n\r\n  // 一键翻译功能\r\n  const handleTranslate = async () => {\r\n    if (!prompt.trim()) return;\r\n    \r\n    setIsTranslating(true);\r\n    try {\r\n      const translated = await translateText(prompt);\r\n      setTranslatedPrompt(translated);\r\n    } catch (error) {\r\n      console.error('翻译失败:', error);\r\n    } finally {\r\n      setIsTranslating(false);\r\n    }\r\n  };\r\n\r\n  // 应用建议\r\n  const applySuggestion = (suggestion) => {\r\n    const textarea = textareaRef.current;\r\n    const text = textarea.value;\r\n    const position = textarea.selectionStart;\r\n    \r\n    // 找到当前单词的开始位置\r\n    const beforeCursor = text.substring(0, position);\r\n    const words = beforeCursor.split(/[,\\s]+/);\r\n    const currentWordStart = beforeCursor.lastIndexOf(words[words.length - 1]);\r\n    \r\n    // 替换当前单词\r\n    const newText = text.substring(0, currentWordStart) + \r\n                   suggestion.tag + \r\n                   text.substring(position);\r\n    \r\n    handlePromptChange(newText);\r\n    setShowSuggestions(false);\r\n    \r\n    // 设置光标位置\r\n    setTimeout(() => {\r\n      const newPosition = currentWordStart + suggestion.tag.length;\r\n      textarea.setSelectionRange(newPosition, newPosition);\r\n      textarea.focus();\r\n    }, 0);\r\n  };\r\n\r\n  // 添加权重\r\n  const addWeight = (weight = 1.2) => {\r\n    const textarea = textareaRef.current;\r\n    const start = textarea.selectionStart;\r\n    const end = textarea.selectionEnd;\r\n    const selectedText = textarea.value.substring(start, end);\r\n    \r\n    if (selectedText) {\r\n      const weightedText = `(${selectedText}:${weight})`;\r\n      const newText = textarea.value.substring(0, start) + \r\n                     weightedText + \r\n                     textarea.value.substring(end);\r\n      handlePromptChange(newText);\r\n      \r\n      // 重新选中加权后的文本\r\n      setTimeout(() => {\r\n        textarea.setSelectionRange(start, start + weightedText.length);\r\n        textarea.focus();\r\n      }, 0);\r\n    }\r\n  };\r\n\r\n  // 移除权重\r\n  const removeWeight = () => {\r\n    const textarea = textareaRef.current;\r\n    const start = textarea.selectionStart;\r\n    const end = textarea.selectionEnd;\r\n    const selectedText = textarea.value.substring(start, end);\r\n    \r\n    // 移除权重标记 (text:weight) 或 ((text))\r\n    const cleanText = selectedText\r\n      .replace(/\\(([^:)]+):[0-9.]+\\)/g, '$1')\r\n      .replace(/\\(\\(([^)]+)\\)\\)/g, '$1')\r\n      .replace(/\\(([^)]+)\\)/g, '$1');\r\n    \r\n    if (cleanText !== selectedText) {\r\n      const newText = textarea.value.substring(0, start) + \r\n                     cleanText + \r\n                     textarea.value.substring(end);\r\n      handlePromptChange(newText);\r\n    }\r\n  };\r\n\r\n  // 删除选中的标签\r\n  const deleteSelected = () => {\r\n    const textarea = textareaRef.current;\r\n    const start = textarea.selectionStart;\r\n    const end = textarea.selectionEnd;\r\n    \r\n    if (start !== end) {\r\n      const newText = textarea.value.substring(0, start) + \r\n                     textarea.value.substring(end);\r\n      handlePromptChange(newText);\r\n      \r\n      setTimeout(() => {\r\n        textarea.setSelectionRange(start, start);\r\n        textarea.focus();\r\n      }, 0);\r\n    }\r\n  };\r\n\r\n  // 收藏当前提示词\r\n  const toggleFavorite = () => {\r\n    const trimmedPrompt = prompt.trim();\r\n    if (trimmedPrompt) {\r\n      setFavorites(prev => \r\n        prev.includes(trimmedPrompt)\r\n          ? prev.filter(fav => fav !== trimmedPrompt)\r\n          : [...prev, trimmedPrompt]\r\n      );\r\n    }\r\n  };\r\n\r\n  // 撤销操作\r\n  const undo = () => {\r\n    if (historyIndex > 0) {\r\n      const newIndex = historyIndex - 1;\r\n      setHistoryIndex(newIndex);\r\n      setPrompt(history[newIndex]);\r\n    }\r\n  };\r\n\r\n  // 重做操作\r\n  const redo = () => {\r\n    if (historyIndex < history.length - 1) {\r\n      const newIndex = historyIndex + 1;\r\n      setHistoryIndex(newIndex);\r\n      setPrompt(history[newIndex]);\r\n    }\r\n  };\r\n\r\n  // 复制功能\r\n  const handleCopy = async (text) => {\r\n    const success = await copyToClipboard(text || prompt);\r\n    setCopyStatus(success ? 'copied' : 'error');\r\n    setTimeout(() => setCopyStatus(''), 2000);\r\n  };\r\n\r\n  // 保存功能\r\n  const handleSave = () => {\r\n    if (onSave) {\r\n      onSave(prompt);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className={`bg-white rounded-xl shadow-lg border border-gray-200 ${className}`}>\r\n      {/* 头部工具栏 */}\r\n      <div className=\"flex items-center justify-between p-4 border-b border-gray-200\">\r\n        <div className=\"flex items-center gap-2\">\r\n          <Edit3 className=\"text-blue-600\" size={20} />\r\n          <h3 className=\"font-semibold text-gray-900\">高级提示词编辑器</h3>\r\n          <span className=\"text-xs bg-blue-100 text-blue-600 px-2 py-1 rounded-full\">\r\n            智能补全 | 权重调节 | 一键翻译\r\n          </span>\r\n        </div>\r\n        <div className=\"flex items-center gap-2\">\r\n          <button\r\n            onClick={() => setIsExpanded(!isExpanded)}\r\n            className=\"p-2 text-gray-600 hover:bg-gray-100 rounded-lg transition-colors\"\r\n            title={isExpanded ? '收起' : '展开'}\r\n          >\r\n            {isExpanded ? <ChevronUp size={16} /> : <ChevronDown size={16} />}\r\n          </button>\r\n          {onClose && (\r\n            <button\r\n              onClick={onClose}\r\n              className=\"p-2 text-gray-600 hover:bg-gray-100 rounded-lg transition-colors\"\r\n              title=\"关闭\"\r\n            >\r\n              <X size={16} />\r\n            </button>\r\n          )}\r\n        </div>\r\n      </div>\r\n\r\n      {isExpanded && (\r\n        <div className=\"p-4 space-y-4\">\r\n          {/* 主编辑区域 */}\r\n          <div className=\"relative\">\r\n            <textarea\r\n              ref={textareaRef}\r\n              value={prompt}\r\n              onChange={(e) => handlePromptChange(e.target.value)}\r\n              placeholder=\"输入您的提示词，支持中英文混合输入，输入时会自动显示智能建议...\"\r\n              className=\"w-full h-32 p-4 border border-gray-300 rounded-lg resize-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all font-mono text-sm leading-relaxed\"\r\n              style={{ fontFamily: 'Monaco, Consolas, \"Courier New\", monospace' }}\r\n            />\r\n            \r\n            {/* 智能建议下拉框 */}\r\n            {showSuggestions && suggestions.length > 0 && (\r\n              <div \r\n                ref={suggestionsRef}\r\n                className=\"absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg max-h-64 overflow-y-auto\"\r\n              >\r\n                <div className=\"p-2 bg-gray-50 border-b border-gray-200\">\r\n                  <div className=\"flex items-center gap-2 text-xs text-gray-600\">\r\n                    <Lightbulb size={12} />\r\n                    <span>智能建议 (按使用频率排序)</span>\r\n                  </div>\r\n                </div>\r\n                {suggestions.map((suggestion, index) => (\r\n                  <div\r\n                    key={index}\r\n                    onClick={() => applySuggestion(suggestion)}\r\n                    className=\"flex items-center justify-between p-3 hover:bg-blue-50 cursor-pointer border-b border-gray-100 last:border-b-0\"\r\n                  >\r\n                    <div className=\"flex-1\">\r\n                      <div className=\"flex items-center gap-2\">\r\n                        <span className=\"font-mono text-sm text-gray-900\">\r\n                          {suggestion.tag}\r\n                        </span>\r\n                        <span className={`px-2 py-1 text-xs rounded-full ${\r\n                          suggestion.category === 'quality' ? 'bg-purple-100 text-purple-600' :\r\n                          suggestion.category === 'character' ? 'bg-blue-100 text-blue-600' :\r\n                          suggestion.category === 'style' ? 'bg-green-100 text-green-600' :\r\n                          suggestion.category === 'lighting' ? 'bg-yellow-100 text-yellow-600' :\r\n                          suggestion.category === 'composition' ? 'bg-pink-100 text-pink-600' :\r\n                          'bg-gray-100 text-gray-600'\r\n                        }`}>\r\n                          {suggestion.category}\r\n                        </span>\r\n                      </div>\r\n                      <div className=\"text-xs text-gray-500 mt-1\">\r\n                        {suggestion.cn} • 使用率 {suggestion.frequency}%\r\n                      </div>\r\n                    </div>\r\n                    <div className=\"flex items-center gap-1\">\r\n                      <div className=\"w-12 bg-gray-200 rounded-full h-1\">\r\n                        <div \r\n                          className=\"bg-blue-500 h-1 rounded-full\" \r\n                          style={{ width: `${suggestion.frequency}%` }}\r\n                        />\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                ))}\r\n              </div>\r\n            )}\r\n          </div>\r\n\r\n          {/* 工具栏 */}\r\n          <div className=\"flex flex-wrap gap-2 p-3 bg-gray-50 rounded-lg\">\r\n            {/* 权重控制 */}\r\n            <div className=\"flex items-center gap-1 bg-white rounded-lg p-1\">\r\n              <span className=\"text-xs text-gray-600 px-2\">权重:</span>\r\n              <button\r\n                onClick={() => addWeight(1.1)}\r\n                className=\"px-2 py-1 text-xs bg-orange-100 text-orange-600 rounded hover:bg-orange-200 transition-colors\"\r\n                title=\"添加轻微权重 (1.1)\"\r\n              >\r\n                +1.1\r\n              </button>\r\n              <button\r\n                onClick={() => addWeight(1.2)}\r\n                className=\"px-2 py-1 text-xs bg-orange-100 text-orange-600 rounded hover:bg-orange-200 transition-colors\"\r\n                title=\"添加标准权重 (1.2)\"\r\n              >\r\n                +1.2\r\n              </button>\r\n              <button\r\n                onClick={() => addWeight(1.5)}\r\n                className=\"px-2 py-1 text-xs bg-orange-100 text-orange-600 rounded hover:bg-orange-200 transition-colors\"\r\n                title=\"添加强权重 (1.5)\"\r\n              >\r\n                +1.5\r\n              </button>\r\n              <button\r\n                onClick={removeWeight}\r\n                className=\"px-2 py-1 text-xs bg-gray-100 text-gray-600 rounded hover:bg-gray-200 transition-colors\"\r\n                title=\"移除权重\"\r\n              >\r\n                <Minus size={12} />\r\n              </button>\r\n            </div>\r\n\r\n            {/* 编辑操作 */}\r\n            <div className=\"flex items-center gap-1 bg-white rounded-lg p-1\">\r\n              <button\r\n                onClick={undo}\r\n                disabled={historyIndex <= 0}\r\n                className=\"p-1 text-gray-600 hover:bg-gray-100 rounded disabled:opacity-50 disabled:cursor-not-allowed transition-colors\"\r\n                title=\"撤销\"\r\n              >\r\n                <Undo size={14} />\r\n              </button>\r\n              <button\r\n                onClick={deleteSelected}\r\n                className=\"p-1 text-red-600 hover:bg-red-100 rounded transition-colors\"\r\n                title=\"删除选中\"\r\n              >\r\n                <Trash2 size={14} />\r\n              </button>\r\n              <button\r\n                onClick={toggleFavorite}\r\n                className={`p-1 rounded transition-colors ${\r\n                  favorites.includes(prompt.trim())\r\n                    ? 'text-red-600 bg-red-100 hover:bg-red-200'\r\n                    : 'text-gray-600 hover:bg-gray-100'\r\n                }`}\r\n                title={favorites.includes(prompt.trim()) ? '取消收藏' : '收藏'}\r\n              >\r\n                <Heart size={14} fill={favorites.includes(prompt.trim()) ? 'currentColor' : 'none'} />\r\n              </button>\r\n            </div>\r\n\r\n            {/* 功能操作 */}\r\n            <div className=\"flex items-center gap-1 bg-white rounded-lg p-1\">\r\n              <button\r\n                onClick={handleTranslate}\r\n                disabled={isTranslating || !prompt.trim()}\r\n                className=\"flex items-center gap-1 px-2 py-1 text-xs bg-blue-100 text-blue-600 rounded hover:bg-blue-200 disabled:opacity-50 transition-colors\"\r\n                title=\"一键翻译\"\r\n              >\r\n                <Languages size={12} />\r\n                {isTranslating ? '翻译中...' : '翻译'}\r\n              </button>\r\n              <button\r\n                onClick={() => handleCopy()}\r\n                className=\"flex items-center gap-1 px-2 py-1 text-xs bg-green-100 text-green-600 rounded hover:bg-green-200 transition-colors\"\r\n                title=\"复制提示词\"\r\n              >\r\n                {copyStatus === 'copied' ? <CheckCircle size={12} /> : <Copy size={12} />}\r\n                复制\r\n              </button>\r\n              <button\r\n                onClick={handleSave}\r\n                className=\"flex items-center gap-1 px-2 py-1 text-xs bg-purple-100 text-purple-600 rounded hover:bg-purple-200 transition-colors\"\r\n                title=\"保存提示词\"\r\n              >\r\n                <Save size={12} />\r\n                保存\r\n              </button>\r\n            </div>\r\n          </div>\r\n\r\n          {/* 翻译结果 */}\r\n          {translatedPrompt && (\r\n            <div className=\"p-4 bg-blue-50 rounded-lg border border-blue-200\">\r\n              <div className=\"flex items-center justify-between mb-2\">\r\n                <div className=\"flex items-center gap-2\">\r\n                  <Languages className=\"text-blue-600\" size={16} />\r\n                  <span className=\"text-sm font-medium text-blue-800\">翻译结果</span>\r\n                </div>\r\n                <button\r\n                  onClick={() => handleCopy(translatedPrompt)}\r\n                  className=\"p-1 text-blue-600 hover:bg-blue-200 rounded transition-colors\"\r\n                  title=\"复制翻译结果\"\r\n                >\r\n                  <Copy size={14} />\r\n                </button>\r\n              </div>\r\n              <p className=\"text-sm font-mono text-blue-900 leading-relaxed\">\r\n                {translatedPrompt}\r\n              </p>\r\n            </div>\r\n          )}\r\n\r\n          {/* 统计信息 */}\r\n          <div className=\"flex items-center justify-between text-xs text-gray-500 pt-2 border-t border-gray-200\">\r\n            <div className=\"flex items-center gap-4\">\r\n              <span>字符数: {prompt.length}</span>\r\n              <span>标签数: {prompt.split(',').filter(tag => tag.trim()).length}</span>\r\n              <span>历史记录: {historyIndex + 1}/{history.length}</span>\r\n            </div>\r\n            <div className=\"flex items-center gap-2\">\r\n              {favorites.includes(prompt.trim()) && (\r\n                <span className=\"flex items-center gap-1 text-red-600\">\r\n                  <Heart size={12} fill=\"currentColor\" />\r\n                  已收藏\r\n                </span>\r\n              )}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* 复制状态提示 */}\r\n      {copyStatus && (\r\n        <div className={`fixed bottom-4 right-4 px-4 py-2 rounded-lg text-white text-sm transition-all duration-300 shadow-lg z-50 ${\r\n          copyStatus === 'copied' ? 'bg-green-600' : 'bg-red-600'\r\n        }`}>\r\n          {copyStatus === 'copied' ? '✅ 已复制到剪贴板' : '❌ 复制失败'}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AdvancedPromptEditor; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}