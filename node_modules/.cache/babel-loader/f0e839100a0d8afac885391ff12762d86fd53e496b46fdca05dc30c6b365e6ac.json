{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\wjx19\\\\Documents\\\\GitHub\\\\I-Prompt\\\\src\\\\components\\\\AdvancedPromptEditor.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useRef, useEffect, useCallback } from 'react';\nimport { Edit3, Languages, Plus, Minus, Heart, Trash2, Copy, CheckCircle, Lightbulb, Tag, Zap, Search, X, ChevronDown, ChevronUp, Settings, Save, Undo } from 'lucide-react';\nimport { copyToClipboard } from '../utils/clipboard';\n\n/**\r\n * 高级提示词编辑器组件\r\n * 功能：直接编辑、一键翻译、智能补全、权重调节、删除收藏\r\n */\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst AdvancedPromptEditor = ({\n  initialPrompt = '',\n  onSave,\n  onClose,\n  className = ''\n}) => {\n  _s();\n  const [prompt, setPrompt] = useState(initialPrompt);\n  const [translatedPrompt, setTranslatedPrompt] = useState('');\n  const [isTranslating, setIsTranslating] = useState(false);\n  const [suggestions, setSuggestions] = useState([]);\n  const [showSuggestions, setShowSuggestions] = useState(false);\n  const [cursorPosition, setCursorPosition] = useState(0);\n  const [currentWord, setCurrentWord] = useState('');\n  const [favorites, setFavorites] = useState([]);\n  const [history, setHistory] = useState([initialPrompt]);\n  const [historyIndex, setHistoryIndex] = useState(0);\n  const [copyStatus, setCopyStatus] = useState('');\n  const [isExpanded, setIsExpanded] = useState(true);\n  const textareaRef = useRef(null);\n  const suggestionsRef = useRef(null);\n\n  // 模拟标签数据库（按使用频率排序）\n  const tagDatabase = [\n  // 质量标签\n  {\n    tag: 'masterpiece',\n    cn: '杰作',\n    frequency: 95,\n    category: 'quality'\n  }, {\n    tag: 'best quality',\n    cn: '最佳质量',\n    frequency: 92,\n    category: 'quality'\n  }, {\n    tag: 'ultra detailed',\n    cn: '超详细',\n    frequency: 88,\n    category: 'quality'\n  }, {\n    tag: 'high resolution',\n    cn: '高分辨率',\n    frequency: 85,\n    category: 'quality'\n  }, {\n    tag: 'professional',\n    cn: '专业级',\n    frequency: 82,\n    category: 'quality'\n  }, {\n    tag: '8k wallpaper',\n    cn: '8K壁纸',\n    frequency: 78,\n    category: 'quality'\n  },\n  // 人物标签\n  {\n    tag: 'beautiful girl',\n    cn: '美丽女孩',\n    frequency: 90,\n    category: 'character'\n  }, {\n    tag: 'cute',\n    cn: '可爱',\n    frequency: 87,\n    category: 'character'\n  }, {\n    tag: 'kawaii',\n    cn: '萌',\n    frequency: 84,\n    category: 'character'\n  }, {\n    tag: 'portrait',\n    cn: '肖像',\n    frequency: 81,\n    category: 'character'\n  }, {\n    tag: 'detailed face',\n    cn: '精细面部',\n    frequency: 79,\n    category: 'character'\n  }, {\n    tag: 'expressive eyes',\n    cn: '有表现力的眼睛',\n    frequency: 76,\n    category: 'character'\n  },\n  // 风格标签\n  {\n    tag: 'anime style',\n    cn: '动漫风格',\n    frequency: 89,\n    category: 'style'\n  }, {\n    tag: 'realistic',\n    cn: '写实',\n    frequency: 86,\n    category: 'style'\n  }, {\n    tag: 'photorealistic',\n    cn: '照片级写实',\n    frequency: 83,\n    category: 'style'\n  }, {\n    tag: 'oil painting',\n    cn: '油画',\n    frequency: 75,\n    category: 'style'\n  }, {\n    tag: 'watercolor',\n    cn: '水彩',\n    frequency: 72,\n    category: 'style'\n  }, {\n    tag: 'digital art',\n    cn: '数字艺术',\n    frequency: 80,\n    category: 'style'\n  },\n  // 光照标签\n  {\n    tag: 'cinematic lighting',\n    cn: '电影级光照',\n    frequency: 88,\n    category: 'lighting'\n  }, {\n    tag: 'soft lighting',\n    cn: '柔和光照',\n    frequency: 85,\n    category: 'lighting'\n  }, {\n    tag: 'dramatic lighting',\n    cn: '戏剧性光照',\n    frequency: 82,\n    category: 'lighting'\n  }, {\n    tag: 'golden hour',\n    cn: '黄金时刻',\n    frequency: 79,\n    category: 'lighting'\n  }, {\n    tag: 'natural lighting',\n    cn: '自然光照',\n    frequency: 76,\n    category: 'lighting'\n  }, {\n    tag: 'studio lighting',\n    cn: '摄影棚光照',\n    frequency: 73,\n    category: 'lighting'\n  },\n  // 构图标签\n  {\n    tag: 'perfect composition',\n    cn: '完美构图',\n    frequency: 84,\n    category: 'composition'\n  }, {\n    tag: 'dynamic pose',\n    cn: '动态姿势',\n    frequency: 81,\n    category: 'composition'\n  }, {\n    tag: 'close-up',\n    cn: '特写',\n    frequency: 78,\n    category: 'composition'\n  }, {\n    tag: 'wide shot',\n    cn: '远景',\n    frequency: 75,\n    category: 'composition'\n  }, {\n    tag: 'rule of thirds',\n    cn: '三分法则',\n    frequency: 72,\n    category: 'composition'\n  }, {\n    tag: 'bird eye view',\n    cn: '鸟瞰视角',\n    frequency: 69,\n    category: 'composition'\n  },\n  // 效果标签\n  {\n    tag: 'depth of field',\n    cn: '景深',\n    frequency: 86,\n    category: 'effects'\n  }, {\n    tag: 'bokeh',\n    cn: '虚化',\n    frequency: 83,\n    category: 'effects'\n  }, {\n    tag: 'sharp focus',\n    cn: '锐利对焦',\n    frequency: 80,\n    category: 'effects'\n  }, {\n    tag: 'motion blur',\n    cn: '运动模糊',\n    frequency: 77,\n    category: 'effects'\n  }, {\n    tag: 'lens flare',\n    cn: '镜头光晕',\n    frequency: 74,\n    category: 'effects'\n  }, {\n    tag: 'chromatic aberration',\n    cn: '色差',\n    frequency: 71,\n    category: 'effects'\n  }];\n\n  // 监听文本变化，触发智能补全\n  useEffect(() => {\n    if (textareaRef.current) {\n      const textarea = textareaRef.current;\n      const text = textarea.value;\n      const position = textarea.selectionStart;\n\n      // 获取当前光标位置的单词\n      const beforeCursor = text.substring(0, position);\n      const words = beforeCursor.split(/[,\\s]+/);\n      const currentWord = words[words.length - 1] || '';\n      setCurrentWord(currentWord);\n      setCursorPosition(position);\n\n      // 如果当前单词长度大于1，显示建议\n      if (currentWord.length > 1) {\n        const filteredSuggestions = tagDatabase.filter(item => item.tag.toLowerCase().includes(currentWord.toLowerCase()) || item.cn.includes(currentWord)).sort((a, b) => b.frequency - a.frequency).slice(0, 8); // 显示8个建议\n\n        setSuggestions(filteredSuggestions);\n        setShowSuggestions(filteredSuggestions.length > 0);\n      } else {\n        setShowSuggestions(false);\n      }\n    }\n  }, [prompt]);\n\n  // 处理文本变化\n  const handlePromptChange = useCallback(value => {\n    setPrompt(value);\n\n    // 添加到历史记录\n    if (value !== history[historyIndex]) {\n      const newHistory = history.slice(0, historyIndex + 1);\n      newHistory.push(value);\n      setHistory(newHistory);\n      setHistoryIndex(newHistory.length - 1);\n    }\n  }, [history, historyIndex]);\n\n  // 一键翻译功能\n  const handleTranslate = async () => {\n    setIsTranslating(true);\n    try {\n      // 这里可以接入真实的翻译API\n      // 现在使用模拟翻译\n      const translated = await simulateTranslation(prompt);\n      setTranslatedPrompt(translated);\n    } catch (error) {\n      console.error('翻译失败:', error);\n    } finally {\n      setIsTranslating(false);\n    }\n  };\n\n  // 模拟翻译功能\n  const simulateTranslation = async text => {\n    return new Promise(resolve => {\n      setTimeout(() => {\n        // 简单的中英文互译模拟\n        const isChinese = /[\\u4e00-\\u9fa5]/.test(text);\n        if (isChinese) {\n          // 中文转英文\n          const translations = {\n            '美丽女孩': 'beautiful girl',\n            '可爱': 'cute',\n            '动漫风格': 'anime style',\n            '最佳质量': 'best quality',\n            '杰作': 'masterpiece',\n            '超详细': 'ultra detailed'\n          };\n          let result = text;\n          Object.entries(translations).forEach(([cn, en]) => {\n            result = result.replace(new RegExp(cn, 'g'), en);\n          });\n          resolve(result);\n        } else {\n          // 英文转中文\n          const translations = {\n            'beautiful girl': '美丽女孩',\n            'cute': '可爱',\n            'anime style': '动漫风格',\n            'best quality': '最佳质量',\n            'masterpiece': '杰作',\n            'ultra detailed': '超详细'\n          };\n          let result = text;\n          Object.entries(translations).forEach(([en, cn]) => {\n            result = result.replace(new RegExp(en, 'gi'), cn);\n          });\n          resolve(result);\n        }\n      }, 1000);\n    });\n  };\n\n  // 应用建议\n  const applySuggestion = suggestion => {\n    const textarea = textareaRef.current;\n    const text = textarea.value;\n    const position = textarea.selectionStart;\n\n    // 找到当前单词的开始位置\n    const beforeCursor = text.substring(0, position);\n    const words = beforeCursor.split(/[,\\s]+/);\n    const currentWordStart = beforeCursor.lastIndexOf(words[words.length - 1]);\n\n    // 替换当前单词\n    const newText = text.substring(0, currentWordStart) + suggestion.tag + text.substring(position);\n    handlePromptChange(newText);\n    setShowSuggestions(false);\n\n    // 设置光标位置\n    setTimeout(() => {\n      const newPosition = currentWordStart + suggestion.tag.length;\n      textarea.setSelectionRange(newPosition, newPosition);\n      textarea.focus();\n    }, 0);\n  };\n\n  // 添加权重\n  const addWeight = (weight = 1.2) => {\n    const textarea = textareaRef.current;\n    const start = textarea.selectionStart;\n    const end = textarea.selectionEnd;\n    const selectedText = textarea.value.substring(start, end);\n    if (selectedText) {\n      const weightedText = `(${selectedText}:${weight})`;\n      const newText = textarea.value.substring(0, start) + weightedText + textarea.value.substring(end);\n      handlePromptChange(newText);\n\n      // 重新选中加权后的文本\n      setTimeout(() => {\n        textarea.setSelectionRange(start, start + weightedText.length);\n        textarea.focus();\n      }, 0);\n    }\n  };\n\n  // 移除权重\n  const removeWeight = () => {\n    const textarea = textareaRef.current;\n    const start = textarea.selectionStart;\n    const end = textarea.selectionEnd;\n    const selectedText = textarea.value.substring(start, end);\n\n    // 移除权重标记 (text:weight) 或 ((text))\n    const cleanText = selectedText.replace(/\\(([^:)]+):[0-9.]+\\)/g, '$1').replace(/\\(\\(([^)]+)\\)\\)/g, '$1').replace(/\\(([^)]+)\\)/g, '$1');\n    if (cleanText !== selectedText) {\n      const newText = textarea.value.substring(0, start) + cleanText + textarea.value.substring(end);\n      handlePromptChange(newText);\n    }\n  };\n\n  // 删除选中的标签\n  const deleteSelected = () => {\n    const textarea = textareaRef.current;\n    const start = textarea.selectionStart;\n    const end = textarea.selectionEnd;\n    if (start !== end) {\n      const newText = textarea.value.substring(0, start) + textarea.value.substring(end);\n      handlePromptChange(newText);\n      setTimeout(() => {\n        textarea.setSelectionRange(start, start);\n        textarea.focus();\n      }, 0);\n    }\n  };\n\n  // 收藏当前提示词\n  const toggleFavorite = () => {\n    const trimmedPrompt = prompt.trim();\n    if (trimmedPrompt) {\n      setFavorites(prev => prev.includes(trimmedPrompt) ? prev.filter(fav => fav !== trimmedPrompt) : [...prev, trimmedPrompt]);\n    }\n  };\n\n  // 撤销操作\n  const undo = () => {\n    if (historyIndex > 0) {\n      const newIndex = historyIndex - 1;\n      setHistoryIndex(newIndex);\n      setPrompt(history[newIndex]);\n    }\n  };\n\n  // 重做操作\n  const redo = () => {\n    if (historyIndex < history.length - 1) {\n      const newIndex = historyIndex + 1;\n      setHistoryIndex(newIndex);\n      setPrompt(history[newIndex]);\n    }\n  };\n\n  // 复制功能\n  const handleCopy = async text => {\n    const success = await copyToClipboard(text || prompt);\n    setCopyStatus(success ? 'copied' : 'error');\n    setTimeout(() => setCopyStatus(''), 2000);\n  };\n\n  // 保存功能\n  const handleSave = () => {\n    if (onSave) {\n      onSave(prompt);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: `bg-white rounded-xl shadow-lg border border-gray-200 ${className}`,\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex items-center justify-between p-4 border-b border-gray-200\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center gap-2\",\n        children: [/*#__PURE__*/_jsxDEV(Edit3, {\n          className: \"text-blue-600\",\n          size: 20\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 327,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n          className: \"font-semibold text-gray-900\",\n          children: \"\\u9AD8\\u7EA7\\u63D0\\u793A\\u8BCD\\u7F16\\u8F91\\u5668\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 328,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"text-xs bg-blue-100 text-blue-600 px-2 py-1 rounded-full\",\n          children: \"\\u667A\\u80FD\\u8865\\u5168 | \\u6743\\u91CD\\u8C03\\u8282 | \\u4E00\\u952E\\u7FFB\\u8BD1\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 329,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 326,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center gap-2\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => setIsExpanded(!isExpanded),\n          className: \"p-2 text-gray-600 hover:bg-gray-100 rounded-lg transition-colors\",\n          title: isExpanded ? '收起' : '展开',\n          children: isExpanded ? /*#__PURE__*/_jsxDEV(ChevronUp, {\n            size: 16\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 339,\n            columnNumber: 27\n          }, this) : /*#__PURE__*/_jsxDEV(ChevronDown, {\n            size: 16\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 339,\n            columnNumber: 53\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 334,\n          columnNumber: 11\n        }, this), onClose && /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: onClose,\n          className: \"p-2 text-gray-600 hover:bg-gray-100 rounded-lg transition-colors\",\n          title: \"\\u5173\\u95ED\",\n          children: /*#__PURE__*/_jsxDEV(X, {\n            size: 16\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 347,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 342,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 333,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 325,\n      columnNumber: 7\n    }, this), isExpanded && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"p-4 space-y-4\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"relative\",\n        children: [/*#__PURE__*/_jsxDEV(\"textarea\", {\n          ref: textareaRef,\n          value: prompt,\n          onChange: e => handlePromptChange(e.target.value),\n          placeholder: \"\\u8F93\\u5165\\u60A8\\u7684\\u63D0\\u793A\\u8BCD\\uFF0C\\u652F\\u6301\\u4E2D\\u82F1\\u6587\\u6DF7\\u5408\\u8F93\\u5165\\uFF0C\\u8F93\\u5165\\u65F6\\u4F1A\\u81EA\\u52A8\\u663E\\u793A\\u667A\\u80FD\\u5EFA\\u8BAE...\",\n          className: \"w-full h-32 p-4 border border-gray-300 rounded-lg resize-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all font-mono text-sm leading-relaxed\",\n          style: {\n            fontFamily: 'Monaco, Consolas, \"Courier New\", monospace'\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 357,\n          columnNumber: 13\n        }, this), showSuggestions && suggestions.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n          ref: suggestionsRef,\n          className: \"absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg max-h-64 overflow-y-auto\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"p-2 bg-gray-50 border-b border-gray-200\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-center gap-2 text-xs text-gray-600\",\n              children: [/*#__PURE__*/_jsxDEV(Lightbulb, {\n                size: 12\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 374,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                children: \"\\u667A\\u80FD\\u5EFA\\u8BAE (\\u6309\\u4F7F\\u7528\\u9891\\u7387\\u6392\\u5E8F)\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 375,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 373,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 372,\n            columnNumber: 17\n          }, this), suggestions.map((suggestion, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n            onClick: () => applySuggestion(suggestion),\n            className: \"flex items-center justify-between p-3 hover:bg-blue-50 cursor-pointer border-b border-gray-100 last:border-b-0\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex-1\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex items-center gap-2\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"font-mono text-sm text-gray-900\",\n                  children: suggestion.tag\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 386,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: `px-2 py-1 text-xs rounded-full ${suggestion.category === 'quality' ? 'bg-purple-100 text-purple-600' : suggestion.category === 'character' ? 'bg-blue-100 text-blue-600' : suggestion.category === 'style' ? 'bg-green-100 text-green-600' : suggestion.category === 'lighting' ? 'bg-yellow-100 text-yellow-600' : suggestion.category === 'composition' ? 'bg-pink-100 text-pink-600' : 'bg-gray-100 text-gray-600'}`,\n                  children: suggestion.category\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 389,\n                  columnNumber: 25\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 385,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"text-xs text-gray-500 mt-1\",\n                children: [suggestion.cn, \" \\u2022 \\u4F7F\\u7528\\u7387 \", suggestion.frequency, \"%\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 400,\n                columnNumber: 23\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 384,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-center gap-1\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"w-12 bg-gray-200 rounded-full h-1\",\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"bg-blue-500 h-1 rounded-full\",\n                  style: {\n                    width: `${suggestion.frequency}%`\n                  }\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 406,\n                  columnNumber: 25\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 405,\n                columnNumber: 23\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 404,\n              columnNumber: 21\n            }, this)]\n          }, index, true, {\n            fileName: _jsxFileName,\n            lineNumber: 379,\n            columnNumber: 19\n          }, this))]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 368,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 356,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex flex-wrap gap-2 p-3 bg-gray-50 rounded-lg\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center gap-1 bg-white rounded-lg p-1\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"text-xs text-gray-600 px-2\",\n            children: \"\\u6743\\u91CD:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 422,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => addWeight(1.1),\n            className: \"px-2 py-1 text-xs bg-orange-100 text-orange-600 rounded hover:bg-orange-200 transition-colors\",\n            title: \"\\u6DFB\\u52A0\\u8F7B\\u5FAE\\u6743\\u91CD (1.1)\",\n            children: \"+1.1\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 423,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => addWeight(1.2),\n            className: \"px-2 py-1 text-xs bg-orange-100 text-orange-600 rounded hover:bg-orange-200 transition-colors\",\n            title: \"\\u6DFB\\u52A0\\u6807\\u51C6\\u6743\\u91CD (1.2)\",\n            children: \"+1.2\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 430,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => addWeight(1.5),\n            className: \"px-2 py-1 text-xs bg-orange-100 text-orange-600 rounded hover:bg-orange-200 transition-colors\",\n            title: \"\\u6DFB\\u52A0\\u5F3A\\u6743\\u91CD (1.5)\",\n            children: \"+1.5\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 437,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: removeWeight,\n            className: \"px-2 py-1 text-xs bg-gray-100 text-gray-600 rounded hover:bg-gray-200 transition-colors\",\n            title: \"\\u79FB\\u9664\\u6743\\u91CD\",\n            children: /*#__PURE__*/_jsxDEV(Minus, {\n              size: 12\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 449,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 444,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 421,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center gap-1 bg-white rounded-lg p-1\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: undo,\n            disabled: historyIndex <= 0,\n            className: \"p-1 text-gray-600 hover:bg-gray-100 rounded disabled:opacity-50 disabled:cursor-not-allowed transition-colors\",\n            title: \"\\u64A4\\u9500\",\n            children: /*#__PURE__*/_jsxDEV(Undo, {\n              size: 14\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 461,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 455,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: deleteSelected,\n            className: \"p-1 text-red-600 hover:bg-red-100 rounded transition-colors\",\n            title: \"\\u5220\\u9664\\u9009\\u4E2D\",\n            children: /*#__PURE__*/_jsxDEV(Trash2, {\n              size: 14\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 468,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 463,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: toggleFavorite,\n            className: `p-1 rounded transition-colors ${favorites.includes(prompt.trim()) ? 'text-red-600 bg-red-100 hover:bg-red-200' : 'text-gray-600 hover:bg-gray-100'}`,\n            title: favorites.includes(prompt.trim()) ? '取消收藏' : '收藏',\n            children: /*#__PURE__*/_jsxDEV(Heart, {\n              size: 14,\n              fill: favorites.includes(prompt.trim()) ? 'currentColor' : 'none'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 479,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 470,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 454,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center gap-1 bg-white rounded-lg p-1\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: handleTranslate,\n            disabled: isTranslating,\n            className: \"flex items-center gap-1 px-2 py-1 text-xs bg-blue-100 text-blue-600 rounded hover:bg-blue-200 disabled:opacity-50 transition-colors\",\n            title: \"\\u4E00\\u952E\\u7FFB\\u8BD1\",\n            children: [/*#__PURE__*/_jsxDEV(Languages, {\n              size: 12\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 491,\n              columnNumber: 17\n            }, this), isTranslating ? '翻译中...' : '翻译']\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 485,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => handleCopy(),\n            className: \"flex items-center gap-1 px-2 py-1 text-xs bg-green-100 text-green-600 rounded hover:bg-green-200 transition-colors\",\n            title: \"\\u590D\\u5236\\u63D0\\u793A\\u8BCD\",\n            children: [copyStatus === 'copied' ? /*#__PURE__*/_jsxDEV(CheckCircle, {\n              size: 12\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 499,\n              columnNumber: 44\n            }, this) : /*#__PURE__*/_jsxDEV(Copy, {\n              size: 12\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 499,\n              columnNumber: 72\n            }, this), \"\\u590D\\u5236\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 494,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: handleSave,\n            className: \"flex items-center gap-1 px-2 py-1 text-xs bg-purple-100 text-purple-600 rounded hover:bg-purple-200 transition-colors\",\n            title: \"\\u4FDD\\u5B58\\u63D0\\u793A\\u8BCD\",\n            children: [/*#__PURE__*/_jsxDEV(Save, {\n              size: 12\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 507,\n              columnNumber: 17\n            }, this), \"\\u4FDD\\u5B58\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 502,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 484,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 419,\n        columnNumber: 11\n      }, this), translatedPrompt && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"p-4 bg-blue-50 rounded-lg border border-blue-200\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center justify-between mb-2\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center gap-2\",\n            children: [/*#__PURE__*/_jsxDEV(Languages, {\n              className: \"text-blue-600\",\n              size: 16\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 518,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"text-sm font-medium text-blue-800\",\n              children: \"\\u7FFB\\u8BD1\\u7ED3\\u679C\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 519,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 517,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => handleCopy(translatedPrompt),\n            className: \"p-1 text-blue-600 hover:bg-blue-200 rounded transition-colors\",\n            title: \"\\u590D\\u5236\\u7FFB\\u8BD1\\u7ED3\\u679C\",\n            children: /*#__PURE__*/_jsxDEV(Copy, {\n              size: 14\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 526,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 521,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 516,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-sm font-mono text-blue-900 leading-relaxed\",\n          children: translatedPrompt\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 529,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 515,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center justify-between text-xs text-gray-500 pt-2 border-t border-gray-200\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center gap-4\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            children: [\"\\u5B57\\u7B26\\u6570: \", prompt.length]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 538,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            children: [\"\\u6807\\u7B7E\\u6570: \", prompt.split(',').filter(tag => tag.trim()).length]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 539,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            children: [\"\\u5386\\u53F2\\u8BB0\\u5F55: \", historyIndex + 1, \"/\", history.length]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 540,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 537,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center gap-2\",\n          children: favorites.includes(prompt.trim()) && /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"flex items-center gap-1 text-red-600\",\n            children: [/*#__PURE__*/_jsxDEV(Heart, {\n              size: 12,\n              fill: \"currentColor\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 545,\n              columnNumber: 19\n            }, this), \"\\u5DF2\\u6536\\u85CF\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 544,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 542,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 536,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 354,\n      columnNumber: 9\n    }, this), copyStatus && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: `fixed bottom-4 right-4 px-4 py-2 rounded-lg text-white text-sm transition-all duration-300 shadow-lg z-50 ${copyStatus === 'copied' ? 'bg-green-600' : 'bg-red-600'}`,\n      children: copyStatus === 'copied' ? '✅ 已复制到剪贴板' : '❌ 复制失败'\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 556,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 323,\n    columnNumber: 5\n  }, this);\n};\n_s(AdvancedPromptEditor, \"sF+QjDckceBVbP/8Q6/WC+WHG7w=\");\n_c = AdvancedPromptEditor;\nexport default AdvancedPromptEditor;\nvar _c;\n$RefreshReg$(_c, \"AdvancedPromptEditor\");","map":{"version":3,"names":["React","useState","useRef","useEffect","useCallback","Edit3","Languages","Plus","Minus","Heart","Trash2","Copy","CheckCircle","Lightbulb","Tag","Zap","Search","X","ChevronDown","ChevronUp","Settings","Save","Undo","copyToClipboard","jsxDEV","_jsxDEV","AdvancedPromptEditor","initialPrompt","onSave","onClose","className","_s","prompt","setPrompt","translatedPrompt","setTranslatedPrompt","isTranslating","setIsTranslating","suggestions","setSuggestions","showSuggestions","setShowSuggestions","cursorPosition","setCursorPosition","currentWord","setCurrentWord","favorites","setFavorites","history","setHistory","historyIndex","setHistoryIndex","copyStatus","setCopyStatus","isExpanded","setIsExpanded","textareaRef","suggestionsRef","tagDatabase","tag","cn","frequency","category","current","textarea","text","value","position","selectionStart","beforeCursor","substring","words","split","length","filteredSuggestions","filter","item","toLowerCase","includes","sort","a","b","slice","handlePromptChange","newHistory","push","handleTranslate","translated","simulateTranslation","error","console","Promise","resolve","setTimeout","isChinese","test","translations","result","Object","entries","forEach","en","replace","RegExp","applySuggestion","suggestion","currentWordStart","lastIndexOf","newText","newPosition","setSelectionRange","focus","addWeight","weight","start","end","selectionEnd","selectedText","weightedText","removeWeight","cleanText","deleteSelected","toggleFavorite","trimmedPrompt","trim","prev","fav","undo","newIndex","redo","handleCopy","success","handleSave","children","size","fileName","_jsxFileName","lineNumber","columnNumber","onClick","title","ref","onChange","e","target","placeholder","style","fontFamily","map","index","width","disabled","fill","_c","$RefreshReg$"],"sources":["C:/Users/wjx19/Documents/GitHub/I-Prompt/src/components/AdvancedPromptEditor.jsx"],"sourcesContent":["import React, { useState, useRef, useEffect, useCallback } from 'react';\r\nimport { \r\n  Edit3, Languages, Plus, Minus, Heart, Trash2, Copy, \r\n  CheckCircle, Lightbulb, Tag, Zap, Search, X, \r\n  ChevronDown, ChevronUp, Settings, Save, Undo\r\n} from 'lucide-react';\r\nimport { copyToClipboard } from '../utils/clipboard';\r\n\r\n/**\r\n * 高级提示词编辑器组件\r\n * 功能：直接编辑、一键翻译、智能补全、权重调节、删除收藏\r\n */\r\nconst AdvancedPromptEditor = ({ \r\n  initialPrompt = '', \r\n  onSave, \r\n  onClose,\r\n  className = '' \r\n}) => {\r\n  const [prompt, setPrompt] = useState(initialPrompt);\r\n  const [translatedPrompt, setTranslatedPrompt] = useState('');\r\n  const [isTranslating, setIsTranslating] = useState(false);\r\n  const [suggestions, setSuggestions] = useState([]);\r\n  const [showSuggestions, setShowSuggestions] = useState(false);\r\n  const [cursorPosition, setCursorPosition] = useState(0);\r\n  const [currentWord, setCurrentWord] = useState('');\r\n  const [favorites, setFavorites] = useState([]);\r\n  const [history, setHistory] = useState([initialPrompt]);\r\n  const [historyIndex, setHistoryIndex] = useState(0);\r\n  const [copyStatus, setCopyStatus] = useState('');\r\n  const [isExpanded, setIsExpanded] = useState(true);\r\n  \r\n  const textareaRef = useRef(null);\r\n  const suggestionsRef = useRef(null);\r\n\r\n  // 模拟标签数据库（按使用频率排序）\r\n  const tagDatabase = [\r\n    // 质量标签\r\n    { tag: 'masterpiece', cn: '杰作', frequency: 95, category: 'quality' },\r\n    { tag: 'best quality', cn: '最佳质量', frequency: 92, category: 'quality' },\r\n    { tag: 'ultra detailed', cn: '超详细', frequency: 88, category: 'quality' },\r\n    { tag: 'high resolution', cn: '高分辨率', frequency: 85, category: 'quality' },\r\n    { tag: 'professional', cn: '专业级', frequency: 82, category: 'quality' },\r\n    { tag: '8k wallpaper', cn: '8K壁纸', frequency: 78, category: 'quality' },\r\n    \r\n    // 人物标签\r\n    { tag: 'beautiful girl', cn: '美丽女孩', frequency: 90, category: 'character' },\r\n    { tag: 'cute', cn: '可爱', frequency: 87, category: 'character' },\r\n    { tag: 'kawaii', cn: '萌', frequency: 84, category: 'character' },\r\n    { tag: 'portrait', cn: '肖像', frequency: 81, category: 'character' },\r\n    { tag: 'detailed face', cn: '精细面部', frequency: 79, category: 'character' },\r\n    { tag: 'expressive eyes', cn: '有表现力的眼睛', frequency: 76, category: 'character' },\r\n    \r\n    // 风格标签\r\n    { tag: 'anime style', cn: '动漫风格', frequency: 89, category: 'style' },\r\n    { tag: 'realistic', cn: '写实', frequency: 86, category: 'style' },\r\n    { tag: 'photorealistic', cn: '照片级写实', frequency: 83, category: 'style' },\r\n    { tag: 'oil painting', cn: '油画', frequency: 75, category: 'style' },\r\n    { tag: 'watercolor', cn: '水彩', frequency: 72, category: 'style' },\r\n    { tag: 'digital art', cn: '数字艺术', frequency: 80, category: 'style' },\r\n    \r\n    // 光照标签\r\n    { tag: 'cinematic lighting', cn: '电影级光照', frequency: 88, category: 'lighting' },\r\n    { tag: 'soft lighting', cn: '柔和光照', frequency: 85, category: 'lighting' },\r\n    { tag: 'dramatic lighting', cn: '戏剧性光照', frequency: 82, category: 'lighting' },\r\n    { tag: 'golden hour', cn: '黄金时刻', frequency: 79, category: 'lighting' },\r\n    { tag: 'natural lighting', cn: '自然光照', frequency: 76, category: 'lighting' },\r\n    { tag: 'studio lighting', cn: '摄影棚光照', frequency: 73, category: 'lighting' },\r\n    \r\n    // 构图标签\r\n    { tag: 'perfect composition', cn: '完美构图', frequency: 84, category: 'composition' },\r\n    { tag: 'dynamic pose', cn: '动态姿势', frequency: 81, category: 'composition' },\r\n    { tag: 'close-up', cn: '特写', frequency: 78, category: 'composition' },\r\n    { tag: 'wide shot', cn: '远景', frequency: 75, category: 'composition' },\r\n    { tag: 'rule of thirds', cn: '三分法则', frequency: 72, category: 'composition' },\r\n    { tag: 'bird eye view', cn: '鸟瞰视角', frequency: 69, category: 'composition' },\r\n    \r\n    // 效果标签\r\n    { tag: 'depth of field', cn: '景深', frequency: 86, category: 'effects' },\r\n    { tag: 'bokeh', cn: '虚化', frequency: 83, category: 'effects' },\r\n    { tag: 'sharp focus', cn: '锐利对焦', frequency: 80, category: 'effects' },\r\n    { tag: 'motion blur', cn: '运动模糊', frequency: 77, category: 'effects' },\r\n    { tag: 'lens flare', cn: '镜头光晕', frequency: 74, category: 'effects' },\r\n    { tag: 'chromatic aberration', cn: '色差', frequency: 71, category: 'effects' }\r\n  ];\r\n\r\n  // 监听文本变化，触发智能补全\r\n  useEffect(() => {\r\n    if (textareaRef.current) {\r\n      const textarea = textareaRef.current;\r\n      const text = textarea.value;\r\n      const position = textarea.selectionStart;\r\n      \r\n      // 获取当前光标位置的单词\r\n      const beforeCursor = text.substring(0, position);\r\n      const words = beforeCursor.split(/[,\\s]+/);\r\n      const currentWord = words[words.length - 1] || '';\r\n      \r\n      setCurrentWord(currentWord);\r\n      setCursorPosition(position);\r\n      \r\n      // 如果当前单词长度大于1，显示建议\r\n      if (currentWord.length > 1) {\r\n        const filteredSuggestions = tagDatabase\r\n          .filter(item => \r\n            item.tag.toLowerCase().includes(currentWord.toLowerCase()) ||\r\n            item.cn.includes(currentWord)\r\n          )\r\n          .sort((a, b) => b.frequency - a.frequency)\r\n          .slice(0, 8); // 显示8个建议\r\n        \r\n        setSuggestions(filteredSuggestions);\r\n        setShowSuggestions(filteredSuggestions.length > 0);\r\n      } else {\r\n        setShowSuggestions(false);\r\n      }\r\n    }\r\n  }, [prompt]);\r\n\r\n  // 处理文本变化\r\n  const handlePromptChange = useCallback((value) => {\r\n    setPrompt(value);\r\n    \r\n    // 添加到历史记录\r\n    if (value !== history[historyIndex]) {\r\n      const newHistory = history.slice(0, historyIndex + 1);\r\n      newHistory.push(value);\r\n      setHistory(newHistory);\r\n      setHistoryIndex(newHistory.length - 1);\r\n    }\r\n  }, [history, historyIndex]);\r\n\r\n  // 一键翻译功能\r\n  const handleTranslate = async () => {\r\n    setIsTranslating(true);\r\n    try {\r\n      // 这里可以接入真实的翻译API\r\n      // 现在使用模拟翻译\r\n      const translated = await simulateTranslation(prompt);\r\n      setTranslatedPrompt(translated);\r\n    } catch (error) {\r\n      console.error('翻译失败:', error);\r\n    } finally {\r\n      setIsTranslating(false);\r\n    }\r\n  };\r\n\r\n  // 模拟翻译功能\r\n  const simulateTranslation = async (text) => {\r\n    return new Promise((resolve) => {\r\n      setTimeout(() => {\r\n        // 简单的中英文互译模拟\r\n        const isChinese = /[\\u4e00-\\u9fa5]/.test(text);\r\n        if (isChinese) {\r\n          // 中文转英文\r\n          const translations = {\r\n            '美丽女孩': 'beautiful girl',\r\n            '可爱': 'cute',\r\n            '动漫风格': 'anime style',\r\n            '最佳质量': 'best quality',\r\n            '杰作': 'masterpiece',\r\n            '超详细': 'ultra detailed'\r\n          };\r\n          \r\n          let result = text;\r\n          Object.entries(translations).forEach(([cn, en]) => {\r\n            result = result.replace(new RegExp(cn, 'g'), en);\r\n          });\r\n          resolve(result);\r\n        } else {\r\n          // 英文转中文\r\n          const translations = {\r\n            'beautiful girl': '美丽女孩',\r\n            'cute': '可爱',\r\n            'anime style': '动漫风格',\r\n            'best quality': '最佳质量',\r\n            'masterpiece': '杰作',\r\n            'ultra detailed': '超详细'\r\n          };\r\n          \r\n          let result = text;\r\n          Object.entries(translations).forEach(([en, cn]) => {\r\n            result = result.replace(new RegExp(en, 'gi'), cn);\r\n          });\r\n          resolve(result);\r\n        }\r\n      }, 1000);\r\n    });\r\n  };\r\n\r\n  // 应用建议\r\n  const applySuggestion = (suggestion) => {\r\n    const textarea = textareaRef.current;\r\n    const text = textarea.value;\r\n    const position = textarea.selectionStart;\r\n    \r\n    // 找到当前单词的开始位置\r\n    const beforeCursor = text.substring(0, position);\r\n    const words = beforeCursor.split(/[,\\s]+/);\r\n    const currentWordStart = beforeCursor.lastIndexOf(words[words.length - 1]);\r\n    \r\n    // 替换当前单词\r\n    const newText = text.substring(0, currentWordStart) + \r\n                   suggestion.tag + \r\n                   text.substring(position);\r\n    \r\n    handlePromptChange(newText);\r\n    setShowSuggestions(false);\r\n    \r\n    // 设置光标位置\r\n    setTimeout(() => {\r\n      const newPosition = currentWordStart + suggestion.tag.length;\r\n      textarea.setSelectionRange(newPosition, newPosition);\r\n      textarea.focus();\r\n    }, 0);\r\n  };\r\n\r\n  // 添加权重\r\n  const addWeight = (weight = 1.2) => {\r\n    const textarea = textareaRef.current;\r\n    const start = textarea.selectionStart;\r\n    const end = textarea.selectionEnd;\r\n    const selectedText = textarea.value.substring(start, end);\r\n    \r\n    if (selectedText) {\r\n      const weightedText = `(${selectedText}:${weight})`;\r\n      const newText = textarea.value.substring(0, start) + \r\n                     weightedText + \r\n                     textarea.value.substring(end);\r\n      handlePromptChange(newText);\r\n      \r\n      // 重新选中加权后的文本\r\n      setTimeout(() => {\r\n        textarea.setSelectionRange(start, start + weightedText.length);\r\n        textarea.focus();\r\n      }, 0);\r\n    }\r\n  };\r\n\r\n  // 移除权重\r\n  const removeWeight = () => {\r\n    const textarea = textareaRef.current;\r\n    const start = textarea.selectionStart;\r\n    const end = textarea.selectionEnd;\r\n    const selectedText = textarea.value.substring(start, end);\r\n    \r\n    // 移除权重标记 (text:weight) 或 ((text))\r\n    const cleanText = selectedText\r\n      .replace(/\\(([^:)]+):[0-9.]+\\)/g, '$1')\r\n      .replace(/\\(\\(([^)]+)\\)\\)/g, '$1')\r\n      .replace(/\\(([^)]+)\\)/g, '$1');\r\n    \r\n    if (cleanText !== selectedText) {\r\n      const newText = textarea.value.substring(0, start) + \r\n                     cleanText + \r\n                     textarea.value.substring(end);\r\n      handlePromptChange(newText);\r\n    }\r\n  };\r\n\r\n  // 删除选中的标签\r\n  const deleteSelected = () => {\r\n    const textarea = textareaRef.current;\r\n    const start = textarea.selectionStart;\r\n    const end = textarea.selectionEnd;\r\n    \r\n    if (start !== end) {\r\n      const newText = textarea.value.substring(0, start) + \r\n                     textarea.value.substring(end);\r\n      handlePromptChange(newText);\r\n      \r\n      setTimeout(() => {\r\n        textarea.setSelectionRange(start, start);\r\n        textarea.focus();\r\n      }, 0);\r\n    }\r\n  };\r\n\r\n  // 收藏当前提示词\r\n  const toggleFavorite = () => {\r\n    const trimmedPrompt = prompt.trim();\r\n    if (trimmedPrompt) {\r\n      setFavorites(prev => \r\n        prev.includes(trimmedPrompt)\r\n          ? prev.filter(fav => fav !== trimmedPrompt)\r\n          : [...prev, trimmedPrompt]\r\n      );\r\n    }\r\n  };\r\n\r\n  // 撤销操作\r\n  const undo = () => {\r\n    if (historyIndex > 0) {\r\n      const newIndex = historyIndex - 1;\r\n      setHistoryIndex(newIndex);\r\n      setPrompt(history[newIndex]);\r\n    }\r\n  };\r\n\r\n  // 重做操作\r\n  const redo = () => {\r\n    if (historyIndex < history.length - 1) {\r\n      const newIndex = historyIndex + 1;\r\n      setHistoryIndex(newIndex);\r\n      setPrompt(history[newIndex]);\r\n    }\r\n  };\r\n\r\n  // 复制功能\r\n  const handleCopy = async (text) => {\r\n    const success = await copyToClipboard(text || prompt);\r\n    setCopyStatus(success ? 'copied' : 'error');\r\n    setTimeout(() => setCopyStatus(''), 2000);\r\n  };\r\n\r\n  // 保存功能\r\n  const handleSave = () => {\r\n    if (onSave) {\r\n      onSave(prompt);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className={`bg-white rounded-xl shadow-lg border border-gray-200 ${className}`}>\r\n      {/* 头部工具栏 */}\r\n      <div className=\"flex items-center justify-between p-4 border-b border-gray-200\">\r\n        <div className=\"flex items-center gap-2\">\r\n          <Edit3 className=\"text-blue-600\" size={20} />\r\n          <h3 className=\"font-semibold text-gray-900\">高级提示词编辑器</h3>\r\n          <span className=\"text-xs bg-blue-100 text-blue-600 px-2 py-1 rounded-full\">\r\n            智能补全 | 权重调节 | 一键翻译\r\n          </span>\r\n        </div>\r\n        <div className=\"flex items-center gap-2\">\r\n          <button\r\n            onClick={() => setIsExpanded(!isExpanded)}\r\n            className=\"p-2 text-gray-600 hover:bg-gray-100 rounded-lg transition-colors\"\r\n            title={isExpanded ? '收起' : '展开'}\r\n          >\r\n            {isExpanded ? <ChevronUp size={16} /> : <ChevronDown size={16} />}\r\n          </button>\r\n          {onClose && (\r\n            <button\r\n              onClick={onClose}\r\n              className=\"p-2 text-gray-600 hover:bg-gray-100 rounded-lg transition-colors\"\r\n              title=\"关闭\"\r\n            >\r\n              <X size={16} />\r\n            </button>\r\n          )}\r\n        </div>\r\n      </div>\r\n\r\n      {isExpanded && (\r\n        <div className=\"p-4 space-y-4\">\r\n          {/* 主编辑区域 */}\r\n          <div className=\"relative\">\r\n            <textarea\r\n              ref={textareaRef}\r\n              value={prompt}\r\n              onChange={(e) => handlePromptChange(e.target.value)}\r\n              placeholder=\"输入您的提示词，支持中英文混合输入，输入时会自动显示智能建议...\"\r\n              className=\"w-full h-32 p-4 border border-gray-300 rounded-lg resize-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all font-mono text-sm leading-relaxed\"\r\n              style={{ fontFamily: 'Monaco, Consolas, \"Courier New\", monospace' }}\r\n            />\r\n            \r\n            {/* 智能建议下拉框 */}\r\n            {showSuggestions && suggestions.length > 0 && (\r\n              <div \r\n                ref={suggestionsRef}\r\n                className=\"absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg max-h-64 overflow-y-auto\"\r\n              >\r\n                <div className=\"p-2 bg-gray-50 border-b border-gray-200\">\r\n                  <div className=\"flex items-center gap-2 text-xs text-gray-600\">\r\n                    <Lightbulb size={12} />\r\n                    <span>智能建议 (按使用频率排序)</span>\r\n                  </div>\r\n                </div>\r\n                {suggestions.map((suggestion, index) => (\r\n                  <div\r\n                    key={index}\r\n                    onClick={() => applySuggestion(suggestion)}\r\n                    className=\"flex items-center justify-between p-3 hover:bg-blue-50 cursor-pointer border-b border-gray-100 last:border-b-0\"\r\n                  >\r\n                    <div className=\"flex-1\">\r\n                      <div className=\"flex items-center gap-2\">\r\n                        <span className=\"font-mono text-sm text-gray-900\">\r\n                          {suggestion.tag}\r\n                        </span>\r\n                        <span className={`px-2 py-1 text-xs rounded-full ${\r\n                          suggestion.category === 'quality' ? 'bg-purple-100 text-purple-600' :\r\n                          suggestion.category === 'character' ? 'bg-blue-100 text-blue-600' :\r\n                          suggestion.category === 'style' ? 'bg-green-100 text-green-600' :\r\n                          suggestion.category === 'lighting' ? 'bg-yellow-100 text-yellow-600' :\r\n                          suggestion.category === 'composition' ? 'bg-pink-100 text-pink-600' :\r\n                          'bg-gray-100 text-gray-600'\r\n                        }`}>\r\n                          {suggestion.category}\r\n                        </span>\r\n                      </div>\r\n                      <div className=\"text-xs text-gray-500 mt-1\">\r\n                        {suggestion.cn} • 使用率 {suggestion.frequency}%\r\n                      </div>\r\n                    </div>\r\n                    <div className=\"flex items-center gap-1\">\r\n                      <div className=\"w-12 bg-gray-200 rounded-full h-1\">\r\n                        <div \r\n                          className=\"bg-blue-500 h-1 rounded-full\" \r\n                          style={{ width: `${suggestion.frequency}%` }}\r\n                        />\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                ))}\r\n              </div>\r\n            )}\r\n          </div>\r\n\r\n          {/* 工具栏 */}\r\n          <div className=\"flex flex-wrap gap-2 p-3 bg-gray-50 rounded-lg\">\r\n            {/* 权重控制 */}\r\n            <div className=\"flex items-center gap-1 bg-white rounded-lg p-1\">\r\n              <span className=\"text-xs text-gray-600 px-2\">权重:</span>\r\n              <button\r\n                onClick={() => addWeight(1.1)}\r\n                className=\"px-2 py-1 text-xs bg-orange-100 text-orange-600 rounded hover:bg-orange-200 transition-colors\"\r\n                title=\"添加轻微权重 (1.1)\"\r\n              >\r\n                +1.1\r\n              </button>\r\n              <button\r\n                onClick={() => addWeight(1.2)}\r\n                className=\"px-2 py-1 text-xs bg-orange-100 text-orange-600 rounded hover:bg-orange-200 transition-colors\"\r\n                title=\"添加标准权重 (1.2)\"\r\n              >\r\n                +1.2\r\n              </button>\r\n              <button\r\n                onClick={() => addWeight(1.5)}\r\n                className=\"px-2 py-1 text-xs bg-orange-100 text-orange-600 rounded hover:bg-orange-200 transition-colors\"\r\n                title=\"添加强权重 (1.5)\"\r\n              >\r\n                +1.5\r\n              </button>\r\n              <button\r\n                onClick={removeWeight}\r\n                className=\"px-2 py-1 text-xs bg-gray-100 text-gray-600 rounded hover:bg-gray-200 transition-colors\"\r\n                title=\"移除权重\"\r\n              >\r\n                <Minus size={12} />\r\n              </button>\r\n            </div>\r\n\r\n            {/* 编辑操作 */}\r\n            <div className=\"flex items-center gap-1 bg-white rounded-lg p-1\">\r\n              <button\r\n                onClick={undo}\r\n                disabled={historyIndex <= 0}\r\n                className=\"p-1 text-gray-600 hover:bg-gray-100 rounded disabled:opacity-50 disabled:cursor-not-allowed transition-colors\"\r\n                title=\"撤销\"\r\n              >\r\n                <Undo size={14} />\r\n              </button>\r\n              <button\r\n                onClick={deleteSelected}\r\n                className=\"p-1 text-red-600 hover:bg-red-100 rounded transition-colors\"\r\n                title=\"删除选中\"\r\n              >\r\n                <Trash2 size={14} />\r\n              </button>\r\n              <button\r\n                onClick={toggleFavorite}\r\n                className={`p-1 rounded transition-colors ${\r\n                  favorites.includes(prompt.trim())\r\n                    ? 'text-red-600 bg-red-100 hover:bg-red-200'\r\n                    : 'text-gray-600 hover:bg-gray-100'\r\n                }`}\r\n                title={favorites.includes(prompt.trim()) ? '取消收藏' : '收藏'}\r\n              >\r\n                <Heart size={14} fill={favorites.includes(prompt.trim()) ? 'currentColor' : 'none'} />\r\n              </button>\r\n            </div>\r\n\r\n            {/* 功能操作 */}\r\n            <div className=\"flex items-center gap-1 bg-white rounded-lg p-1\">\r\n              <button\r\n                onClick={handleTranslate}\r\n                disabled={isTranslating}\r\n                className=\"flex items-center gap-1 px-2 py-1 text-xs bg-blue-100 text-blue-600 rounded hover:bg-blue-200 disabled:opacity-50 transition-colors\"\r\n                title=\"一键翻译\"\r\n              >\r\n                <Languages size={12} />\r\n                {isTranslating ? '翻译中...' : '翻译'}\r\n              </button>\r\n              <button\r\n                onClick={() => handleCopy()}\r\n                className=\"flex items-center gap-1 px-2 py-1 text-xs bg-green-100 text-green-600 rounded hover:bg-green-200 transition-colors\"\r\n                title=\"复制提示词\"\r\n              >\r\n                {copyStatus === 'copied' ? <CheckCircle size={12} /> : <Copy size={12} />}\r\n                复制\r\n              </button>\r\n              <button\r\n                onClick={handleSave}\r\n                className=\"flex items-center gap-1 px-2 py-1 text-xs bg-purple-100 text-purple-600 rounded hover:bg-purple-200 transition-colors\"\r\n                title=\"保存提示词\"\r\n              >\r\n                <Save size={12} />\r\n                保存\r\n              </button>\r\n            </div>\r\n          </div>\r\n\r\n          {/* 翻译结果 */}\r\n          {translatedPrompt && (\r\n            <div className=\"p-4 bg-blue-50 rounded-lg border border-blue-200\">\r\n              <div className=\"flex items-center justify-between mb-2\">\r\n                <div className=\"flex items-center gap-2\">\r\n                  <Languages className=\"text-blue-600\" size={16} />\r\n                  <span className=\"text-sm font-medium text-blue-800\">翻译结果</span>\r\n                </div>\r\n                <button\r\n                  onClick={() => handleCopy(translatedPrompt)}\r\n                  className=\"p-1 text-blue-600 hover:bg-blue-200 rounded transition-colors\"\r\n                  title=\"复制翻译结果\"\r\n                >\r\n                  <Copy size={14} />\r\n                </button>\r\n              </div>\r\n              <p className=\"text-sm font-mono text-blue-900 leading-relaxed\">\r\n                {translatedPrompt}\r\n              </p>\r\n            </div>\r\n          )}\r\n\r\n          {/* 统计信息 */}\r\n          <div className=\"flex items-center justify-between text-xs text-gray-500 pt-2 border-t border-gray-200\">\r\n            <div className=\"flex items-center gap-4\">\r\n              <span>字符数: {prompt.length}</span>\r\n              <span>标签数: {prompt.split(',').filter(tag => tag.trim()).length}</span>\r\n              <span>历史记录: {historyIndex + 1}/{history.length}</span>\r\n            </div>\r\n            <div className=\"flex items-center gap-2\">\r\n              {favorites.includes(prompt.trim()) && (\r\n                <span className=\"flex items-center gap-1 text-red-600\">\r\n                  <Heart size={12} fill=\"currentColor\" />\r\n                  已收藏\r\n                </span>\r\n              )}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* 复制状态提示 */}\r\n      {copyStatus && (\r\n        <div className={`fixed bottom-4 right-4 px-4 py-2 rounded-lg text-white text-sm transition-all duration-300 shadow-lg z-50 ${\r\n          copyStatus === 'copied' ? 'bg-green-600' : 'bg-red-600'\r\n        }`}>\r\n          {copyStatus === 'copied' ? '✅ 已复制到剪贴板' : '❌ 复制失败'}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AdvancedPromptEditor; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}