{"ast":null,"code":"import _objectSpread from\"C:/Users/wjx19/Documents/GitHub/I-Prompt/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useRef,useEffect}from'react';import{Plus,Search,Copy,Heart,X,Languages,ChevronDown,ChevronRight,Tag as TagIcon,Sparkles,Bookmark,Clock,TrendingUp,Edit3,Minus,Trash2,Star,Weight,Zap,ChevronLeft,ChevronRight as ChevronRightIcon,EyeOff,Eye,Settings,TestTube,CheckCircle,XCircle}from'lucide-react';import{copyToClipboard}from'../utils/clipboard';import{translateText,translateTag,getAvailableTranslators,testTranslator,batchTranslate}from'../services/translationService';import{TAG_DATABASE,searchTags,getPopularTags}from'../constants/tagDatabase';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const PromptLibraryPage=()=>{var _TAG_DATABASE$selecte,_TAG_DATABASE$selecte2,_TAG_DATABASE$selecte3,_TAG_DATABASE$selecte4;// 提示词编辑状态\nconst[prompt,setPrompt]=useState('');const[promptHistory,setPromptHistory]=useState([]);// 提示词编辑器状态\nconst[selectedTags,setSelectedTags]=useState([]);const[disabledTags,setDisabledTags]=useState(new Set());const[translatedTags,setTranslatedTags]=useState({});const[hoveredTag,setHoveredTag]=useState(null);// 翻译设置状态\nconst[availableTranslators,setAvailableTranslators]=useState({});const[selectedTranslator,setSelectedTranslator]=useState('mymemory');const[showTranslatorSettings,setShowTranslatorSettings]=useState(false);const[translatorStatus,setTranslatorStatus]=useState({});// 标签库状态\nconst[selectedCategory,setSelectedCategory]=useState('favorites');const[selectedSubcategory,setSelectedSubcategory]=useState(null);const[expandedCategories,setExpandedCategories]=useState({favorites:true});const[searchQuery,setSearchQuery]=useState('');const[searchResults,setSearchResults]=useState([]);// UI状态\nconst[favorites,setFavorites]=useState([]);const[copyStatus,setCopyStatus]=useState('');const textareaRef=useRef(null);// 加载翻译引擎列表\nuseEffect(()=>{loadTranslators();},[]);const loadTranslators=async()=>{try{const translators=await getAvailableTranslators();setAvailableTranslators(translators);}catch(error){console.error('加载翻译引擎失败:',error);}};// 实时搜索建议\nuseEffect(()=>{if(searchQuery.trim()){const results=searchTags(searchQuery).slice(0,20);setSearchResults(results);}else{setSearchResults([]);}},[searchQuery]);// 同步提示词和选中标签\nuseEffect(()=>{const tagsFromPrompt=prompt.split(',').map(tag=>tag.trim()).filter(tag=>tag);setSelectedTags(tagsFromPrompt);},[prompt]);// 更新英文提示词（排除禁用的标签）\nconst updatePrompt=tags=>{const enabledTags=tags.filter((_,index)=>!disabledTags.has(index));const newPrompt=enabledTags.join(', ');setPrompt(newPrompt);// 添加到历史记录\nif(newPrompt.trim()&&!promptHistory.includes(newPrompt.trim())){setPromptHistory(prev=>[newPrompt.trim(),...prev.slice(0,9)]);}};// 处理提示词变化\nconst handlePromptChange=value=>{setPrompt(value);// 添加到历史记录\nif(value.trim()&&!promptHistory.includes(value.trim())){setPromptHistory(prev=>[value.trim(),...prev.slice(0,9)]);}};// 添加标签到提示词\nconst addTagToPrompt=tag=>{const newTags=[...selectedTags,tag.en];setSelectedTags(newTags);updatePrompt(newTags);// 聚焦到文本框末尾\nif(textareaRef.current){textareaRef.current.focus();textareaRef.current.setSelectionRange(prompt.length,prompt.length);}};// 删除标签\nconst deleteTag=index=>{const newTags=selectedTags.filter((_,i)=>i!==index);const newDisabled=new Set([...disabledTags].map(i=>i>index?i-1:i).filter(i=>i!==index));setSelectedTags(newTags);setDisabledTags(newDisabled);updatePrompt(newTags);};// 切换禁用状态\nconst toggleDisabled=index=>{const newDisabled=new Set(disabledTags);if(newDisabled.has(index)){newDisabled.delete(index);}else{newDisabled.add(index);}setDisabledTags(newDisabled);updatePrompt(selectedTags);};// 解析标签，提取权重和括号信息\nconst parseTag=tag=>{// 检测权重 (tag:1.2)\nconst weightMatch=tag.match(/^(.+?):([0-9.]+)$/);if(weightMatch){return{text:weightMatch[1],weight:parseFloat(weightMatch[2]),bracketType:'none',brackets:0};}// 检测括号类型和层级\nlet brackets=0;let text=tag;let bracketType='none';// 检测圆括号 ()\nif(text.startsWith('(')&&text.endsWith(')')){bracketType='round';while(text.startsWith('(')&&text.endsWith(')')){brackets++;text=text.slice(1,-1);}}// 检测花括号 {}\nelse if(text.startsWith('{')&&text.endsWith('}')){bracketType='curly';while(text.startsWith('{')&&text.endsWith('}')){brackets++;text=text.slice(1,-1);}}// 检测方括号 []\nelse if(text.startsWith('[')&&text.endsWith(']')){bracketType='square';while(text.startsWith('[')&&text.endsWith(']')){brackets++;text=text.slice(1,-1);}}return{text,weight:1.0,bracketType,brackets};};// 构建标签字符串\nconst buildTag=(text,weight,bracketType,brackets)=>{let result=text;// 添加权重\nif(weight!==1.0){result=\"\".concat(text,\":\").concat(weight.toFixed(1));}// 添加括号\nif(bracketType==='round'){for(let i=0;i<brackets;i++){result=\"(\".concat(result,\")\");}}else if(bracketType==='curly'){for(let i=0;i<brackets;i++){result=\"{\".concat(result,\"}\");}}else if(bracketType==='square'){for(let i=0;i<brackets;i++){result=\"[\".concat(result,\"]\");}}return result;};// 调整权重\nconst adjustWeight=(index,delta)=>{const tag=selectedTags[index];const parsed=parseTag(tag);const newWeight=Math.max(0.1,Math.min(2.0,parsed.weight+delta));const newTag=buildTag(parsed.text,newWeight,parsed.bracketType,parsed.brackets);const newTags=[...selectedTags];newTags[index]=newTag;setSelectedTags(newTags);updatePrompt(newTags);};// 调整括号\nconst adjustBrackets=(index,bracketType,delta)=>{const tag=selectedTags[index];const parsed=parseTag(tag);// 如果要增加括号且当前没有括号，或者类型相同，才允许调整\nif(delta>0&&parsed.bracketType!=='none'&&parsed.bracketType!==bracketType){return;// 不允许混用不同类型的括号\n}const newBrackets=Math.max(0,Math.min(5,parsed.brackets+delta));const newBracketType=newBrackets===0?'none':bracketType;const newTag=buildTag(parsed.text,parsed.weight,newBracketType,newBrackets);const newTags=[...selectedTags];newTags[index]=newTag;setSelectedTags(newTags);updatePrompt(newTags);};// 测试翻译引擎\nconst handleTestTranslator=async translatorKey=>{setTranslatorStatus(prev=>_objectSpread(_objectSpread({},prev),{},{[translatorKey]:'testing'}));try{const result=await testTranslator(translatorKey);setTranslatorStatus(prev=>_objectSpread(_objectSpread({},prev),{},{[translatorKey]:result.success?'available':'unavailable'}));if(result.success){setCopyStatus('test-success');}else{setCopyStatus('test-failed');}}catch(error){setTranslatorStatus(prev=>_objectSpread(_objectSpread({},prev),{},{[translatorKey]:'unavailable'}));setCopyStatus('test-failed');}setTimeout(()=>setCopyStatus(''),2000);};// 一键翻译所有未翻译的标签\nconst translateAllTags=async()=>{const untranslatedTags=selectedTags.filter(tag=>{const parsed=parseTag(tag);return!translatedTags[parsed.text];});if(untranslatedTags.length===0){setCopyStatus('no-untranslated');setTimeout(()=>setCopyStatus(''),2000);return;}setCopyStatus('translating');try{const texts=untranslatedTags.map(tag=>parseTag(tag).text);const results=await batchTranslate(texts,{translator:selectedTranslator,targetLang:'zh',sourceLang:'auto'});const newTranslations={};results.forEach(result=>{if(result.success){newTranslations[result.original]=result.translated;}});setTranslatedTags(prev=>_objectSpread(_objectSpread({},prev),newTranslations));setCopyStatus('translate-success');}catch(error){console.error('批量翻译失败:',error);setCopyStatus('translate-error');}setTimeout(()=>setCopyStatus(''),2000);};// 翻译单个标签\nconst translateSingleTag=async tag=>{// 提取纯文本进行翻译\nconst parsed=parseTag(tag);const pureText=parsed.text;if(translatedTags[pureText]){return translatedTags[pureText];}try{const translated=await translateTag(pureText,{translator:selectedTranslator,targetLang:'zh',sourceLang:'auto'});setTranslatedTags(prev=>_objectSpread(_objectSpread({},prev),{},{[pureText]:translated}));return translated;}catch(error){console.error('翻译失败:',error);return pureText;}};// 复制标签\nconst copyTag=async tag=>{const success=await copyToClipboard(tag);setCopyStatus(success?'copied':'error');setTimeout(()=>setCopyStatus(''),2000);};// 收藏标签\nconst favoriteTag=tag=>{const parsed=parseTag(tag);const tagObj={en:parsed.text,cn:translatedTags[parsed.text]||parsed.text,frequency:80};toggleFavorite(tagObj);};// 复制功能\nconst handleCopy=async text=>{const success=await copyToClipboard(text||prompt);setCopyStatus(success?'copied':'error');setTimeout(()=>setCopyStatus(''),2000);};// 收藏功能\nconst toggleFavorite=tag=>{setFavorites(prev=>{const isAlreadyFavorited=prev.some(fav=>fav.en===tag.en);if(isAlreadyFavorited){return prev.filter(fav=>fav.en!==tag.en);}else{return[...prev,tag];}});};// 分类展开/收起\nconst toggleCategory=categoryKey=>{setExpandedCategories(prev=>_objectSpread(_objectSpread({},prev),{},{[categoryKey]:!prev[categoryKey]}));};// 选择分类\nconst selectCategory=function(categoryKey){let subcategoryKey=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;setSelectedCategory(categoryKey);setSelectedSubcategory(subcategoryKey);};// 获取当前显示的标签\nconst getCurrentTags=()=>{if(searchQuery.trim()){return searchResults;}if(selectedCategory==='favorites'){if(selectedSubcategory==='personal'){return favorites;}else{// 显示热门标签\nreturn getPopularTags(20);}}const category=TAG_DATABASE[selectedCategory];if(!category)return[];if(selectedSubcategory){const subcategory=category.subcategories[selectedSubcategory];return subcategory?subcategory.tags:[];}// 返回该分类下所有标签\nconst allTags=[];Object.values(category.subcategories).forEach(subcategory=>{allTags.push(...subcategory.tags);});return allTags;};// 动态更新TAG_DATABASE中的收藏标签\nuseEffect(()=>{if(TAG_DATABASE.favorites&&TAG_DATABASE.favorites.subcategories.personal){TAG_DATABASE.favorites.subcategories.personal.tags=favorites;}},[favorites]);const currentTags=getCurrentTags();return/*#__PURE__*/_jsxs(\"div\",{className:\"min-h-screen bg-gradient-to-br from-blue-50 via-white to-purple-50\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"bg-white/80 backdrop-blur-sm border-b border-gray-200 px-6 py-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-7xl mx-auto\",children:[/*#__PURE__*/_jsxs(\"h1\",{className:\"text-2xl font-bold text-gray-900 mb-2 flex items-center\",children:[/*#__PURE__*/_jsx(Sparkles,{className:\"text-blue-600 mr-3\",size:28}),\"\\u667A\\u80FD\\u63D0\\u793A\\u8BCD\\u5E93 3.0\"]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600\",children:\"\\u4E13\\u4E1A\\u7684\\u63D0\\u793A\\u8BCD\\u7F16\\u8F91\\u548C\\u7BA1\\u7406\\u5DE5\\u5177 \\u2022 \\u652F\\u6301\\u591A\\u5F15\\u64CE\\u7FFB\\u8BD1 \\u2022 \\u667A\\u80FD\\u5206\\u7C7B \\u2022 \\u8BA9AI\\u7ED8\\u753B\\u521B\\u4F5C\\u66F4\\u9AD8\\u6548\"})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-7xl mx-auto p-6 space-y-6\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"bg-white rounded-xl shadow-lg border border-gray-200\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"p-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between mb-4\",children:[/*#__PURE__*/_jsxs(\"h2\",{className:\"text-lg font-semibold text-gray-900 flex items-center\",children:[/*#__PURE__*/_jsx(TagIcon,{className:\"text-blue-600 mr-2\",size:20}),\"\\u82F1\\u6587\\u63D0\\u793A\\u8BCD\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2\",children:[/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setShowTranslatorSettings(!showTranslatorSettings),className:\"flex items-center gap-2 px-3 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm\",children:[/*#__PURE__*/_jsx(Settings,{size:14}),\"\\u7FFB\\u8BD1\\u8BBE\\u7F6E\"]}),/*#__PURE__*/_jsxs(\"button\",{onClick:translateAllTags,className:\"flex items-center gap-2 px-3 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors text-sm\",children:[/*#__PURE__*/_jsx(Languages,{size:14}),\"\\u4E00\\u952E\\u7FFB\\u8BD1\"]}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>handleCopy(),className:\"flex items-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors\",children:[/*#__PURE__*/_jsx(Copy,{size:16}),\"\\u590D\\u5236\"]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>{setPrompt('');setSelectedTags([]);setDisabledTags(new Set());},className:\"p-2 text-gray-500 hover:bg-gray-100 rounded-lg transition-colors\",children:/*#__PURE__*/_jsx(X,{size:16})})]})]}),/*#__PURE__*/_jsx(\"textarea\",{ref:textareaRef,value:prompt,onChange:e=>handlePromptChange(e.target.value),placeholder:\"\\u8F93\\u5165\\u6216\\u70B9\\u51FB\\u4E0B\\u65B9\\u6807\\u7B7E\\u6DFB\\u52A0\\u63D0\\u793A\\u8BCD...\",className:\"w-full h-32 p-4 border border-gray-300 rounded-lg resize-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all font-mono text-sm overflow-y-auto\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between text-xs text-gray-500 mt-2\",children:[/*#__PURE__*/_jsxs(\"span\",{children:[\"\\u5B57\\u7B26\\u6570: \",prompt.length]}),/*#__PURE__*/_jsxs(\"span\",{children:[\"\\u6807\\u7B7E\\u6570: \",selectedTags.filter((_,i)=>!disabledTags.has(i)).length,\"/\",selectedTags.length]})]}),promptHistory.length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"mt-4 p-4 bg-gray-50 rounded-lg\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2 mb-2\",children:[/*#__PURE__*/_jsx(Clock,{size:16,className:\"text-gray-600\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sm font-medium text-gray-700\",children:\"\\u6700\\u8FD1\\u4F7F\\u7528\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"flex flex-wrap gap-2\",children:promptHistory.slice(0,5).map((historyPrompt,index)=>/*#__PURE__*/_jsx(\"button\",{onClick:()=>setPrompt(historyPrompt),className:\"px-3 py-1 text-xs bg-white border border-gray-200 rounded-full hover:bg-blue-50 hover:border-blue-300 transition-colors truncate max-w-xs\",children:historyPrompt},index))})]})]})}),showTranslatorSettings&&/*#__PURE__*/_jsx(TranslatorSettings,{availableTranslators:availableTranslators,selectedTranslator:selectedTranslator,setSelectedTranslator:setSelectedTranslator,translatorStatus:translatorStatus,onTestTranslator:handleTestTranslator,onClose:()=>setShowTranslatorSettings(false)}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-white rounded-xl shadow-lg border border-gray-200\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"p-6\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-between mb-4\",children:/*#__PURE__*/_jsxs(\"h2\",{className:\"text-lg font-semibold text-gray-900 flex items-center\",children:[/*#__PURE__*/_jsx(Edit3,{className:\"text-blue-600 mr-2\",size:20}),\"\\u63D0\\u793A\\u8BCD\\u7F16\\u8F91\\u533A\",/*#__PURE__*/_jsx(\"span\",{className:\"text-xs bg-blue-100 text-blue-600 px-2 py-1 rounded-full ml-2\",children:\"\\u60AC\\u505C\\u7F16\\u8F91 \\u2022 \\u6743\\u91CD\\u8C03\\u8282 \\u2022 \\u62EC\\u53F7\\u63A7\\u5236\"})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"border border-gray-300 rounded-lg p-6 bg-blue-50/20 overflow-y-auto\",style:{minHeight:'200px',maxHeight:'1200px',height:'auto'},children:selectedTags.length===0?/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-center h-32 text-gray-500\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(TagIcon,{size:32,className:\"mx-auto mb-2 opacity-50\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm\",children:\"\\u70B9\\u51FB\\u4E0B\\u65B9\\u6807\\u7B7E\\u5E93\\u6DFB\\u52A0\\u6807\\u7B7E\"})]})}):/*#__PURE__*/_jsx(\"div\",{className:\"flex flex-wrap gap-4\",children:selectedTags.map((tag,index)=>/*#__PURE__*/_jsx(TagPill,{tag:tag,index:index,isDisabled:disabledTags.has(index),onDelete:()=>deleteTag(index),onToggleDisabled:()=>toggleDisabled(index),onAdjustWeight:delta=>adjustWeight(index,delta),onAdjustBrackets:(bracketType,delta)=>adjustBrackets(index,bracketType,delta),onCopy:()=>copyTag(tag),onFavorite:()=>favoriteTag(tag),onTranslate:translateSingleTag,translatedTags:translatedTags,hoveredTag:hoveredTag,setHoveredTag:setHoveredTag},index))})})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 lg:grid-cols-4 gap-6\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"lg:col-span-1\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-xl shadow-lg border border-gray-200 p-4 sticky top-6\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"mb-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"relative\",children:[/*#__PURE__*/_jsx(Search,{className:\"absolute left-3 top-3 text-gray-400\",size:16}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:searchQuery,onChange:e=>setSearchQuery(e.target.value),placeholder:\"\\u641C\\u7D22\\u6807\\u7B7E...\",className:\"w-full pl-9 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm\"})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"space-y-1\",children:Object.entries(TAG_DATABASE).map(_ref=>{let[categoryKey,category]=_ref;return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"button\",{onClick:()=>toggleCategory(categoryKey),className:\"w-full flex items-center justify-between p-3 rounded-lg transition-colors \".concat(selectedCategory===categoryKey&&!selectedSubcategory?'bg-blue-50 text-blue-700 border border-blue-200':'hover:bg-gray-50'),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-lg\",children:category.icon}),/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:category.name})]}),expandedCategories[categoryKey]?/*#__PURE__*/_jsx(ChevronDown,{size:16}):/*#__PURE__*/_jsx(ChevronRight,{size:16})]}),expandedCategories[categoryKey]&&/*#__PURE__*/_jsx(\"div\",{className:\"ml-4 mt-1 space-y-1\",children:Object.entries(category.subcategories).map(_ref2=>{let[subcategoryKey,subcategory]=_ref2;return/*#__PURE__*/_jsx(\"button\",{onClick:()=>selectCategory(categoryKey,subcategoryKey),className:\"w-full text-left p-2 rounded-lg text-sm transition-colors \".concat(selectedCategory===categoryKey&&selectedSubcategory===subcategoryKey?'bg-blue-50 text-blue-700':'hover:bg-gray-50 text-gray-600'),children:subcategory.name},subcategoryKey);})})]},categoryKey);})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"lg:col-span-3\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-xl shadow-lg border border-gray-200\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"p-6 border-b border-gray-200\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold text-gray-900\",children:searchQuery?'搜索结果':selectedSubcategory?\"\".concat((_TAG_DATABASE$selecte=TAG_DATABASE[selectedCategory])===null||_TAG_DATABASE$selecte===void 0?void 0:_TAG_DATABASE$selecte.name,\" - \").concat((_TAG_DATABASE$selecte2=TAG_DATABASE[selectedCategory])===null||_TAG_DATABASE$selecte2===void 0?void 0:(_TAG_DATABASE$selecte3=_TAG_DATABASE$selecte2.subcategories[selectedSubcategory])===null||_TAG_DATABASE$selecte3===void 0?void 0:_TAG_DATABASE$selecte3.name):((_TAG_DATABASE$selecte4=TAG_DATABASE[selectedCategory])===null||_TAG_DATABASE$selecte4===void 0?void 0:_TAG_DATABASE$selecte4.name)||'标签库'}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600 mt-1\",children:searchQuery?\"\\u627E\\u5230 \".concat(currentTags.length,\" \\u4E2A\\u76F8\\u5173\\u6807\\u7B7E\"):\"\\u5171 \".concat(currentTags.length,\" \\u4E2A\\u6807\\u7B7E\")})]}),/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center gap-2\",children:/*#__PURE__*/_jsx(\"span\",{className:\"text-xs bg-blue-100 text-blue-600 px-2 py-1 rounded-full\",children:\"\\u70B9\\u51FB\\u6807\\u7B7E\\u6DFB\\u52A0\\u5230\\u63D0\\u793A\\u8BCD\"})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"p-6\",children:currentTags.length===0?/*#__PURE__*/_jsxs(\"div\",{className:\"text-center py-12\",children:[/*#__PURE__*/_jsx(TagIcon,{className:\"mx-auto text-gray-400 mb-4\",size:48}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-500 mb-4\",children:searchQuery?'未找到匹配的标签':'该分类暂无标签'})]}):/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-1 sm:grid-cols-2 xl:grid-cols-3 gap-3\",children:currentTags.map((tag,index)=>/*#__PURE__*/_jsx(TagCard,{tag:tag,onAdd:()=>addTagToPrompt(tag),onToggleFavorite:()=>toggleFavorite(tag),isFavorited:favorites.some(fav=>fav.en===tag.en)},\"\".concat(tag.en,\"-\").concat(index)))})})]})})]})]}),copyStatus&&/*#__PURE__*/_jsx(\"div\",{className:\"fixed bottom-4 right-4 px-4 py-2 rounded-lg text-white text-sm transition-all duration-300 shadow-lg z-50 \".concat(copyStatus==='copied'?'bg-green-600':copyStatus==='translating'?'bg-blue-600':copyStatus==='translate-success'?'bg-green-600':copyStatus==='translate-error'?'bg-red-600':copyStatus==='no-untranslated'?'bg-yellow-600':copyStatus==='test-success'?'bg-green-600':copyStatus==='test-failed'?'bg-red-600':'bg-red-600'),children:copyStatus==='copied'?'✅ 已复制到剪贴板':copyStatus==='translating'?'🔄 正在翻译中...':copyStatus==='translate-success'?'✅ 翻译完成':copyStatus==='translate-error'?'❌ 翻译失败':copyStatus==='no-untranslated'?'💡 所有标签已翻译':copyStatus==='test-success'?'✅ 测试成功':copyStatus==='test-failed'?'❌ 测试失败':'❌ 操作失败'})]});};/**\r\n * 翻译引擎设置组件\r\n */const TranslatorSettings=_ref3=>{var _availableTranslators;let{availableTranslators,selectedTranslator,setSelectedTranslator,translatorStatus,onTestTranslator,onClose}=_ref3;return/*#__PURE__*/_jsx(\"div\",{className:\"bg-white rounded-xl shadow-lg border border-gray-200\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"p-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between mb-4\",children:[/*#__PURE__*/_jsxs(\"h3\",{className:\"text-lg font-semibold text-gray-900 flex items-center\",children:[/*#__PURE__*/_jsx(Settings,{className:\"text-blue-600 mr-2\",size:20}),\"\\u7FFB\\u8BD1\\u5F15\\u64CE\\u8BBE\\u7F6E\"]}),/*#__PURE__*/_jsx(\"button\",{onClick:onClose,className:\"p-2 text-gray-500 hover:bg-gray-100 rounded-lg transition-colors\",children:/*#__PURE__*/_jsx(X,{size:16})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\",children:Object.entries(availableTranslators).map(_ref4=>{let[key,translator]=_ref4;return/*#__PURE__*/_jsxs(\"div\",{className:\"p-4 border-2 rounded-lg cursor-pointer transition-all \".concat(selectedTranslator===key?'border-blue-500 bg-blue-50':'border-gray-200 hover:border-gray-300'),onClick:()=>setSelectedTranslator(key),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between mb-2\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"font-medium text-gray-900\",children:translator.name}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2\",children:[translatorStatus[key]==='testing'&&/*#__PURE__*/_jsx(\"div\",{className:\"w-4 h-4 border-2 border-blue-600 border-t-transparent rounded-full animate-spin\"}),translatorStatus[key]==='available'&&/*#__PURE__*/_jsx(CheckCircle,{className:\"text-green-600\",size:16}),translatorStatus[key]==='unavailable'&&/*#__PURE__*/_jsx(XCircle,{className:\"text-red-600\",size:16}),/*#__PURE__*/_jsx(\"button\",{onClick:e=>{e.stopPropagation();onTestTranslator(key);},className:\"p-1 text-gray-500 hover:bg-gray-100 rounded transition-colors\",children:/*#__PURE__*/_jsx(TestTube,{size:14})})]})]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-gray-600\",children:translator.description}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-2 text-xs px-2 py-1 rounded-full inline-block \".concat(translator.status==='stable'?'bg-green-100 text-green-700':translator.status==='premium'?'bg-purple-100 text-purple-700':'bg-gray-100 text-gray-700'),children:translator.status==='stable'?'稳定':translator.status==='premium'?'高级':'未知'})]},key);})}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-4 p-4 bg-gray-50 rounded-lg\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"font-medium text-gray-900 mb-2\",children:\"\\u5F53\\u524D\\u8BBE\\u7F6E\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-gray-600\",children:[\"\\u9009\\u4E2D\\u5F15\\u64CE: \",/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:((_availableTranslators=availableTranslators[selectedTranslator])===null||_availableTranslators===void 0?void 0:_availableTranslators.name)||'未选择'})]}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-gray-600 mt-1\",children:[\"\\u72B6\\u6001: \",translatorStatus[selectedTranslator]==='available'?'✅ 可用':translatorStatus[selectedTranslator]==='unavailable'?'❌ 不可用':translatorStatus[selectedTranslator]==='testing'?'🔄 测试中':'❓ 未测试']})]})]})});};/**\r\n * 标签胶囊组件 - 重新设计\r\n */const TagPill=_ref5=>{let{tag,index,isDisabled,onDelete,onToggleDisabled,onAdjustWeight,onAdjustBrackets,onCopy,onFavorite,onTranslate,translatedTags,hoveredTag,setHoveredTag}=_ref5;const[translation,setTranslation]=useState('');const[isTranslating,setIsTranslating]=useState(false);// 解析标签\nconst parseTag=tag=>{// 检测权重 (tag:1.2)\nconst weightMatch=tag.match(/^(.+?):([0-9.]+)$/);if(weightMatch){return{text:weightMatch[1],weight:parseFloat(weightMatch[2]),bracketType:'none',brackets:0};}// 检测括号类型和层级\nlet brackets=0;let text=tag;let bracketType='none';// 检测圆括号 ()\nif(text.startsWith('(')&&text.endsWith(')')){bracketType='round';while(text.startsWith('(')&&text.endsWith(')')){brackets++;text=text.slice(1,-1);}}// 检测花括号 {}\nelse if(text.startsWith('{')&&text.endsWith('}')){bracketType='curly';while(text.startsWith('{')&&text.endsWith('}')){brackets++;text=text.slice(1,-1);}}// 检测方括号 []\nelse if(text.startsWith('[')&&text.endsWith(']')){bracketType='square';while(text.startsWith('[')&&text.endsWith(']')){brackets++;text=text.slice(1,-1);}}return{text,weight:1.0,bracketType,brackets};};const parsed=parseTag(tag);const isHovered=hoveredTag===index;// 加载翻译\nuseEffect(()=>{if(parsed.text&&!translatedTags[parsed.text]){setIsTranslating(true);onTranslate(tag).then(result=>{setTranslation(result);setIsTranslating(false);});}else if(translatedTags[parsed.text]){setTranslation(translatedTags[parsed.text]);}},[tag,translatedTags,onTranslate,parsed.text]);return/*#__PURE__*/_jsxs(\"div\",{className:\"relative group\",onMouseEnter:()=>setHoveredTag(index),onMouseLeave:e=>{// 扩大判定范围：检查鼠标是否真的离开了整个区域\nconst rect=e.currentTarget.getBoundingClientRect();const x=e.clientX;const y=e.clientY;// 扩大检测范围20像素\nconst margin=20;if(x<rect.left-margin||x>rect.right+margin||y<rect.top-margin||y>rect.bottom+140){// 底部多留140px给编辑栏\nsetHoveredTag(null);}},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"inline-flex flex-col gap-1 px-4 py-3 rounded-lg text-sm font-medium transition-all duration-200 cursor-pointer min-w-0 \".concat(isDisabled?'bg-gray-300 text-gray-500 opacity-50':'bg-blue-100 text-blue-800 hover:bg-blue-200'),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"break-all \".concat(isDisabled?'line-through':''),children:tag}),/*#__PURE__*/_jsx(\"button\",{onClick:onDelete,className:\"flex-shrink-0 w-4 h-4 rounded-full bg-blue-600 text-white flex items-center justify-center hover:bg-red-500 transition-colors\",children:/*#__PURE__*/_jsx(X,{size:10})})]}),translation&&/*#__PURE__*/_jsx(\"div\",{className:\"text-xs text-gray-600 px-1\",children:isTranslating?'翻译中...':translation})]}),isHovered&&/*#__PURE__*/_jsx(\"div\",{className:\"absolute top-full left-0 mt-3 bg-white border-2 border-gray-300 rounded-xl shadow-xl p-4 z-30 min-w-max\",onMouseEnter:()=>setHoveredTag(index),onMouseLeave:()=>setHoveredTag(null),children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-sm text-gray-700 min-w-12 font-medium\",children:\"\\u6743\\u91CD:\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>onAdjustWeight(-0.1),className:\"w-8 h-8 rounded-lg bg-gray-100 hover:bg-gray-200 flex items-center justify-center font-bold text-gray-600\",children:\"-\"}),/*#__PURE__*/_jsx(\"div\",{className:\"text-sm font-mono min-w-12 text-center bg-gray-50 px-3 py-1 rounded-lg border\",children:parsed.weight.toFixed(1)}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>onAdjustWeight(0.1),className:\"w-8 h-8 rounded-lg bg-gray-100 hover:bg-gray-200 flex items-center justify-center font-bold text-gray-600\",children:\"+\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-3\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-sm text-gray-700 min-w-12 font-medium\",children:\"\\u62EC\\u53F7:\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-1\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>onAdjustBrackets('round',-1),className:\"w-7 h-7 rounded-lg text-xs flex items-center justify-center font-bold \".concat(parsed.bracketType==='round'?'bg-orange-500 hover:bg-orange-600 text-white':'bg-gray-100 hover:bg-gray-200 text-gray-400'),disabled:parsed.bracketType!=='none'&&parsed.bracketType!=='round',children:\"-\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"px-3 py-1 rounded-lg text-sm font-mono border-2 \".concat(parsed.bracketType==='round'?'bg-orange-100 text-orange-800 border-orange-300':'bg-gray-100 text-gray-500 border-gray-300'),children:[\"() \",parsed.bracketType==='round'?parsed.brackets:0]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>onAdjustBrackets('round',1),className:\"w-7 h-7 rounded-lg text-xs flex items-center justify-center font-bold \".concat((parsed.bracketType==='none'||parsed.bracketType==='round')&&parsed.brackets<5?'bg-orange-500 hover:bg-orange-600 text-white':'bg-gray-100 text-gray-400'),disabled:parsed.bracketType!=='none'&&parsed.bracketType!=='round',children:\"+\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-1\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>onAdjustBrackets('curly',-1),className:\"w-7 h-7 rounded-lg text-xs flex items-center justify-center font-bold \".concat(parsed.bracketType==='curly'?'bg-yellow-500 hover:bg-yellow-600 text-white':'bg-gray-100 hover:bg-gray-200 text-gray-400'),disabled:parsed.bracketType!=='none'&&parsed.bracketType!=='curly',children:\"-\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"px-3 py-1 rounded-lg text-sm font-mono border-2 \".concat(parsed.bracketType==='curly'?'bg-yellow-100 text-yellow-800 border-yellow-300':'bg-gray-100 text-gray-500 border-gray-300'),children:[\"{}\",\" \",parsed.bracketType==='curly'?parsed.brackets:0]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>onAdjustBrackets('curly',1),className:\"w-7 h-7 rounded-lg text-xs flex items-center justify-center font-bold \".concat((parsed.bracketType==='none'||parsed.bracketType==='curly')&&parsed.brackets<5?'bg-yellow-500 hover:bg-yellow-600 text-white':'bg-gray-100 text-gray-400'),disabled:parsed.bracketType!=='none'&&parsed.bracketType!=='curly',children:\"+\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-1\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>onAdjustBrackets('square',-1),className:\"w-7 h-7 rounded-lg text-xs flex items-center justify-center font-bold \".concat(parsed.bracketType==='square'?'bg-blue-500 hover:bg-blue-600 text-white':'bg-gray-100 hover:bg-gray-200 text-gray-400'),disabled:parsed.bracketType!=='none'&&parsed.bracketType!=='square',children:\"-\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"px-3 py-1 rounded-lg text-sm font-mono border-2 \".concat(parsed.bracketType==='square'?'bg-blue-100 text-blue-800 border-blue-300':'bg-gray-100 text-gray-500 border-gray-300'),children:[\"[] \",parsed.bracketType==='square'?parsed.brackets:0]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>onAdjustBrackets('square',1),className:\"w-7 h-7 rounded-lg text-xs flex items-center justify-center font-bold \".concat((parsed.bracketType==='none'||parsed.bracketType==='square')&&parsed.brackets<5?'bg-blue-500 hover:bg-blue-600 text-white':'bg-gray-100 text-gray-400'),disabled:parsed.bracketType!=='none'&&parsed.bracketType!=='square',children:\"+\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2\",children:[/*#__PURE__*/_jsxs(\"button\",{onClick:onCopy,className:\"flex items-center gap-1 px-3 py-2 rounded-lg bg-green-100 hover:bg-green-200 text-green-700 text-sm transition-colors\",title:\"\\u590D\\u5236\",children:[/*#__PURE__*/_jsx(Copy,{size:14}),\"\\u590D\\u5236\"]}),/*#__PURE__*/_jsxs(\"button\",{onClick:onFavorite,className:\"flex items-center gap-1 px-3 py-2 rounded-lg bg-red-100 hover:bg-red-200 text-red-700 text-sm transition-colors\",title:\"\\u6536\\u85CF\",children:[/*#__PURE__*/_jsx(Heart,{size:14}),\"\\u6536\\u85CF\"]}),/*#__PURE__*/_jsxs(\"button\",{onClick:onToggleDisabled,className:\"flex items-center gap-1 px-3 py-2 rounded-lg text-sm transition-colors \".concat(isDisabled?'bg-blue-100 hover:bg-blue-200 text-blue-700':'bg-gray-100 hover:bg-gray-200 text-gray-700'),title:isDisabled?\"启用\":\"禁用\",children:[isDisabled?/*#__PURE__*/_jsx(Eye,{size:14}):/*#__PURE__*/_jsx(EyeOff,{size:14}),isDisabled?\"启用\":\"禁用\"]})]})]})})]});};/**\r\n * 标签卡片组件\r\n */const TagCard=_ref6=>{let{tag,onAdd,onToggleFavorite,isFavorited}=_ref6;return/*#__PURE__*/_jsx(\"div\",{className:\"group bg-gradient-to-r from-gray-50 to-white border border-gray-200 rounded-lg p-4 hover:shadow-md hover:border-blue-300 transition-all duration-200 cursor-pointer\",children:/*#__PURE__*/_jsxs(\"div\",{onClick:onAdd,className:\"flex-1\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-start justify-between mb-2\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"font-medium text-gray-900 text-sm mb-1 group-hover:text-blue-700 transition-colors\",children:tag.en}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-blue-600 mb-2\",children:tag.cn})]}),/*#__PURE__*/_jsx(\"button\",{onClick:e=>{e.stopPropagation();onToggleFavorite();},className:\"p-1 rounded-full transition-colors \".concat(isFavorited?'text-red-500 hover:bg-red-50':'text-gray-400 hover:bg-gray-100 hover:text-red-500'),children:/*#__PURE__*/_jsx(Heart,{size:14,fill:isFavorited?'currentColor':'none'})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-1\",children:[/*#__PURE__*/_jsx(TrendingUp,{size:12,className:\"text-green-600\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"text-xs text-green-600 font-medium\",children:[tag.frequency,\"%\"]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"w-12 bg-gray-200 rounded-full h-1\",children:/*#__PURE__*/_jsx(\"div\",{className:\"bg-green-500 h-1 rounded-full transition-all\",style:{width:\"\".concat(tag.frequency,\"%\")}})})]}),/*#__PURE__*/_jsxs(\"button\",{onClick:onAdd,className:\"opacity-0 group-hover:opacity-100 transition-opacity text-xs bg-blue-600 text-white px-2 py-1 rounded-full hover:bg-blue-700\",children:[/*#__PURE__*/_jsx(Plus,{size:10,className:\"inline mr-1\"}),\"\\u6DFB\\u52A0\"]})]})]})});};export default PromptLibraryPage;","map":{"version":3,"names":["React","useState","useRef","useEffect","Plus","Search","Copy","Heart","X","Languages","ChevronDown","ChevronRight","Tag","TagIcon","Sparkles","Bookmark","Clock","TrendingUp","Edit3","Minus","Trash2","Star","Weight","Zap","ChevronLeft","ChevronRightIcon","EyeOff","Eye","Settings","TestTube","CheckCircle","XCircle","copyToClipboard","translateText","translateTag","getAvailableTranslators","testTranslator","batchTranslate","TAG_DATABASE","searchTags","getPopularTags","jsx","_jsx","jsxs","_jsxs","PromptLibraryPage","_TAG_DATABASE$selecte","_TAG_DATABASE$selecte2","_TAG_DATABASE$selecte3","_TAG_DATABASE$selecte4","prompt","setPrompt","promptHistory","setPromptHistory","selectedTags","setSelectedTags","disabledTags","setDisabledTags","Set","translatedTags","setTranslatedTags","hoveredTag","setHoveredTag","availableTranslators","setAvailableTranslators","selectedTranslator","setSelectedTranslator","showTranslatorSettings","setShowTranslatorSettings","translatorStatus","setTranslatorStatus","selectedCategory","setSelectedCategory","selectedSubcategory","setSelectedSubcategory","expandedCategories","setExpandedCategories","favorites","searchQuery","setSearchQuery","searchResults","setSearchResults","setFavorites","copyStatus","setCopyStatus","textareaRef","loadTranslators","translators","error","console","trim","results","slice","tagsFromPrompt","split","map","tag","filter","updatePrompt","tags","enabledTags","_","index","has","newPrompt","join","includes","prev","handlePromptChange","value","addTagToPrompt","newTags","en","current","focus","setSelectionRange","length","deleteTag","i","newDisabled","toggleDisabled","delete","add","parseTag","weightMatch","match","text","weight","parseFloat","bracketType","brackets","startsWith","endsWith","buildTag","result","concat","toFixed","adjustWeight","delta","parsed","newWeight","Math","max","min","newTag","adjustBrackets","newBrackets","newBracketType","handleTestTranslator","translatorKey","_objectSpread","success","setTimeout","translateAllTags","untranslatedTags","texts","translator","targetLang","sourceLang","newTranslations","forEach","original","translated","translateSingleTag","pureText","copyTag","favoriteTag","tagObj","cn","frequency","toggleFavorite","handleCopy","isAlreadyFavorited","some","fav","toggleCategory","categoryKey","selectCategory","subcategoryKey","arguments","undefined","getCurrentTags","category","subcategory","subcategories","allTags","Object","values","push","personal","currentTags","className","children","size","onClick","ref","onChange","e","target","placeholder","historyPrompt","TranslatorSettings","onTestTranslator","onClose","style","minHeight","maxHeight","height","TagPill","isDisabled","onDelete","onToggleDisabled","onAdjustWeight","onAdjustBrackets","onCopy","onFavorite","onTranslate","type","entries","_ref","icon","name","_ref2","TagCard","onAdd","onToggleFavorite","isFavorited","_ref3","_availableTranslators","_ref4","key","stopPropagation","description","status","_ref5","translation","setTranslation","isTranslating","setIsTranslating","isHovered","then","onMouseEnter","onMouseLeave","rect","currentTarget","getBoundingClientRect","x","clientX","y","clientY","margin","left","right","top","bottom","disabled","title","_ref6","fill","width"],"sources":["C:/Users/wjx19/Documents/GitHub/I-Prompt/src/pages/PromptLibraryPage.jsx"],"sourcesContent":["import React, { useState, useRef, useEffect } from 'react';\r\nimport { \r\n  Plus, Search, Copy, Heart, X, Languages, \r\n  ChevronDown, ChevronRight, Tag as TagIcon,\r\n  Sparkles, Bookmark, Clock, TrendingUp, Edit3,\r\n  Minus, Trash2, Star, Weight, Zap, ChevronLeft, ChevronRight as ChevronRightIcon,\r\n  EyeOff, Eye, Settings, TestTube, CheckCircle, XCircle\r\n} from 'lucide-react';\r\nimport { copyToClipboard } from '../utils/clipboard';\r\nimport { \r\n  translateText, \r\n  translateTag, \r\n  getAvailableTranslators, \r\n  testTranslator, \r\n  batchTranslate \r\n} from '../services/translationService';\r\nimport { TAG_DATABASE, searchTags, getPopularTags } from '../constants/tagDatabase';\r\n\r\nconst PromptLibraryPage = () => {\r\n  // 提示词编辑状态\r\n  const [prompt, setPrompt] = useState('');\r\n  const [promptHistory, setPromptHistory] = useState([]);\r\n  \r\n  // 提示词编辑器状态\r\n  const [selectedTags, setSelectedTags] = useState([]);\r\n  const [disabledTags, setDisabledTags] = useState(new Set());\r\n  const [translatedTags, setTranslatedTags] = useState({});\r\n  const [hoveredTag, setHoveredTag] = useState(null);\r\n  \r\n  // 翻译设置状态\r\n  const [availableTranslators, setAvailableTranslators] = useState({});\r\n  const [selectedTranslator, setSelectedTranslator] = useState('mymemory');\r\n  const [showTranslatorSettings, setShowTranslatorSettings] = useState(false);\r\n  const [translatorStatus, setTranslatorStatus] = useState({});\r\n  \r\n  // 标签库状态\r\n  const [selectedCategory, setSelectedCategory] = useState('favorites');\r\n  const [selectedSubcategory, setSelectedSubcategory] = useState(null);\r\n  const [expandedCategories, setExpandedCategories] = useState({ favorites: true });\r\n  const [searchQuery, setSearchQuery] = useState('');\r\n  const [searchResults, setSearchResults] = useState([]);\r\n  \r\n  // UI状态\r\n  const [favorites, setFavorites] = useState([]);\r\n  const [copyStatus, setCopyStatus] = useState('');\r\n  \r\n  const textareaRef = useRef(null);\r\n\r\n  // 加载翻译引擎列表\r\n  useEffect(() => {\r\n    loadTranslators();\r\n  }, []);\r\n\r\n  const loadTranslators = async () => {\r\n    try {\r\n      const translators = await getAvailableTranslators();\r\n      setAvailableTranslators(translators);\r\n    } catch (error) {\r\n      console.error('加载翻译引擎失败:', error);\r\n    }\r\n  };\r\n\r\n  // 实时搜索建议\r\n  useEffect(() => {\r\n    if (searchQuery.trim()) {\r\n      const results = searchTags(searchQuery).slice(0, 20);\r\n      setSearchResults(results);\r\n    } else {\r\n      setSearchResults([]);\r\n    }\r\n  }, [searchQuery]);\r\n\r\n  // 同步提示词和选中标签\r\n  useEffect(() => {\r\n    const tagsFromPrompt = prompt.split(',').map(tag => tag.trim()).filter(tag => tag);\r\n    setSelectedTags(tagsFromPrompt);\r\n  }, [prompt]);\r\n\r\n  // 更新英文提示词（排除禁用的标签）\r\n  const updatePrompt = (tags) => {\r\n    const enabledTags = tags.filter((_, index) => !disabledTags.has(index));\r\n    const newPrompt = enabledTags.join(', ');\r\n    setPrompt(newPrompt);\r\n    \r\n    // 添加到历史记录\r\n    if (newPrompt.trim() && !promptHistory.includes(newPrompt.trim())) {\r\n      setPromptHistory(prev => [newPrompt.trim(), ...prev.slice(0, 9)]);\r\n    }\r\n  };\r\n\r\n  // 处理提示词变化\r\n  const handlePromptChange = (value) => {\r\n    setPrompt(value);\r\n    \r\n    // 添加到历史记录\r\n    if (value.trim() && !promptHistory.includes(value.trim())) {\r\n      setPromptHistory(prev => [value.trim(), ...prev.slice(0, 9)]);\r\n    }\r\n  };\r\n\r\n  // 添加标签到提示词\r\n  const addTagToPrompt = (tag) => {\r\n    const newTags = [...selectedTags, tag.en];\r\n    setSelectedTags(newTags);\r\n    updatePrompt(newTags);\r\n    \r\n    // 聚焦到文本框末尾\r\n    if (textareaRef.current) {\r\n      textareaRef.current.focus();\r\n      textareaRef.current.setSelectionRange(prompt.length, prompt.length);\r\n    }\r\n  };\r\n\r\n  // 删除标签\r\n  const deleteTag = (index) => {\r\n    const newTags = selectedTags.filter((_, i) => i !== index);\r\n    const newDisabled = new Set([...disabledTags].map(i => i > index ? i - 1 : i).filter(i => i !== index));\r\n    setSelectedTags(newTags);\r\n    setDisabledTags(newDisabled);\r\n    updatePrompt(newTags);\r\n  };\r\n\r\n  // 切换禁用状态\r\n  const toggleDisabled = (index) => {\r\n    const newDisabled = new Set(disabledTags);\r\n    if (newDisabled.has(index)) {\r\n      newDisabled.delete(index);\r\n    } else {\r\n      newDisabled.add(index);\r\n    }\r\n    setDisabledTags(newDisabled);\r\n    updatePrompt(selectedTags);\r\n  };\r\n\r\n  // 解析标签，提取权重和括号信息\r\n  const parseTag = (tag) => {\r\n    // 检测权重 (tag:1.2)\r\n    const weightMatch = tag.match(/^(.+?):([0-9.]+)$/);\r\n    if (weightMatch) {\r\n      return {\r\n        text: weightMatch[1],\r\n        weight: parseFloat(weightMatch[2]),\r\n        bracketType: 'none',\r\n        brackets: 0\r\n      };\r\n    }\r\n    \r\n    // 检测括号类型和层级\r\n    let brackets = 0;\r\n    let text = tag;\r\n    let bracketType = 'none';\r\n    \r\n    // 检测圆括号 ()\r\n    if (text.startsWith('(') && text.endsWith(')')) {\r\n      bracketType = 'round';\r\n      while (text.startsWith('(') && text.endsWith(')')) {\r\n        brackets++;\r\n        text = text.slice(1, -1);\r\n      }\r\n    }\r\n    // 检测花括号 {}\r\n    else if (text.startsWith('{') && text.endsWith('}')) {\r\n      bracketType = 'curly';\r\n      while (text.startsWith('{') && text.endsWith('}')) {\r\n        brackets++;\r\n        text = text.slice(1, -1);\r\n      }\r\n    }\r\n    // 检测方括号 []\r\n    else if (text.startsWith('[') && text.endsWith(']')) {\r\n      bracketType = 'square';\r\n      while (text.startsWith('[') && text.endsWith(']')) {\r\n        brackets++;\r\n        text = text.slice(1, -1);\r\n      }\r\n    }\r\n    \r\n    return { text, weight: 1.0, bracketType, brackets };\r\n  };\r\n\r\n  // 构建标签字符串\r\n  const buildTag = (text, weight, bracketType, brackets) => {\r\n    let result = text;\r\n    \r\n    // 添加权重\r\n    if (weight !== 1.0) {\r\n      result = `${text}:${weight.toFixed(1)}`;\r\n    }\r\n    \r\n    // 添加括号\r\n    if (bracketType === 'round') {\r\n      for (let i = 0; i < brackets; i++) {\r\n        result = `(${result})`;\r\n      }\r\n    } else if (bracketType === 'curly') {\r\n      for (let i = 0; i < brackets; i++) {\r\n        result = `{${result}}`;\r\n      }\r\n    } else if (bracketType === 'square') {\r\n      for (let i = 0; i < brackets; i++) {\r\n        result = `[${result}]`;\r\n      }\r\n    }\r\n    \r\n    return result;\r\n  };\r\n\r\n  // 调整权重\r\n  const adjustWeight = (index, delta) => {\r\n    const tag = selectedTags[index];\r\n    const parsed = parseTag(tag);\r\n    const newWeight = Math.max(0.1, Math.min(2.0, parsed.weight + delta));\r\n    const newTag = buildTag(parsed.text, newWeight, parsed.bracketType, parsed.brackets);\r\n    \r\n    const newTags = [...selectedTags];\r\n    newTags[index] = newTag;\r\n    setSelectedTags(newTags);\r\n    updatePrompt(newTags);\r\n  };\r\n\r\n  // 调整括号\r\n  const adjustBrackets = (index, bracketType, delta) => {\r\n    const tag = selectedTags[index];\r\n    const parsed = parseTag(tag);\r\n    \r\n    // 如果要增加括号且当前没有括号，或者类型相同，才允许调整\r\n    if (delta > 0 && parsed.bracketType !== 'none' && parsed.bracketType !== bracketType) {\r\n      return; // 不允许混用不同类型的括号\r\n    }\r\n    \r\n    const newBrackets = Math.max(0, Math.min(5, parsed.brackets + delta));\r\n    const newBracketType = newBrackets === 0 ? 'none' : bracketType;\r\n    const newTag = buildTag(parsed.text, parsed.weight, newBracketType, newBrackets);\r\n    \r\n    const newTags = [...selectedTags];\r\n    newTags[index] = newTag;\r\n    setSelectedTags(newTags);\r\n    updatePrompt(newTags);\r\n  };\r\n\r\n  // 测试翻译引擎\r\n  const handleTestTranslator = async (translatorKey) => {\r\n    setTranslatorStatus(prev => ({ ...prev, [translatorKey]: 'testing' }));\r\n    \r\n    try {\r\n      const result = await testTranslator(translatorKey);\r\n      setTranslatorStatus(prev => ({ \r\n        ...prev, \r\n        [translatorKey]: result.success ? 'available' : 'unavailable'\r\n      }));\r\n      \r\n      if (result.success) {\r\n        setCopyStatus('test-success');\r\n      } else {\r\n        setCopyStatus('test-failed');\r\n      }\r\n    } catch (error) {\r\n      setTranslatorStatus(prev => ({ ...prev, [translatorKey]: 'unavailable' }));\r\n      setCopyStatus('test-failed');\r\n    }\r\n    \r\n    setTimeout(() => setCopyStatus(''), 2000);\r\n  };\r\n\r\n  // 一键翻译所有未翻译的标签\r\n  const translateAllTags = async () => {\r\n    const untranslatedTags = selectedTags.filter(tag => {\r\n      const parsed = parseTag(tag);\r\n      return !translatedTags[parsed.text];\r\n    });\r\n\r\n    if (untranslatedTags.length === 0) {\r\n      setCopyStatus('no-untranslated');\r\n      setTimeout(() => setCopyStatus(''), 2000);\r\n      return;\r\n    }\r\n\r\n    setCopyStatus('translating');\r\n    \r\n    try {\r\n      const texts = untranslatedTags.map(tag => parseTag(tag).text);\r\n      const results = await batchTranslate(texts, {\r\n        translator: selectedTranslator,\r\n        targetLang: 'zh',\r\n        sourceLang: 'auto'\r\n      });\r\n\r\n      const newTranslations = {};\r\n      results.forEach(result => {\r\n        if (result.success) {\r\n          newTranslations[result.original] = result.translated;\r\n        }\r\n      });\r\n\r\n      setTranslatedTags(prev => ({ ...prev, ...newTranslations }));\r\n      setCopyStatus('translate-success');\r\n    } catch (error) {\r\n      console.error('批量翻译失败:', error);\r\n      setCopyStatus('translate-error');\r\n    }\r\n    \r\n    setTimeout(() => setCopyStatus(''), 2000);\r\n  };\r\n\r\n  // 翻译单个标签\r\n  const translateSingleTag = async (tag) => {\r\n    // 提取纯文本进行翻译\r\n    const parsed = parseTag(tag);\r\n    const pureText = parsed.text;\r\n    \r\n    if (translatedTags[pureText]) {\r\n      return translatedTags[pureText];\r\n    }\r\n    \r\n    try {\r\n      const translated = await translateTag(pureText, {\r\n        translator: selectedTranslator,\r\n        targetLang: 'zh',\r\n        sourceLang: 'auto'\r\n      });\r\n      setTranslatedTags(prev => ({ ...prev, [pureText]: translated }));\r\n      return translated;\r\n    } catch (error) {\r\n      console.error('翻译失败:', error);\r\n      return pureText;\r\n    }\r\n  };\r\n\r\n  // 复制标签\r\n  const copyTag = async (tag) => {\r\n    const success = await copyToClipboard(tag);\r\n    setCopyStatus(success ? 'copied' : 'error');\r\n    setTimeout(() => setCopyStatus(''), 2000);\r\n  };\r\n\r\n  // 收藏标签\r\n  const favoriteTag = (tag) => {\r\n    const parsed = parseTag(tag);\r\n    const tagObj = { en: parsed.text, cn: translatedTags[parsed.text] || parsed.text, frequency: 80 };\r\n    toggleFavorite(tagObj);\r\n  };\r\n\r\n  // 复制功能\r\n  const handleCopy = async (text) => {\r\n    const success = await copyToClipboard(text || prompt);\r\n    setCopyStatus(success ? 'copied' : 'error');\r\n    setTimeout(() => setCopyStatus(''), 2000);\r\n  };\r\n\r\n  // 收藏功能\r\n  const toggleFavorite = (tag) => {\r\n    setFavorites(prev => {\r\n      const isAlreadyFavorited = prev.some(fav => fav.en === tag.en);\r\n      if (isAlreadyFavorited) {\r\n        return prev.filter(fav => fav.en !== tag.en);\r\n      } else {\r\n        return [...prev, tag];\r\n      }\r\n    });\r\n  };\r\n\r\n  // 分类展开/收起\r\n  const toggleCategory = (categoryKey) => {\r\n    setExpandedCategories(prev => ({\r\n      ...prev,\r\n      [categoryKey]: !prev[categoryKey]\r\n    }));\r\n  };\r\n\r\n  // 选择分类\r\n  const selectCategory = (categoryKey, subcategoryKey = null) => {\r\n    setSelectedCategory(categoryKey);\r\n    setSelectedSubcategory(subcategoryKey);\r\n  };\r\n\r\n  // 获取当前显示的标签\r\n  const getCurrentTags = () => {\r\n    if (searchQuery.trim()) {\r\n      return searchResults;\r\n    }\r\n    \r\n    if (selectedCategory === 'favorites') {\r\n      if (selectedSubcategory === 'personal') {\r\n        return favorites;\r\n      } else {\r\n        // 显示热门标签\r\n        return getPopularTags(20);\r\n      }\r\n    }\r\n    \r\n    const category = TAG_DATABASE[selectedCategory];\r\n    if (!category) return [];\r\n    \r\n    if (selectedSubcategory) {\r\n      const subcategory = category.subcategories[selectedSubcategory];\r\n      return subcategory ? subcategory.tags : [];\r\n    }\r\n    \r\n    // 返回该分类下所有标签\r\n    const allTags = [];\r\n    Object.values(category.subcategories).forEach(subcategory => {\r\n      allTags.push(...subcategory.tags);\r\n    });\r\n    return allTags;\r\n  };\r\n\r\n  // 动态更新TAG_DATABASE中的收藏标签\r\n  useEffect(() => {\r\n    if (TAG_DATABASE.favorites && TAG_DATABASE.favorites.subcategories.personal) {\r\n      TAG_DATABASE.favorites.subcategories.personal.tags = favorites;\r\n    }\r\n  }, [favorites]);\r\n\r\n  const currentTags = getCurrentTags();\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gradient-to-br from-blue-50 via-white to-purple-50\">\r\n      {/* 页面标题 */}\r\n      <div className=\"bg-white/80 backdrop-blur-sm border-b border-gray-200 px-6 py-4\">\r\n        <div className=\"max-w-7xl mx-auto\">\r\n          <h1 className=\"text-2xl font-bold text-gray-900 mb-2 flex items-center\">\r\n            <Sparkles className=\"text-blue-600 mr-3\" size={28} />\r\n            智能提示词库 3.0\r\n          </h1>\r\n          <p className=\"text-gray-600\">\r\n            专业的提示词编辑和管理工具 • 支持多引擎翻译 • 智能分类 • 让AI绘画创作更高效\r\n          </p>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"max-w-7xl mx-auto p-6 space-y-6\">\r\n        {/* 英文提示词输入区 */}\r\n        <div className=\"bg-white rounded-xl shadow-lg border border-gray-200\">\r\n          <div className=\"p-6\">\r\n            <div className=\"flex items-center justify-between mb-4\">\r\n              <h2 className=\"text-lg font-semibold text-gray-900 flex items-center\">\r\n                <TagIcon className=\"text-blue-600 mr-2\" size={20} />\r\n                英文提示词\r\n              </h2>\r\n              <div className=\"flex items-center gap-2\">\r\n                <button\r\n                  onClick={() => setShowTranslatorSettings(!showTranslatorSettings)}\r\n                  className=\"flex items-center gap-2 px-3 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm\"\r\n                >\r\n                  <Settings size={14} />\r\n                  翻译设置\r\n                </button>\r\n                <button\r\n                  onClick={translateAllTags}\r\n                  className=\"flex items-center gap-2 px-3 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors text-sm\"\r\n                >\r\n                  <Languages size={14} />\r\n                  一键翻译\r\n                </button>\r\n                <button\r\n                  onClick={() => handleCopy()}\r\n                  className=\"flex items-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors\"\r\n                >\r\n                  <Copy size={16} />\r\n                  复制\r\n                </button>\r\n                <button\r\n                  onClick={() => {\r\n                    setPrompt('');\r\n                    setSelectedTags([]);\r\n                    setDisabledTags(new Set());\r\n                  }}\r\n                  className=\"p-2 text-gray-500 hover:bg-gray-100 rounded-lg transition-colors\"\r\n                >\r\n                  <X size={16} />\r\n                </button>\r\n              </div>\r\n            </div>\r\n\r\n            <textarea\r\n              ref={textareaRef}\r\n              value={prompt}\r\n              onChange={(e) => handlePromptChange(e.target.value)}\r\n              placeholder=\"输入或点击下方标签添加提示词...\"\r\n              className=\"w-full h-32 p-4 border border-gray-300 rounded-lg resize-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all font-mono text-sm overflow-y-auto\"\r\n            />\r\n            \r\n            <div className=\"flex items-center justify-between text-xs text-gray-500 mt-2\">\r\n              <span>字符数: {prompt.length}</span>\r\n              <span>标签数: {selectedTags.filter((_, i) => !disabledTags.has(i)).length}/{selectedTags.length}</span>\r\n            </div>\r\n\r\n            {/* 快速历史记录 */}\r\n            {promptHistory.length > 0 && (\r\n              <div className=\"mt-4 p-4 bg-gray-50 rounded-lg\">\r\n                <div className=\"flex items-center gap-2 mb-2\">\r\n                  <Clock size={16} className=\"text-gray-600\" />\r\n                  <span className=\"text-sm font-medium text-gray-700\">最近使用</span>\r\n                </div>\r\n                <div className=\"flex flex-wrap gap-2\">\r\n                  {promptHistory.slice(0, 5).map((historyPrompt, index) => (\r\n                    <button\r\n                      key={index}\r\n                      onClick={() => setPrompt(historyPrompt)}\r\n                      className=\"px-3 py-1 text-xs bg-white border border-gray-200 rounded-full hover:bg-blue-50 hover:border-blue-300 transition-colors truncate max-w-xs\"\r\n                    >\r\n                      {historyPrompt}\r\n                    </button>\r\n                  ))}\r\n                </div>\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n\r\n        {/* 翻译引擎设置面板 */}\r\n        {showTranslatorSettings && (\r\n          <TranslatorSettings\r\n            availableTranslators={availableTranslators}\r\n            selectedTranslator={selectedTranslator}\r\n            setSelectedTranslator={setSelectedTranslator}\r\n            translatorStatus={translatorStatus}\r\n            onTestTranslator={handleTestTranslator}\r\n            onClose={() => setShowTranslatorSettings(false)}\r\n          />\r\n        )}\r\n\r\n        {/* 提示词编辑区 - 单独一行，自适应高度 */}\r\n        <div className=\"bg-white rounded-xl shadow-lg border border-gray-200\">\r\n          <div className=\"p-6\">\r\n            <div className=\"flex items-center justify-between mb-4\">\r\n              <h2 className=\"text-lg font-semibold text-gray-900 flex items-center\">\r\n                <Edit3 className=\"text-blue-600 mr-2\" size={20} />\r\n                提示词编辑区\r\n                <span className=\"text-xs bg-blue-100 text-blue-600 px-2 py-1 rounded-full ml-2\">\r\n                  悬停编辑 • 权重调节 • 括号控制\r\n                </span>\r\n              </h2>\r\n            </div>\r\n            \r\n            <div \r\n              className=\"border border-gray-300 rounded-lg p-6 bg-blue-50/20 overflow-y-auto\"\r\n              style={{\r\n                minHeight: '200px',\r\n                maxHeight: '1200px',\r\n                height: 'auto'\r\n              }}\r\n            >\r\n              {selectedTags.length === 0 ? (\r\n                <div className=\"flex items-center justify-center h-32 text-gray-500\">\r\n                  <div className=\"text-center\">\r\n                    <TagIcon size={32} className=\"mx-auto mb-2 opacity-50\" />\r\n                    <p className=\"text-sm\">点击下方标签库添加标签</p>\r\n                  </div>\r\n                </div>\r\n              ) : (\r\n                <div className=\"flex flex-wrap gap-4\">\r\n                  {selectedTags.map((tag, index) => (\r\n                    <TagPill\r\n                      key={index}\r\n                      tag={tag}\r\n                      index={index}\r\n                      isDisabled={disabledTags.has(index)}\r\n                      onDelete={() => deleteTag(index)}\r\n                      onToggleDisabled={() => toggleDisabled(index)}\r\n                      onAdjustWeight={(delta) => adjustWeight(index, delta)}\r\n                      onAdjustBrackets={(bracketType, delta) => adjustBrackets(index, bracketType, delta)}\r\n                      onCopy={() => copyTag(tag)}\r\n                      onFavorite={() => favoriteTag(tag)}\r\n                      onTranslate={translateSingleTag}\r\n                      translatedTags={translatedTags}\r\n                      hoveredTag={hoveredTag}\r\n                      setHoveredTag={setHoveredTag}\r\n                    />\r\n                  ))}\r\n                </div>\r\n              )}\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* 主要内容区域 */}\r\n        <div className=\"grid grid-cols-1 lg:grid-cols-4 gap-6\">\r\n          {/* 左侧分类导航 */}\r\n          <div className=\"lg:col-span-1\">\r\n            <div className=\"bg-white rounded-xl shadow-lg border border-gray-200 p-4 sticky top-6\">\r\n              <div className=\"mb-4\">\r\n                <div className=\"relative\">\r\n                  <Search className=\"absolute left-3 top-3 text-gray-400\" size={16} />\r\n                  <input\r\n                    type=\"text\"\r\n                    value={searchQuery}\r\n                    onChange={(e) => setSearchQuery(e.target.value)}\r\n                    placeholder=\"搜索标签...\"\r\n                    className=\"w-full pl-9 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm\"\r\n                  />\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"space-y-1\">\r\n                {Object.entries(TAG_DATABASE).map(([categoryKey, category]) => (\r\n                  <div key={categoryKey}>\r\n                    <button\r\n                      onClick={() => toggleCategory(categoryKey)}\r\n                      className={`w-full flex items-center justify-between p-3 rounded-lg transition-colors ${\r\n                        selectedCategory === categoryKey && !selectedSubcategory\r\n                          ? 'bg-blue-50 text-blue-700 border border-blue-200'\r\n                          : 'hover:bg-gray-50'\r\n                      }`}\r\n                    >\r\n                      <div className=\"flex items-center gap-2\">\r\n                        <span className=\"text-lg\">{category.icon}</span>\r\n                        <span className=\"font-medium\">{category.name}</span>\r\n                      </div>\r\n                      {expandedCategories[categoryKey] ? (\r\n                        <ChevronDown size={16} />\r\n                      ) : (\r\n                        <ChevronRight size={16} />\r\n                      )}\r\n                    </button>\r\n\r\n                    {expandedCategories[categoryKey] && (\r\n                      <div className=\"ml-4 mt-1 space-y-1\">\r\n                        {Object.entries(category.subcategories).map(([subcategoryKey, subcategory]) => (\r\n                          <button\r\n                            key={subcategoryKey}\r\n                            onClick={() => selectCategory(categoryKey, subcategoryKey)}\r\n                            className={`w-full text-left p-2 rounded-lg text-sm transition-colors ${\r\n                              selectedCategory === categoryKey && selectedSubcategory === subcategoryKey\r\n                                ? 'bg-blue-50 text-blue-700'\r\n                                : 'hover:bg-gray-50 text-gray-600'\r\n                            }`}\r\n                          >\r\n                            {subcategory.name}\r\n                          </button>\r\n                        ))}\r\n                      </div>\r\n                    )}\r\n                  </div>\r\n                ))}\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          {/* 右侧标签展示区 */}\r\n          <div className=\"lg:col-span-3\">\r\n            <div className=\"bg-white rounded-xl shadow-lg border border-gray-200\">\r\n              <div className=\"p-6 border-b border-gray-200\">\r\n                <div className=\"flex items-center justify-between\">\r\n                  <div>\r\n                    <h3 className=\"text-lg font-semibold text-gray-900\">\r\n                      {searchQuery ? '搜索结果' : \r\n                       selectedSubcategory ? \r\n                       `${TAG_DATABASE[selectedCategory]?.name} - ${TAG_DATABASE[selectedCategory]?.subcategories[selectedSubcategory]?.name}` :\r\n                       TAG_DATABASE[selectedCategory]?.name || '标签库'}\r\n                    </h3>\r\n                    <p className=\"text-sm text-gray-600 mt-1\">\r\n                      {searchQuery ? `找到 ${currentTags.length} 个相关标签` : \r\n                       `共 ${currentTags.length} 个标签`}\r\n                    </p>\r\n                  </div>\r\n                  <div className=\"flex items-center gap-2\">\r\n                    <span className=\"text-xs bg-blue-100 text-blue-600 px-2 py-1 rounded-full\">\r\n                      点击标签添加到提示词\r\n                    </span>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"p-6\">\r\n                {currentTags.length === 0 ? (\r\n                  <div className=\"text-center py-12\">\r\n                    <TagIcon className=\"mx-auto text-gray-400 mb-4\" size={48} />\r\n                    <p className=\"text-gray-500 mb-4\">\r\n                      {searchQuery ? '未找到匹配的标签' : '该分类暂无标签'}\r\n                    </p>\r\n                  </div>\r\n                ) : (\r\n                  <div className=\"grid grid-cols-1 sm:grid-cols-2 xl:grid-cols-3 gap-3\">\r\n                    {currentTags.map((tag, index) => (\r\n                      <TagCard\r\n                        key={`${tag.en}-${index}`}\r\n                        tag={tag}\r\n                        onAdd={() => addTagToPrompt(tag)}\r\n                        onToggleFavorite={() => toggleFavorite(tag)}\r\n                        isFavorited={favorites.some(fav => fav.en === tag.en)}\r\n                      />\r\n                    ))}\r\n                  </div>\r\n                )}\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* 复制状态提示 */}\r\n      {copyStatus && (\r\n        <div className={`fixed bottom-4 right-4 px-4 py-2 rounded-lg text-white text-sm transition-all duration-300 shadow-lg z-50 ${\r\n          copyStatus === 'copied' ? 'bg-green-600' : \r\n          copyStatus === 'translating' ? 'bg-blue-600' :\r\n          copyStatus === 'translate-success' ? 'bg-green-600' :\r\n          copyStatus === 'translate-error' ? 'bg-red-600' :\r\n          copyStatus === 'no-untranslated' ? 'bg-yellow-600' :\r\n          copyStatus === 'test-success' ? 'bg-green-600' :\r\n          copyStatus === 'test-failed' ? 'bg-red-600' :\r\n          'bg-red-600'\r\n        }`}>\r\n          {copyStatus === 'copied' ? '✅ 已复制到剪贴板' : \r\n           copyStatus === 'translating' ? '🔄 正在翻译中...' :\r\n           copyStatus === 'translate-success' ? '✅ 翻译完成' :\r\n           copyStatus === 'translate-error' ? '❌ 翻译失败' :\r\n           copyStatus === 'no-untranslated' ? '💡 所有标签已翻译' :\r\n           copyStatus === 'test-success' ? '✅ 测试成功' :\r\n           copyStatus === 'test-failed' ? '❌ 测试失败' :\r\n           '❌ 操作失败'}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\n/**\r\n * 翻译引擎设置组件\r\n */\r\nconst TranslatorSettings = ({ \r\n  availableTranslators, \r\n  selectedTranslator, \r\n  setSelectedTranslator, \r\n  translatorStatus, \r\n  onTestTranslator, \r\n  onClose \r\n}) => (\r\n  <div className=\"bg-white rounded-xl shadow-lg border border-gray-200\">\r\n    <div className=\"p-6\">\r\n      <div className=\"flex items-center justify-between mb-4\">\r\n        <h3 className=\"text-lg font-semibold text-gray-900 flex items-center\">\r\n          <Settings className=\"text-blue-600 mr-2\" size={20} />\r\n          翻译引擎设置\r\n        </h3>\r\n        <button\r\n          onClick={onClose}\r\n          className=\"p-2 text-gray-500 hover:bg-gray-100 rounded-lg transition-colors\"\r\n        >\r\n          <X size={16} />\r\n        </button>\r\n      </div>\r\n\r\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\r\n        {Object.entries(availableTranslators).map(([key, translator]) => (\r\n          <div \r\n            key={key}\r\n            className={`p-4 border-2 rounded-lg cursor-pointer transition-all ${\r\n              selectedTranslator === key \r\n                ? 'border-blue-500 bg-blue-50' \r\n                : 'border-gray-200 hover:border-gray-300'\r\n            }`}\r\n            onClick={() => setSelectedTranslator(key)}\r\n          >\r\n            <div className=\"flex items-center justify-between mb-2\">\r\n              <h4 className=\"font-medium text-gray-900\">{translator.name}</h4>\r\n              <div className=\"flex items-center gap-2\">\r\n                {translatorStatus[key] === 'testing' && (\r\n                  <div className=\"w-4 h-4 border-2 border-blue-600 border-t-transparent rounded-full animate-spin\" />\r\n                )}\r\n                {translatorStatus[key] === 'available' && (\r\n                  <CheckCircle className=\"text-green-600\" size={16} />\r\n                )}\r\n                {translatorStatus[key] === 'unavailable' && (\r\n                  <XCircle className=\"text-red-600\" size={16} />\r\n                )}\r\n                <button\r\n                  onClick={(e) => {\r\n                    e.stopPropagation();\r\n                    onTestTranslator(key);\r\n                  }}\r\n                  className=\"p-1 text-gray-500 hover:bg-gray-100 rounded transition-colors\"\r\n                >\r\n                  <TestTube size={14} />\r\n                </button>\r\n              </div>\r\n            </div>\r\n            <p className=\"text-xs text-gray-600\">{translator.description}</p>\r\n            <div className={`mt-2 text-xs px-2 py-1 rounded-full inline-block ${\r\n              translator.status === 'stable' ? 'bg-green-100 text-green-700' :\r\n              translator.status === 'premium' ? 'bg-purple-100 text-purple-700' :\r\n              'bg-gray-100 text-gray-700'\r\n            }`}>\r\n              {translator.status === 'stable' ? '稳定' :\r\n               translator.status === 'premium' ? '高级' : '未知'}\r\n            </div>\r\n          </div>\r\n        ))}\r\n      </div>\r\n\r\n      <div className=\"mt-4 p-4 bg-gray-50 rounded-lg\">\r\n        <h4 className=\"font-medium text-gray-900 mb-2\">当前设置</h4>\r\n        <p className=\"text-sm text-gray-600\">\r\n          选中引擎: <span className=\"font-medium\">{availableTranslators[selectedTranslator]?.name || '未选择'}</span>\r\n        </p>\r\n        <p className=\"text-sm text-gray-600 mt-1\">\r\n          状态: {translatorStatus[selectedTranslator] === 'available' ? '✅ 可用' :\r\n                 translatorStatus[selectedTranslator] === 'unavailable' ? '❌ 不可用' :\r\n                 translatorStatus[selectedTranslator] === 'testing' ? '🔄 测试中' :\r\n                 '❓ 未测试'}\r\n        </p>\r\n      </div>\r\n    </div>\r\n  </div>\r\n);\r\n\r\n/**\r\n * 标签胶囊组件 - 重新设计\r\n */\r\nconst TagPill = ({ \r\n  tag, \r\n  index,\r\n  isDisabled,\r\n  onDelete, \r\n  onToggleDisabled,\r\n  onAdjustWeight,\r\n  onAdjustBrackets,\r\n  onCopy,\r\n  onFavorite,\r\n  onTranslate,\r\n  translatedTags,\r\n  hoveredTag,\r\n  setHoveredTag\r\n}) => {\r\n  const [translation, setTranslation] = useState('');\r\n  const [isTranslating, setIsTranslating] = useState(false);\r\n\r\n  // 解析标签\r\n  const parseTag = (tag) => {\r\n    // 检测权重 (tag:1.2)\r\n    const weightMatch = tag.match(/^(.+?):([0-9.]+)$/);\r\n    if (weightMatch) {\r\n      return {\r\n        text: weightMatch[1],\r\n        weight: parseFloat(weightMatch[2]),\r\n        bracketType: 'none',\r\n        brackets: 0\r\n      };\r\n    }\r\n    \r\n    // 检测括号类型和层级\r\n    let brackets = 0;\r\n    let text = tag;\r\n    let bracketType = 'none';\r\n    \r\n    // 检测圆括号 ()\r\n    if (text.startsWith('(') && text.endsWith(')')) {\r\n      bracketType = 'round';\r\n      while (text.startsWith('(') && text.endsWith(')')) {\r\n        brackets++;\r\n        text = text.slice(1, -1);\r\n      }\r\n    }\r\n    // 检测花括号 {}\r\n    else if (text.startsWith('{') && text.endsWith('}')) {\r\n      bracketType = 'curly';\r\n      while (text.startsWith('{') && text.endsWith('}')) {\r\n        brackets++;\r\n        text = text.slice(1, -1);\r\n      }\r\n    }\r\n    // 检测方括号 []\r\n    else if (text.startsWith('[') && text.endsWith(']')) {\r\n      bracketType = 'square';\r\n      while (text.startsWith('[') && text.endsWith(']')) {\r\n        brackets++;\r\n        text = text.slice(1, -1);\r\n      }\r\n    }\r\n    \r\n    return { text, weight: 1.0, bracketType, brackets };\r\n  };\r\n\r\n  const parsed = parseTag(tag);\r\n  const isHovered = hoveredTag === index;\r\n\r\n  // 加载翻译\r\n  useEffect(() => {\r\n    if (parsed.text && !translatedTags[parsed.text]) {\r\n      setIsTranslating(true);\r\n      onTranslate(tag).then(result => {\r\n        setTranslation(result);\r\n        setIsTranslating(false);\r\n      });\r\n    } else if (translatedTags[parsed.text]) {\r\n      setTranslation(translatedTags[parsed.text]);\r\n    }\r\n  }, [tag, translatedTags, onTranslate, parsed.text]);\r\n\r\n  return (\r\n    <div \r\n      className=\"relative group\"\r\n      onMouseEnter={() => setHoveredTag(index)}\r\n      onMouseLeave={(e) => {\r\n        // 扩大判定范围：检查鼠标是否真的离开了整个区域\r\n        const rect = e.currentTarget.getBoundingClientRect();\r\n        const x = e.clientX;\r\n        const y = e.clientY;\r\n        \r\n        // 扩大检测范围20像素\r\n        const margin = 20;\r\n        if (x < rect.left - margin || x > rect.right + margin || \r\n            y < rect.top - margin || y > rect.bottom + 140) { // 底部多留140px给编辑栏\r\n          setHoveredTag(null);\r\n        }\r\n      }}\r\n    >\r\n      {/* 主标签胶囊 */}\r\n      <div\r\n        className={`inline-flex flex-col gap-1 px-4 py-3 rounded-lg text-sm font-medium transition-all duration-200 cursor-pointer min-w-0 ${\r\n          isDisabled \r\n            ? 'bg-gray-300 text-gray-500 opacity-50' \r\n            : 'bg-blue-100 text-blue-800 hover:bg-blue-200'\r\n        }`}\r\n      >\r\n        <div className=\"flex items-center gap-2\">\r\n          <span className={`break-all ${isDisabled ? 'line-through' : ''}`}>{tag}</span>\r\n          <button\r\n            onClick={onDelete}\r\n            className=\"flex-shrink-0 w-4 h-4 rounded-full bg-blue-600 text-white flex items-center justify-center hover:bg-red-500 transition-colors\"\r\n          >\r\n            <X size={10} />\r\n          </button>\r\n        </div>\r\n        \r\n        {/* 中文翻译 */}\r\n        {translation && (\r\n          <div className=\"text-xs text-gray-600 px-1\">\r\n            {isTranslating ? '翻译中...' : translation}\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      {/* 悬停编辑栏 */}\r\n      {isHovered && (\r\n        <div \r\n          className=\"absolute top-full left-0 mt-3 bg-white border-2 border-gray-300 rounded-xl shadow-xl p-4 z-30 min-w-max\"\r\n          onMouseEnter={() => setHoveredTag(index)}\r\n          onMouseLeave={() => setHoveredTag(null)}\r\n        >\r\n          <div className=\"flex flex-col gap-4\">\r\n            {/* 第一行：权重调整 */}\r\n            <div className=\"flex items-center gap-2\">\r\n              <span className=\"text-sm text-gray-700 min-w-12 font-medium\">权重:</span>\r\n              <button\r\n                onClick={() => onAdjustWeight(-0.1)}\r\n                className=\"w-8 h-8 rounded-lg bg-gray-100 hover:bg-gray-200 flex items-center justify-center font-bold text-gray-600\"\r\n              >\r\n                -\r\n              </button>\r\n              <div className=\"text-sm font-mono min-w-12 text-center bg-gray-50 px-3 py-1 rounded-lg border\">\r\n                {parsed.weight.toFixed(1)}\r\n              </div>\r\n              <button\r\n                onClick={() => onAdjustWeight(0.1)}\r\n                className=\"w-8 h-8 rounded-lg bg-gray-100 hover:bg-gray-200 flex items-center justify-center font-bold text-gray-600\"\r\n              >\r\n                +\r\n              </button>\r\n            </div>\r\n\r\n            {/* 第二行：括号类型控制 */}\r\n            <div className=\"flex items-center gap-3\">\r\n              <span className=\"text-sm text-gray-700 min-w-12 font-medium\">括号:</span>\r\n              \r\n              {/* 圆括号 () - 1.1倍权重 */}\r\n              <div className=\"flex items-center gap-1\">\r\n                <button\r\n                  onClick={() => onAdjustBrackets('round', -1)}\r\n                  className={`w-7 h-7 rounded-lg text-xs flex items-center justify-center font-bold ${\r\n                    parsed.bracketType === 'round' \r\n                      ? 'bg-orange-500 hover:bg-orange-600 text-white' \r\n                      : 'bg-gray-100 hover:bg-gray-200 text-gray-400'\r\n                  }`}\r\n                  disabled={parsed.bracketType !== 'none' && parsed.bracketType !== 'round'}\r\n                >\r\n                  -\r\n                </button>\r\n                <div className={`px-3 py-1 rounded-lg text-sm font-mono border-2 ${\r\n                  parsed.bracketType === 'round' \r\n                    ? 'bg-orange-100 text-orange-800 border-orange-300' \r\n                    : 'bg-gray-100 text-gray-500 border-gray-300'\r\n                }`}>\r\n                  () {parsed.bracketType === 'round' ? parsed.brackets : 0}\r\n                </div>\r\n                <button\r\n                  onClick={() => onAdjustBrackets('round', 1)}\r\n                  className={`w-7 h-7 rounded-lg text-xs flex items-center justify-center font-bold ${\r\n                    (parsed.bracketType === 'none' || parsed.bracketType === 'round') && parsed.brackets < 5\r\n                      ? 'bg-orange-500 hover:bg-orange-600 text-white' \r\n                      : 'bg-gray-100 text-gray-400'\r\n                  }`}\r\n                  disabled={parsed.bracketType !== 'none' && parsed.bracketType !== 'round'}\r\n                >\r\n                  +\r\n                </button>\r\n              </div>\r\n\r\n              {/* 花括号 {} - 1.05倍权重 */}\r\n              <div className=\"flex items-center gap-1\">\r\n                <button\r\n                  onClick={() => onAdjustBrackets('curly', -1)}\r\n                  className={`w-7 h-7 rounded-lg text-xs flex items-center justify-center font-bold ${\r\n                    parsed.bracketType === 'curly' \r\n                      ? 'bg-yellow-500 hover:bg-yellow-600 text-white' \r\n                      : 'bg-gray-100 hover:bg-gray-200 text-gray-400'\r\n                  }`}\r\n                  disabled={parsed.bracketType !== 'none' && parsed.bracketType !== 'curly'}\r\n                >\r\n                  -\r\n                </button>\r\n                <div className={`px-3 py-1 rounded-lg text-sm font-mono border-2 ${\r\n                  parsed.bracketType === 'curly' \r\n                    ? 'bg-yellow-100 text-yellow-800 border-yellow-300' \r\n                    : 'bg-gray-100 text-gray-500 border-gray-300'\r\n                }`}>\r\n                  {`{}`} {parsed.bracketType === 'curly' ? parsed.brackets : 0}\r\n                </div>\r\n                <button\r\n                  onClick={() => onAdjustBrackets('curly', 1)}\r\n                  className={`w-7 h-7 rounded-lg text-xs flex items-center justify-center font-bold ${\r\n                    (parsed.bracketType === 'none' || parsed.bracketType === 'curly') && parsed.brackets < 5\r\n                      ? 'bg-yellow-500 hover:bg-yellow-600 text-white' \r\n                      : 'bg-gray-100 text-gray-400'\r\n                  }`}\r\n                  disabled={parsed.bracketType !== 'none' && parsed.bracketType !== 'curly'}\r\n                >\r\n                  +\r\n                </button>\r\n              </div>\r\n\r\n              {/* 方括号 [] - 0.9倍权重 */}\r\n              <div className=\"flex items-center gap-1\">\r\n                <button\r\n                  onClick={() => onAdjustBrackets('square', -1)}\r\n                  className={`w-7 h-7 rounded-lg text-xs flex items-center justify-center font-bold ${\r\n                    parsed.bracketType === 'square' \r\n                      ? 'bg-blue-500 hover:bg-blue-600 text-white' \r\n                      : 'bg-gray-100 hover:bg-gray-200 text-gray-400'\r\n                  }`}\r\n                  disabled={parsed.bracketType !== 'none' && parsed.bracketType !== 'square'}\r\n                >\r\n                  -\r\n                </button>\r\n                <div className={`px-3 py-1 rounded-lg text-sm font-mono border-2 ${\r\n                  parsed.bracketType === 'square' \r\n                    ? 'bg-blue-100 text-blue-800 border-blue-300' \r\n                    : 'bg-gray-100 text-gray-500 border-gray-300'\r\n                }`}>\r\n                  [] {parsed.bracketType === 'square' ? parsed.brackets : 0}\r\n                </div>\r\n                <button\r\n                  onClick={() => onAdjustBrackets('square', 1)}\r\n                  className={`w-7 h-7 rounded-lg text-xs flex items-center justify-center font-bold ${\r\n                    (parsed.bracketType === 'none' || parsed.bracketType === 'square') && parsed.brackets < 5\r\n                      ? 'bg-blue-500 hover:bg-blue-600 text-white' \r\n                      : 'bg-gray-100 text-gray-400'\r\n                  }`}\r\n                  disabled={parsed.bracketType !== 'none' && parsed.bracketType !== 'square'}\r\n                >\r\n                  +\r\n                </button>\r\n              </div>\r\n            </div>\r\n\r\n            {/* 第三行：功能按钮 */}\r\n            <div className=\"flex items-center gap-2\">\r\n              <button\r\n                onClick={onCopy}\r\n                className=\"flex items-center gap-1 px-3 py-2 rounded-lg bg-green-100 hover:bg-green-200 text-green-700 text-sm transition-colors\"\r\n                title=\"复制\"\r\n              >\r\n                <Copy size={14} />\r\n                复制\r\n              </button>\r\n              <button\r\n                onClick={onFavorite}\r\n                className=\"flex items-center gap-1 px-3 py-2 rounded-lg bg-red-100 hover:bg-red-200 text-red-700 text-sm transition-colors\"\r\n                title=\"收藏\"\r\n              >\r\n                <Heart size={14} />\r\n                收藏\r\n              </button>\r\n              <button\r\n                onClick={onToggleDisabled}\r\n                className={`flex items-center gap-1 px-3 py-2 rounded-lg text-sm transition-colors ${\r\n                  isDisabled \r\n                    ? 'bg-blue-100 hover:bg-blue-200 text-blue-700' \r\n                    : 'bg-gray-100 hover:bg-gray-200 text-gray-700'\r\n                }`}\r\n                title={isDisabled ? \"启用\" : \"禁用\"}\r\n              >\r\n                {isDisabled ? <Eye size={14} /> : <EyeOff size={14} />}\r\n                {isDisabled ? \"启用\" : \"禁用\"}\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\n/**\r\n * 标签卡片组件\r\n */\r\nconst TagCard = ({ tag, onAdd, onToggleFavorite, isFavorited }) => (\r\n  <div className=\"group bg-gradient-to-r from-gray-50 to-white border border-gray-200 rounded-lg p-4 hover:shadow-md hover:border-blue-300 transition-all duration-200 cursor-pointer\">\r\n    <div onClick={onAdd} className=\"flex-1\">\r\n      <div className=\"flex items-start justify-between mb-2\">\r\n        <div className=\"flex-1\">\r\n          <h4 className=\"font-medium text-gray-900 text-sm mb-1 group-hover:text-blue-700 transition-colors\">\r\n            {tag.en}\r\n          </h4>\r\n          <p className=\"text-xs text-blue-600 mb-2\">\r\n            {tag.cn}\r\n          </p>\r\n        </div>\r\n        <button\r\n          onClick={(e) => {\r\n            e.stopPropagation();\r\n            onToggleFavorite();\r\n          }}\r\n          className={`p-1 rounded-full transition-colors ${\r\n            isFavorited \r\n              ? 'text-red-500 hover:bg-red-50' \r\n              : 'text-gray-400 hover:bg-gray-100 hover:text-red-500'\r\n          }`}\r\n        >\r\n          <Heart size={14} fill={isFavorited ? 'currentColor' : 'none'} />\r\n        </button>\r\n      </div>\r\n      \r\n      <div className=\"flex items-center justify-between\">\r\n        <div className=\"flex items-center gap-2\">\r\n          <div className=\"flex items-center gap-1\">\r\n            <TrendingUp size={12} className=\"text-green-600\" />\r\n            <span className=\"text-xs text-green-600 font-medium\">{tag.frequency}%</span>\r\n          </div>\r\n          <div className=\"w-12 bg-gray-200 rounded-full h-1\">\r\n            <div \r\n              className=\"bg-green-500 h-1 rounded-full transition-all\" \r\n              style={{ width: `${tag.frequency}%` }}\r\n            />\r\n          </div>\r\n        </div>\r\n        \r\n        <button\r\n          onClick={onAdd}\r\n          className=\"opacity-0 group-hover:opacity-100 transition-opacity text-xs bg-blue-600 text-white px-2 py-1 rounded-full hover:bg-blue-700\"\r\n        >\r\n          <Plus size={10} className=\"inline mr-1\" />\r\n          添加\r\n        </button>\r\n      </div>\r\n    </div>\r\n  </div>\r\n);\r\n\r\nexport default PromptLibraryPage; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}